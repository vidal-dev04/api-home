{"version":3,"file":"MCPTryOut.78ac9b62d823a23f1bfc.bundle.js","mappings":"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","sources":["webpack://@wso2apim/devportal/./source/src/app/components/Shared/ApiTryOut/SecurityDetailsPanel.jsx","webpack://@wso2apim/devportal/./source/src/app/components/Apis/Details/MCPTryOut/MCPTryOut.jsx"],"sourcesContent":["/*\n * Copyright (c) 2025, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the \"License\"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useEffect, useContext, useState } from 'react';\nimport { PropTypes } from 'prop-types';\nimport Drawer from '@mui/material/Drawer';\nimport {\n    Box, Grid, Paper, Typography, Button,\n} from '@mui/material';\nimport { FormattedMessage } from 'react-intl';\nimport InfoIcon from '@mui/icons-material/Info';\nimport AuthManager from 'AppData/AuthManager';\nimport { ApiContext } from 'AppComponents/Apis/Details/ApiContext';\nimport Progress from 'AppComponents/Shared/Progress';\nimport TryOutController from 'AppComponents/Shared/ApiTryOut/TryOutController';\nimport Application from 'AppData/Application';\nimport IconButton from '@mui/material/IconButton';\nimport { Close } from '@mui/icons-material';\n\nconst SecurityDetailsPanel = ({\n    isDrawerOpen,\n    updateDrawerOpen,\n    setTestAccessToken,\n    onConfigChange,\n}) => {\n    const [api, setApi] = useState(null);\n    const [securityScheme, setSecurityScheme] = useState('OAUTH');\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [scopes, setScopes] = useState([]);\n    const [selectedKeyType, setSelectedKeyType] = useState('PRODUCTION');\n    const [keys, setKeys] = useState([]);\n    const [selectedEnvironment, setSelectedEnvironment] = useState('');\n    const [productionAccessToken, setProductionAccessToken] = useState('');\n    const [sandboxAccessToken, setSandboxAccessToken] = useState('');\n    const [environments, setEnvironments] = useState([]);\n    const [selectedKeyManager, setSelectedKeyManager] = useState('Resident Key Manager');\n    const [productionApiKey, setProductionApiKey] = useState('');\n    const [sandboxApiKey, setSandboxApiKey] = useState('');\n    const [advAuthHeader, setAdvAuthHeader] = useState('Authorization');\n    const [advAuthHeaderValue, setAdvAuthHeaderValue] = useState('');\n    const [selectedEndpoint, setSelectedEndpoint] = useState('PRODUCTION');\n\n    const user = AuthManager.getUser();\n    const { api: apiObj } = useContext(ApiContext);\n\n    useEffect(() => {\n        setApi(apiObj);\n    }, [apiObj]);\n\n    useEffect(() => {\n        if (api) {\n            if (api.endpointURLs) {\n                setEnvironments(\n                    api.endpointURLs.map((endpoint) => ({\n                        name: endpoint.environmentName,\n                        displayName: endpoint.environmentDisplayName,\n                    })),\n                );\n            }\n\n            if (api.scopes) {\n                const scopeList = api.scopes.map((scope) => scope.key);\n                setScopes(scopeList);\n            }\n\n            let defaultSecurityScheme = 'OAUTH';\n            if (!api.securityScheme.includes('oauth2')) {\n                defaultSecurityScheme = api.securityScheme.includes('api_key')\n                    ? 'API-KEY'\n                    : 'BASIC';\n            }\n\n            if (environments && environments.length > 0) {\n                setSelectedEnvironment(environments[0].name);\n            }\n\n            setProductionAccessToken(productionAccessToken);\n            setSandboxAccessToken(sandboxAccessToken);\n            setSecurityScheme(defaultSecurityScheme);\n        }\n    }, [api]);\n\n    useEffect(() => {\n        // Update selected environment only when environments change\n        if (api) {\n            if (environments && environments.length > 0) {\n                setSelectedEnvironment(environments[0].name);\n            }\n        }\n    }, [environments, api]);\n\n    useEffect(() => {\n        updateDrawerOpen(isDrawerOpen);\n    }, [isDrawerOpen]);\n\n    // Load the access token for the given key type\n    const updateAccessToken = (selectedApplication) => {\n        let accessToken;\n        if (keys.get(selectedKeyManager) && keys.get(selectedKeyManager).keyType === selectedKeyType) {\n            ({ accessToken } = keys.get(selectedKeyManager).token);\n            if (selectedKeyType === 'PRODUCTION') {\n                setProductionAccessToken(accessToken);\n            } else {\n                setSandboxAccessToken(accessToken);\n            }\n        } else {\n            Application.get(selectedApplication)\n                .then((application) => {\n                    return application.getKeys(selectedKeyType);\n                })\n                .then((appKeys) => {\n                    if (appKeys.get(selectedKeyManager)\n                        && appKeys.get(selectedKeyManager).keyType === selectedKeyType) {\n                        ({ accessToken } = appKeys.get(selectedKeyManager).token);\n                    }\n                    if (appKeys.get(selectedKeyManager).keyType === 'PRODUCTION') {\n                        setProductionAccessToken(accessToken);\n                    } else {\n                        setSandboxAccessToken(accessToken);\n                    }\n                    setKeys(appKeys);\n                });\n        }\n    };\n\n    // Update the selected key manager\n    const updateSelectedKeyManager = (keyManager, isUpdateToken, selectedApplication) => {\n        if (isUpdateToken) {\n            setSelectedKeyManager(keyManager);\n            updateAccessToken(selectedApplication);\n        } else {\n            setSelectedKeyManager(keyManager);\n        }\n    };\n\n    if (api == null) {\n        return <Progress />;\n    }\n\n    return (\n        <>\n            <Drawer\n                title='Configure Key'\n                anchor='right'\n                open={isDrawerOpen}\n                onClose={() => updateDrawerOpen(false)}\n                id='api-chat-configure-key-drawer'\n                PaperProps={{\n                    sx: { width: '70%', borderRadius: 1 },\n                }}\n            >\n                <Box p={2}>\n                    <Grid container justifyContent='space-between' alignItems='center'>\n                        <Grid item xs={10}>\n                            <Typography variant='h6'>\n                                <FormattedMessage\n                                    id='ApiTryOut.SecurityDetailsPanel.title'\n                                    defaultMessage='Security Configuration'\n                                />\n                            </Typography>\n                        </Grid>\n                        <Grid item xs={2} display='flex' justifyContent='flex-end'>\n                            <IconButton onClick={() => updateDrawerOpen(false)} size='large'>\n                                <Close />\n                            </IconButton>\n                        </Grid>\n                    </Grid>\n                    <Grid container padding={2}>\n                        {!user && (!api.advertiseInfo || !api.advertiseInfo.advertised) && (\n                            <Paper sx={{ padding: 1 }}>\n                                <Typography variant='h5' component='h3'>\n                                    <InfoIcon sx={{ verticalAlign: 'middle', marginBottom: 0.5 }} />\n                                    {' '}\n                                    <FormattedMessage id='notice' defaultMessage='Notice' />\n                                </Typography>\n                                <Typography component='p' align='justify' sx={{ padding: 1 }}>\n                                    <FormattedMessage\n                                        id='api.console.require.access.token'\n                                        defaultMessage={'You need an access token to try the API. Please log '\n                                            + 'in and subscribe to the API to generate an access token. If you already '\n                                            + 'have an access token, please provide it below.'}\n                                    />\n                                </Typography>\n                            </Paper>\n                        )}\n                    </Grid>\n                    <Grid container justifyContent='center' spacing={0}>\n                        <TryOutController\n                            setSecurityScheme={setSecurityScheme}\n                            securitySchemeType={securityScheme}\n                            setSelectedEnvironment={setSelectedEnvironment}\n                            selectedEnvironment={selectedEnvironment}\n                            productionAccessToken={productionAccessToken}\n                            setProductionAccessToken={setProductionAccessToken}\n                            sandboxAccessToken={sandboxAccessToken}\n                            setSandboxAccessToken={setSandboxAccessToken}\n                            environments={environments}\n                            scopes={scopes}\n                            setUsername={setUsername}\n                            setPassword={setPassword}\n                            username={username}\n                            password={password}\n                            setSelectedKeyType={setSelectedKeyType}\n                            selectedKeyType={selectedKeyType}\n                            setSelectedKeyManager={updateSelectedKeyManager}\n                            selectedKeyManager={selectedKeyManager}\n                            setKeys={setKeys}\n                            setProductionApiKey={setProductionApiKey}\n                            setSandboxApiKey={setSandboxApiKey}\n                            productionApiKey={productionApiKey}\n                            sandboxApiKey={sandboxApiKey}\n                            setAdvAuthHeader={setAdvAuthHeader}\n                            setAdvAuthHeaderValue={setAdvAuthHeaderValue}\n                            advAuthHeader={advAuthHeader}\n                            advAuthHeaderValue={advAuthHeaderValue}\n                            setSelectedEndpoint={setSelectedEndpoint}\n                            selectedEndpoint={selectedEndpoint}\n                            api={api}\n                            URLs={null}\n                            autoGenerateToken\n                            setTestAccessToken={setTestAccessToken}\n                            onConfigChange={onConfigChange}\n                        />\n                    </Grid>\n                    <Grid container justifyContent='right' pr={2}>\n                        <Button\n                            variant='outlined'\n                            type='submit'\n                            color='primary'\n                            data-testid='key-details-cancel'\n                            onClick={() => updateDrawerOpen(false)}\n                            sx={{\n                                marginRight: '1em',\n                            }}\n                        >\n                            <FormattedMessage\n                                id='ApiTryOut.SecurityDetailsPanel.btn.cancel'\n                                defaultMessage='Cancel'\n                            />\n                        </Button>\n                        <Button\n                            variant='contained'\n                            type='submit'\n                            color='primary'\n                            data-testid='key-details-save'\n                            onClick={() => updateDrawerOpen(false)}\n                        >\n                            <FormattedMessage\n                                id='ApiTryOut.SecurityDetailsPanel.btn.done'\n                                defaultMessage='Done'\n                            />\n                        </Button>\n                    </Grid>\n                </Box>\n            </Drawer>\n        </>\n    );\n};\n\nSecurityDetailsPanel.propTypes = {\n    isDrawerOpen: PropTypes.bool.isRequired,\n    updateDrawerOpen: PropTypes.func.isRequired,\n    setTestAccessToken: PropTypes.func.isRequired,\n    onConfigChange: PropTypes.func.isRequired,\n};\n\nexport default SecurityDetailsPanel;\n","/*\n * Copyright (c) 2025, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the \"License\"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { styled } from '@mui/material/styles';\nimport MCPPlayground from '@wso2-org/mcp-playground';\nimport { ApiContext } from 'AppComponents/Apis/Details/ApiContext';\nimport { FormattedMessage } from 'react-intl';\nimport { Typography } from '@mui/material';\nimport SecurityDetailsPanel from 'AppComponents/Shared/ApiTryOut/SecurityDetailsPanel';\n\nconst PREFIX = 'MCPTryOut';\n\nconst classes = {\n    mcpPlaygroundWrapper: `${PREFIX}-mcpPlaygroundWrapper`,\n    titleSub: `${PREFIX}-titleSub`,\n};\n\nconst Root = styled('div')(({ theme }) => ({\n    padding: theme.spacing(3),\n    [`& .${classes.titleSub}`]: {\n        marginBottom: theme.spacing(3),\n    },\n    [`& .${classes.mcpPlaygroundWrapper}`]: {\n        // Apply the portal's font family to the MCP playground\n        fontFamily: theme.typography.fontFamily,\n        marginTop: theme.spacing(2),\n        '& *': {\n            fontFamily: theme.typography.fontFamily,\n        },\n        // Ensure all text elements within the playground inherit the font family\n        '& input, & textarea, & select, & button, & div, & span, & p, & label, & h1, & h2, & h3, & h4, & h5, & h6': {\n            fontFamily: theme.typography.fontFamily,\n        },\n    },\n}));\n\nconst MCPTryOut = () => {\n    const [configurationDrawerOpen, setConfigurationDrawerOpen] = useState(false);\n    const [accessToken, setAccessToken] = useState(null);\n    const [securityScheme, setSecurityScheme] = useState('OAUTH');\n    const [selectedEnvironment, setSelectedEnvironment] = useState('Default');\n\n    const { api } = useContext(ApiContext);\n\n    const handleConfigChange = ({\n        newAccessToken,\n        newSecurityScheme,\n        newSelectedEnvironment,\n    }) => {\n        if (newAccessToken !== undefined) {\n            setAccessToken(newAccessToken);\n        }\n        if (newSecurityScheme !== undefined) {\n            setSecurityScheme(newSecurityScheme);\n        }\n        if (newSelectedEnvironment !== undefined) {\n            setSelectedEnvironment(newSelectedEnvironment);\n        }\n    };\n\n    const getEnvironmentURLs = (endpointURLs, environmentName) => {\n        const environment = endpointURLs.find((env) => env.environmentName === environmentName);\n        return environment ? environment.URLs : {};\n    };\n\n    const handleConfigurationDrawerOpen = () => {\n        setConfigurationDrawerOpen(true);\n    };\n\n    const getMCPServerUrl = () => {\n        const environmentURLs = getEnvironmentURLs(api.endpointURLs, selectedEnvironment);\n        const url = environmentURLs.https || environmentURLs.http;\n        return `${url}/mcp`;\n    };\n\n    const getToken = () => {\n        if (securityScheme === 'OAUTH' && accessToken !== null && accessToken !== undefined && accessToken !== '') {\n            return `Bearer ${accessToken}`;\n        }\n        return accessToken;\n    };\n\n    return (\n        <Root>\n            <Typography variant='h4' className={classes.titleSub}>\n                <FormattedMessage\n                    id='Apis.Details.MCPTryOut.MCPTryOut.title'\n                    defaultMessage='MCP Playground'\n                />\n            </Typography>\n            <SecurityDetailsPanel\n                isDrawerOpen={configurationDrawerOpen}\n                updateDrawerOpen={setConfigurationDrawerOpen}\n                onConfigChange={handleConfigChange}\n            />\n            <div className={classes.mcpPlaygroundWrapper}>\n                <MCPPlayground\n                    disableTitle\n                    enableConfiguration\n                    onConfigurationClick={handleConfigurationDrawerOpen}\n                    url={getMCPServerUrl()}\n                    token={getToken()}\n                    headerName={api.authorizationHeader ? api.authorizationHeader : 'Authorization'}\n                    shouldSetHeaderNameExternally\n                    disableConnectionButton={\n                        accessToken === null || accessToken === undefined || accessToken === ''\n                    }\n                />\n            </div>\n        </Root>\n    );\n};\n\nMCPTryOut.propTypes = {\n    api: PropTypes.shape({\n        context: PropTypes.string.isRequired,\n    }).isRequired,\n};\n\nexport default MCPTryOut;\n"],"names":["SecurityDetailsPanel","_ref","isDrawerOpen","updateDrawerOpen","setTestAccessToken","onConfigChange","api","setApi","useState","securityScheme","setSecurityScheme","username","setUsername","password","setPassword","scopes","setScopes","selectedKeyType","setSelectedKeyType","keys","setKeys","selectedEnvironment","setSelectedEnvironment","productionAccessToken","setProductionAccessToken","sandboxAccessToken","setSandboxAccessToken","environments","setEnvironments","selectedKeyManager","setSelectedKeyManager","productionApiKey","setProductionApiKey","sandboxApiKey","setSandboxApiKey","advAuthHeader","setAdvAuthHeader","advAuthHeaderValue","setAdvAuthHeaderValue","selectedEndpoint","setSelectedEndpoint","user","AuthManager","getUser","apiObj","useContext","ApiContext","useEffect","endpointURLs","map","endpoint","name","environmentName","displayName","environmentDisplayName","scopeList","scope","key","defaultSecurityScheme","includes","length","React","Progress","Drawer","title","anchor","open","onClose","id","PaperProps","sx","width","borderRadius","Box","p","Grid","container","justifyContent","alignItems","item","xs","Typography","variant","FormattedMessage","defaultMessage","display","IconButton","onClick","size","Close","padding","advertiseInfo","advertised","Paper","component","InfoIcon","verticalAlign","marginBottom","align","spacing","TryOutController","securitySchemeType","updateSelectedKeyManager","keyManager","isUpdateToken","selectedApplication","accessToken","get","keyType","token","Application","then","application","getKeys","appKeys","updateAccessToken","URLs","autoGenerateToken","pr","Button","type","color","marginRight","propTypes","PropTypes","bool","isRequired","func","PREFIX","classes","mcpPlaygroundWrapper","titleSub","Root","styled","theme","fontFamily","typography","marginTop","MCPTryOut","configurationDrawerOpen","setConfigurationDrawerOpen","setAccessToken","className","_ref2","newAccessToken","newSecurityScheme","newSelectedEnvironment","undefined","MCPPlayground","disableTitle","enableConfiguration","onConfigurationClick","handleConfigurationDrawerOpen","url","getMCPServerUrl","environmentURLs","getEnvironmentURLs","environment","find","env","https","http","headerName","authorizationHeader","shouldSetHeaderNameExternally","disableConnectionButton","context"],"sourceRoot":""}