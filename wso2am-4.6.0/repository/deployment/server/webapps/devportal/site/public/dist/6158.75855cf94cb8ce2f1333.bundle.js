"use strict";(this.webpackChunk_wso2apim_devportal=this.webpackChunk_wso2apim_devportal||[]).push([[6158],{11240:(e,t,a)=>{a.d(t,{A:()=>ut});var n=a(96540),r=a(11848),s=a(5556),i=a.n(s),o=a(84798),l=a(69067),c=a(33551),p=a(58065),d=a(38798),u=a(18679),m=a(73357),y=a(89828),g=a(17532),h=a(10423),A=a(84712),k=a(58031),E=a(58763),f=a(22477),b=a(46831),T=a(84421),C=a(67783),S=a(6442),v=a(6347),K=a(45359),M=a(99020),w=a(1043),x=a(68738);function P(e){const{consumerKey:t,consumerSecret:a,onChange:r,isUserOwner:s,key:i,provideOAuthKeySecret:l,importDisabled:d}=e,u=(0,S.A)(),[m,y]=n.useState(!1),g=()=>{y(!1)},[h,A]=(0,n.useState)(!1),P=(0,n.useContext)(x.Ay);function O(e){r&&r(e)}return(0,n.useEffect)((()=>{const e=P.settings.orgWideAppUpdateEnabled;A(e)}),[P]),n.createElement(n.Fragment,null,n.createElement(o.A,{variant:"outlined",color:"secondary",startIcon:n.createElement(T.A,null),onClick:()=>{y(!0)},disabled:d},n.createElement(p.A,{defaultMessage:"Provide Existing OAuth Keys",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth"})),n.createElement(k.A,{open:m,onClose:g,"aria-labelledby":"form-dialog-title"},n.createElement(b.A,{id:"form-dialog-title"},n.createElement(p.A,{defaultMessage:"Provide Existing OAuth Keys",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth"})),n.createElement(f.A,null,n.createElement(M.Ay,{container:!0,spacing:3,direction:"column"},n.createElement(M.Ay,{item:!0,xs:12},n.createElement(w.A,{id:"provided-consumer-key",name:"providedConsumerKey",label:u.formatMessage({defaultMessage:"Consumer Key",id:"Shared.AppsAndKeys.ImportExternalApp.consumer.key"}),value:t,onChange:e=>O(e),margin:"normal",fullWidth:!0,disabled:!h&&!s,variant:"outlined"}),n.createElement(K.A,{variant:"standard"},n.createElement(v.A,{id:"consumer-key-helper-text"},n.createElement(p.A,{id:"Shared.AppsAndKeys.ImportExternalApp.consumer.key.title",defaultMessage:"Consumer Key of the OAuth application"})))),n.createElement(M.Ay,{item:!0,xs:12},n.createElement(w.A,{id:"provided-consumer-secret",name:"providedConsumerSecret",label:u.formatMessage({defaultMessage:"Consumer Secret",id:"Shared.AppsAndKeys.ImportExternalApp.consumer.secret"}),value:a,onChange:e=>O(e),margin:"normal",fullWidth:!0,disabled:!h&&!s,variant:"outlined"}),n.createElement(K.A,{variant:"standard"},n.createElement(v.A,{id:"consumer-secret-helper-text"},n.createElement(p.A,{id:"Shared.AppsAndKeys.ImportExternalApp.consumer.secret.of.application",defaultMessage:"Consumer Secret of the OAuth application"})))))),n.createElement(E.A,null,n.createElement(o.A,{onClick:g,color:"primary"},n.createElement(p.A,{defaultMessage:"Cancel",id:"Shared.AppsAndKeys.ImportExternalApp.cancel"})),n.createElement(C.M9,{resourcePath:C.Hc.APPLICATION_GENERATE_KEYS,resourceMethod:C.DT.POST},h||s?n.createElement(o.A,{variant:"contained",color:"primary",onClick:()=>l()},i?n.createElement(p.A,{defaultMessage:"Update",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth.button.update"}):n.createElement(p.A,{defaultMessage:"Provide",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth.button.provide"})):n.createElement(n.Fragment,null,n.createElement(o.A,{variant:"contained",color:"primary",onClick:()=>l(),disabled:!h&&!s},i?n.createElement(p.A,{defaultMessage:"Update",id:"Shared.AppsAndKeys.ImportExternalApp.provide. oauth.button.update"}):n.createElement(p.A,{defaultMessage:"Provide",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth.button.provide"})),n.createElement(c.A,{variant:"caption"},n.createElement(p.A,{defaultMessage:"Only owner can provide keys",id:"Shared.AppsAndKeys.ImportExternalApp.key.provide.user.owner"})))))))}P.propTypes={intl:i().shape({}).isRequired,onChange:i().func.isRequired,consumerKey:i().string,consumerSecret:i().string,isUserOwner:i().string,key:i().shape({}).isRequired,provideOAuthKeySecret:i().func.isRequired,importDisabled:i().bool},P.defaultProps={consumerKey:"",consumerSecret:"",isUserOwner:!1,importDisabled:!1};const O=P;var I=a(46252),R=a(32997),$=a(61914),N=a(6325),D=a(51989),_=a(61523),W=a(56655),U=a(19455),q=a(92728),G=a(8843),L=a(77867),V=a(60766);const j="ViewCurl",H={code:`${j}-code`,command:`${j}-command`,encodeVisible:`${j}-encodeVisible`,contentWrapper:`${j}-contentWrapper`},F=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${H.code}`]:{padding:t.spacing(1),marginBottom:t.spacing(2),background:t.palette.grey[200],color:"#da2316",flex:1},[`& .${H.command}`]:{color:"#2b62b0"},[`& .${H.encodeVisible}`]:{cursor:"pointer",textDecoration:"underline"},[`& .${H.contentWrapper}`]:{display:"flex"}}}));function B(e){const{keys:{consumerKey:t,consumerSecret:a},intl:r,keyManagerConfig:s,jwtToken:i,defaultTokenEndpoint:o}=e,l=window.btoa(t+":"+a),[d,u]=(0,n.useState)(!1),[m,y]=(0,n.useState)(!1),g=()=>{y(!0),setTimeout((function(){y(!1)}),4e3)},h=()=>{u(!d)};let{tokenEndpoint:A}=s;const k="AzureAD"===s.type,E=k?` -d "scope=api://${t}/.default"`:"";return null===s.alias?n.createElement(F,null,n.createElement(c.A,null,n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewCurl.help",defaultMessage:"The following cURL command shows how to generate an access token using the Password Grant type."})),n.createElement("div",{className:H.contentWrapper},n.createElement("div",{className:H.code},n.createElement("div",null,n.createElement("span",{className:H.command},"curl -k -X POST ")," ",A,n.createElement("span",{className:H.command}," -d ")," ",'"grant_type=password&username=Username&password=Password"'),n.createElement("div",null,n.createElement("span",{className:H.command}," -H "),'"Authorization: Basic',n.createElement("a",{onClick:h,className:H.encodeVisible},d?" "+l:" Base64(consumer-key:consumer-secret)"),'"')),n.createElement("div",null,n.createElement(W.A,{title:m?r.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewCurl.copied"}):r.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewCurl.copy.to.clipboard"}),placement:"right"},n.createElement(U.A,{id:"copy-to-clipbord-icon","aria-label":"Copy to clipboard",size:"large",onClick:()=>{navigator.clipboard.writeText(`curl -k -X POST ${A} -d "grant_type=password&username=Username&password=Password" -H "Authorization: Basic ${l}"`).then(g())}},n.createElement(V.A,{color:"secondary"}))))),n.createElement(c.A,null,n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewCurl.help.in.a.similar",defaultMessage:"In a similar manner, you can generate an access token using the\n                    Client Credentials grant type with the following cURL command."})),n.createElement("div",{className:H.contentWrapper},n.createElement("div",{className:H.code},n.createElement("div",null,n.createElement("span",{className:H.command},"curl -k -X POST ")," ",A,n.createElement("span",{className:H.command}," -d ")," ",'"grant_type=client_credentials"',k&&n.createElement(n.Fragment,null,n.createElement("span",{className:H.command}," -d ")," ",`"scope=api://${t}/.default"`)),n.createElement("div",null,n.createElement("span",{className:H.command}," -H "),'"Authorization: Basic',n.createElement("a",{onClick:h,className:H.encodeVisible},d?" "+l:" Base64(consumer-key:consumer-secret)"),'"')),n.createElement("div",null,n.createElement(W.A,{title:m?r.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewCurl.copied"}):r.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewCurl.copy.to.clipboard"}),placement:"right"},n.createElement(U.A,{id:"copy-to-clipbord-icon","aria-label":"Copy to clipboard",size:"large",onClick:()=>{navigator.clipboard.writeText(`curl -k -X POST ${A} -d "grant_type=client_credentials"`+E+" -H "+`"Authorization: Basic ${l}"`).then(g())}},n.createElement(V.A,{color:"secondary"})))))):!1===t?n.createElement(F,null,n.createElement(c.A,null,n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewCurl.error",defaultMessage:"Please generate the Consumer Key and Secret for Residence Key Manager with selecting the urn:ietf:params:oauth:grant-type:token-exchange grant type in order to use the token Exchange Approach. "}))):n.createElement(F,null,n.createElement(c.A,null,n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewCurl.TokenExchange.help",defaultMessage:"The following cURL command shows how to generate an access token using the token exchange grant type"})),n.createElement("div",{className:H.contentWrapper},n.createElement("div",{className:H.code},n.createElement("div",null,n.createElement("span",{className:H.command},"curl -k -X POST ")," ",o,n.createElement("span",{className:H.command}," -d ")," ",'"grant_type=urn:ietf:params:oauth:grant-type:token-exchange"',n.createElement("span",{className:H.command}," -d ")," ",'"subject_token_type=urn:ietf:params:oauth:token-type:jwt"',n.createElement("span",{className:H.command}," -d ")," ",'"requested_token_type=urn:ietf:params:oauth:token-type:jwt" ',n.createElement("span",{className:H.command}," -d ")," ",'"subject_token="',n.createElement("a",{onClick:h,className:H.encodeVisible},d?" "+i:"jwtToken")),n.createElement("div",null,n.createElement("span",{className:H.command}," -H "),'"Authorization: Basic',n.createElement("a",{onClick:h,className:H.encodeVisible},d?" "+l:" Base64(consumer-key:consumer-secret)"),'"')),n.createElement("div",null,n.createElement(W.A,{title:m?r.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewCurl.copied"}):r.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewCurl.copy.to.clipboard"}),placement:"right"},n.createElement(U.A,{id:"copy-to-clipbord-icon","aria-label":"Copy to clipboard",size:"large",onClick:()=>{navigator.clipboard.writeText(`curl -k -X POST ${o} -d "grant_type=urn:ietf:params:oauth:grant-type:token-exchange" -d "subject_token_type=urn:ietf:params:oauth:token-type:jwt" -d "requested_token_type=urn:ietf:params:oauth:token-type:jwt" -d "subject_token=${i}"  -H "Authorization: Basic ${l}"`).then(g())}},n.createElement(V.A,{color:"secondary"}))))))}B.propTypes={classes:i().shape({}).isRequired,keys:i().shape({}).isRequired,apis:i().shape({}).isRequired,jwtToken:i().string,defaultTokenEndpoint:i().string};const z=(0,d.Ay)(B);var J=a(37738),Y=a(19112),X=a(36575),Q=a(23049),Z=a(70691);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(a),!0).forEach((function(t){ae(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ae(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ne="TokenExchangeKeyConfiguration",re={FormControl:`${ne}-FormControl`,FormControlOdd:`${ne}-FormControlOdd`,button:`${ne}-button`,quotaHelp:`${ne}-quotaHelp`,checkboxWrapper:`${ne}-checkboxWrapper`,generateWrapper:`${ne}-generateWrapper`,checkboxWrapperColumn:`${ne}-checkboxWrapperColumn`,group:`${ne}-group`,removeHelperPadding:`${ne}-removeHelperPadding`,iconStyle:`${ne}-iconStyle`,iconButton:`${ne}-iconButton`,titleColumn:`${ne}-titleColumn`,keyInfoTable:`${ne}-keyInfoTable`,leftCol:`${ne}-leftCol`,stepLabel:`${ne}-stepLabel`,stepContent:`${ne}-stepContent`,keyLabel:`${ne}-keyLabel`,idpGrid:`${ne}-idpGrid`,helperTextError:`${ne}-helperTextError`,input:`${ne}-input`,avatar:`${ne}-avatar`,copyIconStyle:`${ne}-copyIconStyle`,hr:`${ne}-hr`,divCenter:`${ne}-divCenter`,tableHeader:`${ne}-tableHeader`,helperText:`${ne}-helperText`,dialogWrapper:`${ne}-dialogWrapper`,margin:`${ne}-margin`,tokenSection:`${ne}-tokenSection`,inputWrapper:`${ne}-inputWrapper`,bottomInfo:`${ne}-bottomInfo`},se=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${re.FormControl}`]:{paddingTop:0,paddingBottom:t.spacing(2),paddingLeft:0,width:"100%"},[`& .${re.FormControlOdd}`]:{padding:t.spacing(2),width:"100%"},[`& .${re.button}`]:{marginLeft:t.spacing(1)},[`& .${re.quotaHelp}`]:{position:"relative"},[`& .${re.checkboxWrapper}`]:{display:"flex"},[`& .${re.generateWrapper}`]:{padding:"10px 0px",marginLeft:t.spacing(1.25)},[`& .${re.checkboxWrapperColumn}`]:{display:"flex",flexWrap:"wrap",flexDirection:"row",whiteSpace:"nowrap"},[`& .${re.group}`]:{flexDirection:"row"},[`& .${re.removeHelperPadding}`]:{"& p":{margin:"8px 0px"}},[`& .${re.iconStyle}`]:{cursor:"pointer",padding:"0 0 0 10px"},[`& .${re.iconButton}`]:{padding:"0 0 0 10px","& .material-icons":{fontSize:16}},[`& .${re.titleColumn}`]:{width:150,fontWeight:500},[`& .${re.keyInfoTable}`]:{marginBottom:20,borderCollapse:"collapse","& td":{paddingBottom:5,borderBottom:"solid 1px #cccc"}},[`& .${re.leftCol}`]:{width:180},[`& .${re.stepLabel}`]:{color:"#5567d5",alignSelf:"center"},[`& .${re.stepContent}`]:{color:"#1D2028",fontSize:"0.75rem"},[`& .${re.keyLabel}`]:{color:"#222228",fontSize:"0.75rem",marginLeft:t.spacing(1)},[`& .${re.idpGrid}`]:{textAlign:"left",margin:t.spacing(0),alignSelf:"center"},[`& .${re.helperTextError}`]:{display:"flex",alignItems:"center",fontSize:10.5},[`& .${re.input}`]:{marginLeft:t.spacing(1),flex:1},[`& .${re.avatar}`]:{width:30,height:30,background:"transparent",border:`solid 1px ${t.palette.grey[300]}`},[`& .${re.copyIconStyle}`]:{cursor:"pointer",margin:"-10px 0",padding:"0 0 0 5px","& .material-icons":{fontSize:18,color:"#9c9c9c"}},[`& .${re.hr}`]:{border:"solid 1px #efefef"},[`& .${re.divCenter}`]:{alignSelf:"center",width:180},[`& .${re.tableHeader}`]:{borderBottom:"none"},[`& .${re.helperText}`]:{marginLeft:0,color:"#8D91A3",lineHeight:1.6,maxWidth:410},[`& .${re.dialogWrapper}`]:{"& label,& h5, & label, & td, & li, & input, & h2, & p.MuiTypography-root,& p.MuiFormHelperText-root":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${re.margin}`]:{marginRight:t.spacing(2)},[`& .${re.tokenSection}`]:{marginTop:0,marginBottom:t.spacing(.5)},[`& .${re.inputWrapper}`]:{display:"flex",flexDirection:"row",alignItems:"center","& span, & h5, & label, & td, & li, & div, & input":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${re.bottomInfo}`]:{fontSize:12,marginBottom:"10px"}}}));function ie(e,t){const{field:a,value:n}=t;switch(a){case"tokenResponse":case"token":case"tokenScopes":case"tokenValidityTime":case"accessTokenRequest":case"subscriptionScopes":case"externalIDPToken":case"externalIDPTokenError":case"isKeyJWT":case"initialExecution":return te(te({},e),{},{[a]:n});case"all":return n;default:return t}}const oe=e=>{const[t,a]=(0,n.useState)(!1),[r,s]=(0,n.useState)(!1),[i,d]=(0,n.useState)(!1),[y,g]=(0,n.useState)(!1),[h,T]=(0,n.useState)(!1),[C,v]=(0,n.useState)(!1),[K,x]=(0,n.useState)(!1),[P,O]=(0,n.useState)(!1),[R,$]=(0,n.useState)(!0),[N]=(0,n.useState)({tokenResponse:"",token:"",tokenScope:"",tokenValidityTime:"",accessTokenRequest:{timeout:3600,scopesSelected:[],keyType:""},subscriptionScopes:[],externalIDPToken:"",externalIDPTokenError:"",isKeyJWT:!1,initialExecution:!0}),[D,V]=(0,n.useReducer)(ie,N),{tokenResponse:j,accessTokenRequest:H,externalIDPToken:F,externalIDPTokenError:B,subscriptionScopes:ee,tokenValidityTime:ae,token:ne,isKeyJWT:oe,initialExecution:le}=D,ce=(0,S.A)(),{keyManagerConfig:pe,defaultTokenEndpoint:de,selectedApp:ue,selectedTab:me,selectedApp:{hashEnabled:ye},keys:ge,fullScreen:he,keyType:Ae}=e;let ke;ue&&(ke=ue.appId||ue.value);const Ee=I.A.get(ke);let fe;le&&Ee.then((e=>{e.getKeys().then((()=>{const t=te(te({},H),{},{keyType:Ae}),a=e.subscriptionScopes.map((e=>e.key));V({field:"accessTokenRequest",value:t}),V({field:"subscriptionScopes",value:a}),V({field:"initialExecution",value:!1})}))})).catch((e=>{const{status:t}=e;404===t&&x(!0),V({field:"initialExecution",value:!1})})),fe=h?"Get CURL to Generate Access Token":C?"Generate Consumer Secret":"Generate Access Token";const be=e=>""===e?n.createElement(p.A,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.token.empty.helperText",defaultMessage:"{selectedIdPType} token cannot be empty",values:{selectedIdPType:pe.type}}):"";if(K)return n.createElement(G.A,null);if(!ge)return n.createElement(u.A,null);const Te=()=>{d(!1),T(!1),v(!1),V({field:"isKeyJWT",value:!1})},Ce=ge.size>0&&ge.get("Resident Key Manager")&&ge.get("Resident Key Manager").keyType===Ae&&ge.get("Resident Key Manager")||!1,Se=Ce&&Ce.consumerKey,ve=Ce&&Ce.consumerSecret;return n.createElement(se,null,n.createElement(l.A,{display:"flex",alignItems:"center"},n.createElement(_.A,{className:re.table},n.createElement(X.A,null,n.createElement(Q.A,null,n.createElement(Z.A,{component:"th",scope:"row",className:[re.leftCol,re.tableHeader]},n.createElement(p.A,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.step1",defaultMessage:"Step 1:"})),n.createElement(Z.A,{className:re.tableHeader},n.createElement(p.A,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.step1.description",defaultMessage:"Obtain an access token from {selectedIdpType}. ",values:{selectedIdpType:pe.type}}),n.createElement(p.A,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.audience",defaultMessage:'Use the audience value "{allowedAudience}", ',values:{allowedAudience:n.createElement("b",null,pe.alias)}}))),n.createElement(Q.A,null,n.createElement(Z.A,{className:re.leftCol},n.createElement(p.A,{id:"application.productionKeys.oAuth.tokenEndpoint",defaultMessage:"Token Endpoint"})),n.createElement(Z.A,null,n.createElement(p.A,{id:"application.productionKeys.oAuth.tokenEndpoint.value",defaultMessage:"{tokenEndpoint}",values:{tokenEndpoint:pe.tokenEndpoint}}),n.createElement(W.A,{title:t?ce.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.TokenExchangeKeyConfiguration.copied"}):ce.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.TokenExchangeKeyConfiguration.copy.to.clipboard"}),placement:"right",className:re.iconStyle},n.createElement(U.A,{"aria-label":"Copy to clipboard",classes:{root:re.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(pe.tokenEndpoint).then((a(!0),void setTimeout((function(){a(!1)}),2e3)))}},n.createElement(q.A,{color:"secondary"},"file_copy"))))),n.createElement(Q.A,null,n.createElement(Z.A,{component:"th",scope:"row",className:[re.leftCol,re.tableHeader]},n.createElement(p.A,{id:"application.productionKeys.oAuth.tokenGeneration.step2",defaultMessage:"Step 2:"})),n.createElement(Z.A,{className:re.tableHeader},n.createElement(p.A,{id:"application.productionKeys.oAuth.tokenGeneration.step2.description",defaultMessage:"Obtain test token"}))),n.createElement(Q.A,null,n.createElement(Z.A,{component:"th",scope:"row",className:re.leftCol},n.createElement(p.A,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.token",defaultMessage:"{selectedIdpType} Token",values:{selectedIdpType:pe.type}}),n.createElement("span",{className:re.error}," *")),n.createElement(Z.A,null,n.createElement(l.A,{maxWidth:600},n.createElement(w.A,{id:"external-idp-token",onChange:e=>{const t=e.target.value;V({field:"externalIDPTokenError",value:be(t)}),V({field:"externalIDPToken",value:t})},size:"small",fullWidth:!0,rows:1,value:F,variant:"outlined",error:""!==B,FormHelperTextProps:{className:re.helperText},helperText:""===B?B:n.createElement("div",{className:re.helperTextError},n.createElement("p",null," ",B," ")),className:re.textField,"data-testid":"external-idp-token"}))))))),n.createElement(l.A,null,n.createElement("div",{className:re.inputWrapper},n.createElement(M.Ay,{container:!0,spacing:3},n.createElement(M.Ay,{item:!0,xs:12},n.createElement(k.A,{fullScreen:he,open:i,onClose:Te,"aria-labelledby":"responsive-dialog-title",className:re.dialogWrapper},n.createElement(b.A,{id:"responsive-dialog-title"},fe),n.createElement(f.A,null,!h&&!oe&&!C&&n.createElement(L.A,null,!y&&R&&n.createElement(Y.A,{updateAccessTokenRequest:e=>{V({field:"accessTokenRequest",value:e})},accessTokenRequest:H,subscriptionScopes:ee}),!y&&!R&&n.createElement(n.Fragment,null,n.createElement(c.A,null,n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewCurl.error",defaultMessage:"Please generate the Consumer Key and Secret for Residence Key Manager with selecting the urn:ietf:params:oauth:grant-type:token-exchange grant type in order to use the token Exchange Approach. "}))),y&&n.createElement(J.A,{token:te(te({},j),{},{isOauth:!0}),isResidenceTokenAvailable:R,isTokenExchange:!0})),h&&n.createElement(L.A,null,n.createElement(z,{keys:{consumerKey:Se,consumerSecret:ve},keyType:Ae,jwtToken:F,keyManagerConfig:pe,defaultTokenEndpoint:de}))),n.createElement(E.A,null,P&&n.createElement(m.A,{size:24}),!y&&!h&&!C&&R&&n.createElement(o.A,{onClick:()=>{O(!0),Ee.then((e=>e.generateToken(me,H.keyType,H.timeout,H.scopesSelected,!0,F))).then((e=>{console.log("token generated successfully "+e),g(!0),V({field:"tokenResponse",value:e}),V({field:"token",value:e.accessToken}),V({field:"tokenScopes",value:e.tokenScopes}),V({field:"tokenValidityTime",value:e.validityTime}),O(!1)})).catch((e=>{const{status:t}=e;404===t?x(!0):400===t&&A.A.error(e.description||ce.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.bad.request.error",defaultMessage:"Error occurred when generating Access Token"})),O(!1);const{response:a}=e;a&&a.body&&A.A.error(a.body.message)}))},color:"primary",disabled:P},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.generate.btn",defaultMessage:"Generate"})),n.createElement(o.A,{onClick:Te,color:"primary",autoFocus:!0},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"})))),n.createElement("div",{className:re.generateWrapper},n.createElement(M.Ay,{className:re.bottomInfo},n.createElement(p.A,{id:"application.productionKeys.oAuth.externalIdp.tokenGeneration.token.description",defaultMessage:"In Exchange token flow, A JWT token has to be generated from the {selectedIdpType}\n                                             idp and then exchange for a token with the Resident Key Manager which can used to invoke APIs",values:{selectedIdpType:pe.type}})),n.createElement(o.A,{variant:"outlined",size:"small",color:"primary",className:re.margin,onClick:()=>{d(!0)},disabled:B||""===F},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.generate.access.token",defaultMessage:"Generate Access Token"})),n.createElement(o.A,{id:"curl-to-generate-access-token-btn",variant:"outlined",size:"small",color:"primary",className:re.margin,onClick:()=>{d(!0),T(!0)},disabled:B||""===F},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.curl.to.generate",defaultMessage:"CURL to Generate Access Token"}))))))))};oe.defaultProps={notFound:!1,validating:!1,fullScreen:!1,summary:!1},oe.propTypes={classes:i().instanceOf(Object).isRequired,keyRequest:i().shape({callbackUrl:i().string,selectedGrantTypes:i().array}).isRequired,isUserOwner:i().bool.isRequired,isKeysAvailable:i().bool.isRequired,keyManagerConfig:i().any.isRequired,notFound:i().bool,setGenerateEnabled:i().func,updateKeyRequest:i().func.isRequired,validating:i().bool,defaultTokenEndpoint:i().string,selectedApp:i().shape({tokenType:i().string.isRequired,appId:i().string,value:i().string,owner:i().string,hashEnabled:i().bool})};const le=oe;var ce=a(41340),pe=a(1775),de=a(53215),ue=a(67193),me=a.n(ue),ye=a(71238),ge=a(30198),he=a.n(ge),Ae=a(43267),ke=a(82241),Ee=a(69554),fe=a(17681),be=a(72267),Te=a(53846),Ce=a(77623),Se=a(2840),ve=a(98564);function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ke.apply(null,arguments)}const Me="AppConfiguration",we={FormControl:`${Me}-FormControl`,FormControlOdd:`${Me}-FormControlOdd`,button:`${Me}-button`,quotaHelp:`${Me}-quotaHelp`,checkboxWrapper:`${Me}-checkboxWrapper`,checkboxWrapperColumn:`${Me}-checkboxWrapperColumn`,group:`${Me}-group`,removeHelperPadding:`${Me}-removeHelperPadding`},xe=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{display:"contents",[`& .${we.FormControl}`]:{paddingTop:t.spacing(2),paddingBottom:t.spacing(2),paddingLeft:0,width:"100%"},[`& .${we.FormControlOdd}`]:{padding:t.spacing(2),width:"100%"},[`& .${we.button}`]:{marginLeft:t.spacing(1)},[`& .${we.quotaHelp}`]:{position:"relative"},[`& .${we.checkboxWrapper}`]:{display:"flex"},[`& .${we.checkboxWrapperColumn}`]:{display:"flex",flexDirection:"row"},[`& .${we.group}`]:{flexDirection:"row"},[`& .${we.removeHelperPadding}`]:{"& p":{margin:"8px 0px"}}}})),Pe=e=>{const{config:t,isUserOwner:a,previousValue:r,handleChange:s,subscriptionScopes:i}=e,[o,p]=(0,n.useState)(r),[d,u]=(0,n.useState)(!1),m=(0,n.useContext)(x.Ay),y=e=>{const{target:t}=e;p(t.value),s("additionalProperties",e)},g=(0,be.YK)({application_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.application.access.token.expiry.time",defaultMessage:"Application Access Token Expiry Time"},user_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.user.access.token.expiry.time",defaultMessage:"User Access Token Expiry Time"},refresh_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.refresh.token.expiry.time",defaultMessage:"Refresh Token Expiry Time"},id_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.id.token.expiry.time",defaultMessage:"Id Token Expiry Time"},pkceMandatory:{id:"Shared.AppsAndKeys.AppConfiguration.pkce.mandatory",defaultMessage:"Enable PKCE"},pkceSupportPlain:{id:"Shared.AppsAndKeys.AppConfiguration.pkce.support.plain",defaultMessage:"Support PKCE Plain text"},bypassClientCredentials:{id:"Shared.AppsAndKeys.AppConfiguration.bypass.client.credentials",defaultMessage:"Public client"}}),h=(0,be.YK)({application_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.application.access.token.expiry.time.tooltip",defaultMessage:"Type Application Access Token Expiry Time"},user_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.user.access.token.expiry.time.tooltip",defaultMessage:"Type User Access Token Expiry Time"},refresh_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.refresh.token.expiry.time.tooltip",defaultMessage:"Type Refresh Token Expiry Time"},id_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.id.token.expiry.time.tooltip",defaultMessage:"Type ID Token Expiry Time"},pkceMandatory:{id:"Shared.AppsAndKeys.AppConfiguration.pkce.mandatory.tooltip",defaultMessage:"Enable PKCE"},pkceSupportPlain:{id:"Shared.AppsAndKeys.AppConfiguration.pkce.support.plain.tooltip",defaultMessage:"S256 is recommended, plain text too can be used."},bypassClientCredentials:{id:"Shared.AppsAndKeys.AppConfiguration.bypass.client.credentials.tooltip",defaultMessage:"Allow authentication without the client secret."}}),A=()=>g[t.name]?e.intl.formatMessage(g[t.name]):t.label,k=()=>h[t.name]?e.intl.formatMessage(h[t.name]):t.tooltip;return(0,n.useEffect)((()=>{p(r);const e=m.settings.orgWideAppUpdateEnabled;u(e)}),[r,m]),n.createElement(xe,null,n.createElement(Q.A,null,n.createElement(Z.A,{component:"th",scope:"row",className:we.leftCol},A()),n.createElement(Z.A,null,n.createElement(l.A,{maxWidth:600},"select"===t.type&&!1===t.multiple?n.createElement(w.A,{classes:{root:we.removeHelperPadding},fullWidth:!0,id:t.name,select:!0,label:A(),value:o,name:t.name,onChange:e=>y(e),helperText:n.createElement(c.A,{variant:"caption"},k()),margin:"dense",variant:"outlined",size:"small",disabled:!d&&!a},t.values.map((e=>n.createElement(fe.A,{key:e,value:e},e)))):"select"===t.type&&!0===t.multiple&&Array.isArray(o)?"application_scopes"===t.name?n.createElement(n.Fragment,null,n.createElement(ve.A,{multiple:!0,disabled:0===i.length,options:i,value:o,onChange:(e,a)=>{const n={target:{name:t.name,value:a}};y(n)},renderInput:e=>n.createElement(w.A,Ke({},e,{classes:{root:we.removeHelperPadding},fullWidth:!0,disabled:0===i.length,margin:"dense",size:"small",variant:"outlined",label:t.label,placeholder:"Select scopes",error:t.required&&hasMandatoryError(o),helperText:t.required&&hasMandatoryError(o)||k()})),renderTags:(e,t)=>e.map(((e,a)=>n.createElement(Ee.A,Ke({key:e,label:e},t({index:a}),{size:"small"}))))})):n.createElement(n.Fragment,null,n.createElement(K.A,{variant:"outlined",className:we.formControl,fullWidth:!0},n.createElement(Ae.A,{id:"multi-select-label"},t.label),n.createElement(Te.A,{variant:"standard",labelId:"multi-select-label",id:"multi-select-outlined",margin:"dense",displayEmpty:!0,name:t.name,multiple:!0,value:o,onChange:e=>y(e),input:n.createElement(Ce.A,{id:"multi-select-outlined"}),renderValue:e=>n.createElement("div",{className:we.chips},e.map((e=>n.createElement(Ee.A,{key:e,label:e,className:we.chip})))),helperText:n.createElement(c.A,{variant:"caption"},k()),label:A()},t.values.map((e=>n.createElement(fe.A,{key:e,value:e},n.createElement(ye.A,{checked:o.indexOf(e)>-1}),n.createElement(ke.A,{primary:e}))))),n.createElement(c.A,{variant:"caption"},k()))):"input"===t.type&&!0===t.multiple?n.createElement(n.Fragment,null,n.createElement(Se.A,{value:o,fullWidth:!0,variant:"outlined",id:"multi-input-outlined",label:t.label,onAdd:e=>{const a={target:{name:t.name,value:[...o,e]}};y(a)},chipRenderer:(e,a)=>{let{value:r}=e;return n.createElement(Ee.A,{key:a,size:"small",label:r,onDelete:()=>{const e={target:{name:t.name,value:o.filter((e=>e!==r))}};y(e)},style:{marginRight:"8px",float:"left"}})},style:{display:"flex"}}),n.createElement(c.A,{variant:"caption"},t.tooltip)):"input"===t.type?n.createElement(w.A,{classes:{root:we.removeHelperPadding},fullWidth:!0,id:t.name,label:A(),value:o,name:t.name,onChange:e=>y(e),helperText:n.createElement(c.A,{variant:"caption"},k()),margin:"dense",size:"small",variant:"outlined",disabled:!d&&!a}):"checkbox"===t.type?n.createElement(ye.A,{classes:{root:we.removeHelperPadding},fullWidth:!0,id:t.name,label:A(),checked:"string"==typeof o&&"true"===o||"string"!=typeof o&&!0===o,name:t.name,onChange:e=>y(e),helperText:n.createElement(c.A,{variant:"caption"},k()),margin:"dense",variant:"outlined",disabled:!d&&!a}):n.createElement(w.A,{classes:{root:we.removeHelperPadding},fullWidth:!0,id:t.name,label:A(),value:o,name:t.name,onChange:e=>y(e),helperText:n.createElement(c.A,{variant:"caption"},k()),margin:"dense",variant:"outlined",disabled:!d&&!a})))))};Pe.contextType=x.Ay,Pe.defaultProps={notFound:!1,subscriptionScopes:[]},Pe.propTypes={classes:i().instanceOf(Object).isRequired,previousValue:i().any.isRequired,isUserOwner:i().bool.isRequired,handleChange:i().func.isRequired,config:i().any.isRequired,subscriptionScopes:i().arrayOf(i().string),notFound:i().bool,intl:i().shape({formatMessage:i().func}).isRequired};const Oe=(0,d.Ay)(Pe),Ie="KeyConfiguration",Re={FormControl:`${Ie}-FormControl`,FormControlOdd:`${Ie}-FormControlOdd`,button:`${Ie}-button`,quotaHelp:`${Ie}-quotaHelp`,checkboxWrapper:`${Ie}-checkboxWrapper`,checkboxWrapperColumn:`${Ie}-checkboxWrapperColumn`,group:`${Ie}-group`,removeHelperPadding:`${Ie}-removeHelperPadding`,iconStyle:`${Ie}-iconStyle`,iconButton:`${Ie}-iconButton`,titleColumn:`${Ie}-titleColumn`,keyInfoTable:`${Ie}-keyInfoTable`,leftCol:`${Ie}-leftCol`},$e=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${Re.FormControl}`]:{paddingTop:0,paddingBottom:t.spacing(2),paddingLeft:0,width:"100%"},[`& .${Re.FormControlOdd}`]:{padding:t.spacing(2),width:"100%"},[`& .${Re.button}`]:{marginLeft:t.spacing(1)},[`& .${Re.quotaHelp}`]:{position:"relative"},[`& .${Re.checkboxWrapper}`]:{display:"flex"},[`& .${Re.checkboxWrapperColumn}`]:{display:"flex",flexWrap:"wrap",flexDirection:"row",whiteSpace:"nowrap"},[`& .${Re.group}`]:{flexDirection:"row"},[`& .${Re.removeHelperPadding}`]:{"& p":{margin:"8px 0px"}},[`& .${Re.iconStyle}`]:{cursor:"pointer",padding:"0 0 0 10px"},[`& .${Re.iconButton}`]:{padding:"0 0 0 10px","& .material-icons":{fontSize:16}},[`& .${Re.titleColumn}`]:{width:150,fontWeight:500},[`& .${Re.keyInfoTable}`]:{marginBottom:20,borderCollapse:"collapse","& td":{paddingBottom:5,borderBottom:"solid 1px #cccc"}},[`& .${Re.leftCol}`]:{width:180}}})),Ne=e=>{const[t,a]=(0,n.useState)(!1),[r,s]=(0,n.useState)(!1),i=(0,S.A)(),{notFound:o,isUserOwner:c,keyManagerConfig:d,updateKeyRequest:u,keyRequest:m,updateHasError:y,callbackError:g,mode:h,selectedApp:A}=e,{selectedGrantTypes:k,callbackUrl:E}=m,{applicationConfiguration:f,availableGrantTypes:b,description:T,additionalProperties:C,enableMapOAuthConsumerApps:K,enableOAuthAppCreation:M,enableTokenEncryption:P,enableTokenGeneration:O,id:R,name:$,revokeEndpoint:N,tokenEndpoint:D,type:L,userInfoEndpoint:V}=d,[j,H]=(0,n.useState)(!1),F=(0,n.useContext)(x.Ay),[B,z]=(0,n.useState)([]);(0,n.useEffect)((()=>{if(A){const e=A.appId||A.value;I.A.get(e).then((e=>{const t=e.subscriptionScopes.map((e=>e.key));z(t)})).catch((e=>{}))}}),[A]),(0,n.useEffect)((()=>{const e=F.settings.orgWideAppUpdateEnabled;H(e)}),[F]);const J=(e,t)=>{const a=me()(m),{target:n}=t;let r=[...a.selectedGrantTypes];switch(a.keyManager=$,e){case"callbackUrl":(r.includes("implicit")||r.includes("authorization_code"))&&(""===n.value?(y(!0),s(i.formatMessage({defaultMessage:"Call back URL can not be empty when Implicit or Authorization Code grants are selected.",id:"Shared.AppsAndKeys.KeyConfCiguration.Invalid.callback.empty.error.text"}))):(s(!1),y(!1))),a.callbackUrl=n.value;break;case"grantType":n.checked?r=[...r,n.id]:(r=a.selectedGrantTypes.filter((e=>e!==n.id)),"implicit"!==n.id&&"authorization_code"!==n.id||(a.callbackUrl="",s(!1),y(!1))),a.selectedGrantTypes=r;break;case"additionalProperties":const e=a.additionalProperties;"checkbox"===n.type?e[n.name]=n.checked+"":e[n.name]=n.value,a.additionalProperties=e}u(a)},Y=()=>{a(!0),setTimeout((function(){a(!1)}),2e3)},ee=e=>{const{additionalProperties:t}=m;let a;a="input"!=e.type||e.multiple?!(!t||!t[e.name]):!(!t||!t[e.name]&&""!==t[e.name]);let n=e.default;return e.multiple&&"string"==typeof n&&""===n&&(n=[]),a?t[e.name]:n};if(o)return n.createElement(G.A,null);const te=((e,t)=>{const a={};return e.forEach((e=>{a[e]=t[e],t[e]||(a[e]=e)})),a})(b,he().grantTypes);return n.createElement($e,null,n.createElement(l.A,{display:"flex",alignItems:"center"},n.createElement(_.A,{className:Re.table},n.createElement(X.A,null,D&&""!==D&&n.createElement(Q.A,null,n.createElement(Z.A,{component:"th",scope:"row",className:Re.leftCol},n.createElement(p.A,{defaultMessage:"Token Endpoint",id:"Shared.AppsAndKeys.KeyConfiguration.token.endpoint.label"})),n.createElement(Z.A,null,D,n.createElement(W.A,{title:t?i.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.KeyConfiguration.copied"}):i.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.KeyConfiguration.copy.to.clipboard"}),placement:"right",className:Re.iconStyle},n.createElement(U.A,{"aria-label":"Copy to clipboard",classes:{root:Re.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(D).then(Y())}},n.createElement(q.A,{color:"secondary"},"file_copy"))))),N&&""!==N&&n.createElement(Q.A,null,n.createElement(Z.A,{component:"th",scope:"row",className:Re.leftCol},n.createElement(p.A,{defaultMessage:"Revoke Endpoint",id:"Shared.AppsAndKeys.KeyConfiguration.revoke.endpoint.label"})),n.createElement(Z.A,null,N,n.createElement(W.A,{title:t?i.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.KeyConfiguration.copied"}):i.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.KeyConfiguration.copy.to.clipboard"}),placement:"right",className:Re.iconStyle},n.createElement(U.A,{"aria-label":"Copy to clipboard",classes:{root:Re.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(N).then(Y())}},n.createElement(q.A,{color:"secondary"},"file_copy"))))),V&&""!==V&&n.createElement(Q.A,null,n.createElement(Z.A,{component:"th",scope:"row",className:Re.leftCol},n.createElement(p.A,{defaultMessage:"User Info Endpoint",id:"Shared.AppsAndKeys.KeyConfiguration.userinfo.endpoint.label"})),n.createElement(Z.A,null,V,n.createElement(W.A,{title:t?i.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.KeyConfiguration.copied"}):i.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.KeyConfiguration.copy.to.clipboard"}),placement:"right",className:Re.iconStyle},n.createElement(U.A,{"aria-label":"Copy to clipboard",classes:{root:Re.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(V).then(Y())}},n.createElement(q.A,{color:"secondary"},"file_copy"))))),"MAPPED"!==h&&n.createElement(n.Fragment,null,n.createElement(Q.A,null,n.createElement(Z.A,{component:"th",scope:"row",className:Re.leftCol},n.createElement(p.A,{id:"Shared.AppsAndKeys.KeyConfiguration.grant.types",defaultMessage:"Grant Types"})),n.createElement(Z.A,null,n.createElement("div",{className:Re.checkboxWrapperColumn,id:"grant-types"},Object.keys(te).map((e=>{const t=te[e];return n.createElement(pe.A,{control:n.createElement(ye.A,{id:e,checked:!(!k||!k.includes(e)),onChange:e=>J("grantType",e),value:t,disabled:!j&&!c,color:"grey","data-testid":e}),label:t,key:e})}))),n.createElement(v.A,null,n.createElement(p.A,{defaultMessage:"The application can use the following grant types to generate \n                            Access Tokens. Based on the application requirement,you can enable or disable \n                            grant types for this application.",id:"Shared.AppsAndKeys.KeyConfiguration.the.application.can"})))),n.createElement(Q.A,null,n.createElement(Z.A,{component:"th",scope:"row",className:Re.leftCol},n.createElement(p.A,{defaultMessage:"Callback URL",id:"Shared.AppsAndKeys.KeyConfiguration.callback.url.label"})),n.createElement(Z.A,null,n.createElement(l.A,{maxWidth:600},n.createElement(w.A,{margin:"dense",id:"callbackURL",size:"small",label:n.createElement(p.A,{defaultMessage:"Callback URL",id:"Shared.AppsAndKeys.KeyConfiguration.callback.url.label"}),value:E,name:"callbackURL",onChange:e=>J("callbackUrl",e),helperText:r||n.createElement(p.A,{defaultMessage:"Callback URL is a redirection URI in the client\n                            application which is used by the authorization server to send the\n                            client's user-agent (usually web browser) back after granting access.",id:"Shared.AppsAndKeys.KeyConfCiguration.callback.url.helper.text"}),variant:"outlined",disabled:!j&&!c||k&&!k.includes("authorization_code")&&!k.includes("implicit"),error:g,placeholder:i.formatMessage({defaultMessage:"http://url-to-webapp",id:"Shared.AppsAndKeys.KeyConfiguration.url.to.webapp"}),fullWidth:!0})))),f.length>0&&f.map((e=>n.createElement(Oe,{config:e,previousValue:ee(e),isUserOwner:c,handleChange:J,subscriptionScopes:B}))))))))};Ne.defaultProps={notFound:!1,validating:!1,mode:null},Ne.propTypes={classes:i().instanceOf(Object).isRequired,keyRequest:i().shape({callbackUrl:i().string,selectedGrantTypes:i().array}).isRequired,isUserOwner:i().bool.isRequired,isKeysAvailable:i().bool.isRequired,keyManagerConfig:i().any.isRequired,notFound:i().bool,setGenerateEnabled:i().func.isRequired,updateKeyRequest:i().func.isRequired,validating:i().bool,mode:i().string,selectedApp:i().shape({tokenType:i().string.isRequired,appId:i().string,value:i().string,owner:i().string,hashEnabled:i().bool})};const De=Ne;var _e=a(56347),We=a(25239),Ue=a(31505);function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(a),!0).forEach((function(t){Le(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Le(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ve="ViewKeys",je={button:`${Ve}-button`,inputWrapper:`${Ve}-inputWrapper`,copyWrapper:`${Ve}-copyWrapper`,tokenSection:`${Ve}-tokenSection`,margin:`${Ve}-margin`,dialogWrapper:`${Ve}-dialogWrapper`,iconButton:`${Ve}-iconButton`},He=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${je.inputWrapper}`]:{display:"flex",flexDirection:"row",alignItems:"center","& span, & h5, & label, & td, & li, & div, & input":{color:t.palette.getContrastText(t.palette.background.paper)}},[`&.${je.copyWrapper}`]:{display:"flex",flexDirection:"row",alignItems:"center"},[`& .${je.tokenSection}`]:{marginTop:0,marginBottom:t.spacing(.5)},[`& .${je.margin}`]:{marginRight:t.spacing(2)},[`& .${je.dialogWrapper}`]:{"& label,& h5, & label, & td, & li, & input, & h2, & p.MuiTypography-root,& p.MuiFormHelperText-root":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${je.iconButton}`]:{padding:"0 0 0 10px","& .material-icons":{fontSize:16}}}}));class Fe extends n.Component{constructor(e){super(e),Le(this,"isOrgWideAppUpdateEnabled",(()=>{const e=this.context.settings.orgWideAppUpdateEnabled;this.setState({isOrgWideAppUpdateEnabled:e})})),Le(this,"getGeneratedKeys",(()=>{const{accessTokenRequest:e}=this.state,{keyType:t}=this.props;this.applicationPromise.then((a=>{a.getKeys().then((()=>{const n=Ge(Ge({},e),{},{keyType:t}),r=a.subscriptionScopes.map((e=>e.key));this.setState({accessTokenRequest:n,subscriptionScopes:r})}))})).catch((e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})}))})),Le(this,"updateAccessTokenRequest",(e=>{this.setState({accessTokenRequest:e})})),Le(this,"onCopy",(e=>{this.setState({[e]:!0});const t=this,a=e;setTimeout((()=>{t.setState({[a]:!1})}),4e3)})),Le(this,"handleShowHidden",(e=>{this.setState({[e]:!this.state[e]})})),Le(this,"handleMouseDownGeneric",(e=>{e.preventDefault()})),Le(this,"handleClickOpen",(()=>{this.setState({open:!0,showToken:!1})})),Le(this,"handleClickRemove",(e=>{const{selectedTab:t,keyType:a,intl:n,loadApplication:r}=this.props;this.applicationPromise.then((n=>n.removeKeys(a,t,e))).then((e=>{e&&(r(),A.A.info(n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanupall.success",defaultMessage:"Application keys removed successfully"})))})).catch((e=>{throw e}))})),Le(this,"handleSecretRegenerate",((e,t,a,n)=>{this.applicationPromise.then((r=>r.regenerateSecret(e,t,a,n))).then((e=>{console.log("consumer secret regenerated successfully "+e),this.setState({open:!0,showSecretGen:!0,secretGenResponse:e})})).catch((e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})}))})),Le(this,"handleClickOpenCurl",(()=>{this.setState({open:!0,showCurl:!0})})),Le(this,"handleClose",(()=>{this.setState({open:!1,showCurl:!1,isKeyJWT:!1,showSecretGen:!1})})),Le(this,"generateAccessToken",(()=>{const{accessTokenRequest:e,isUpdating:t}=this.state,{selectedTab:a,intl:n}=this.props;this.setState({isUpdating:!0}),this.applicationPromise.then((t=>t.generateToken(a,e.keyType,e.timeout,e.scopesSelected))).then((e=>{console.log("token generated successfully "+e),this.setState({showToken:!0,tokenResponse:e,token:e.accessToken,tokenScopes:e.tokenScopes,tokenValidityTime:e.validityTime}),this.setState({isUpdating:!1})})).catch((e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):900905===e.response.body.code?A.A.error(e.response.body.description):400===t&&A.A.error(e.description||n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.bad.request.error",defaultMessage:"Error occurred when generating Access Token"})),this.setState({isUpdating:!1});const{response:a}=e;a&&a.body&&900905!==a.body.code&&A.A.error(a.body.message)}))})),Le(this,"viewKeyAndSecret",((e,t,a,r,s,i)=>{const{intl:l,selectedApp:{hashEnabled:c},keyType:d}=this.props,{keyCopied:u,secretCopied:m,showCS:y}=this.state;return n.createElement(n.Fragment,null,n.createElement(M.Ay,{item:!0,xs:6},n.createElement(He,{className:je.copyWrapper},n.createElement(w.A,{id:"consumer-key",value:e,margin:"dense",size:"small",label:n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.key",defaultMessage:"Consumer Key"}),fullWidth:!0,variant:"outlined",InputProps:{readOnly:!0,endAdornment:n.createElement(We.A,{position:"end"},n.createElement(W.A,{title:u?l.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewKeys.copied"}):l.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewKeys.copy.to"}),placement:"right"},n.createElement(U.A,{"aria-label":"Copy to clipboard",classes:{root:je.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(e).then((()=>this.onCopy("keyCopied")))}},n.createElement(q.A,{color:"secondary"},"file_copy"))))}})),n.createElement(K.A,{variant:"standard"},n.createElement(v.A,{id:"consumer-key-helper-text"},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.key.title",defaultMessage:"Consumer Key of the application"})))),n.createElement(M.Ay,{item:!0,xs:6},n.createElement(He,{className:je.copyWrapper},c?n.createElement(o.A,{variant:"contained",color:"primary",sx:{mt:1},onClick:()=>this.handleSecretRegenerate(e,d,a,r),disabled:!i&&!s},n.createElement(p.A,{defaultMessage:"Regenerate Consumer Secret",id:"Shared.AppsAndKeys.ViewKeys.consumer.secret.button.regenerate"})):n.createElement(w.A,{id:"consumer-secret",label:n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.secret",defaultMessage:"Consumer Secret"}),type:y||!t?"text":"password",value:t,margin:"dense",fullWidth:!0,variant:"outlined",size:"small",InputProps:{readOnly:!0,endAdornment:n.createElement(We.A,{position:"end"},n.createElement(U.A,{classes:{root:je.iconButton},onClick:()=>this.handleShowHidden("showCS"),onMouseDown:this.handleMouseDownGeneric,id:"visibility-toggle-btn",size:"large"},y?n.createElement(q.A,null,"visibility_off"):n.createElement(q.A,null,"visibility")),n.createElement(W.A,{title:m?l.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewKeys.copied"}):l.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewKeys.copy.to.clipboard"}),placement:"right"},n.createElement(U.A,{"aria-label":"Copy to clipboard",classes:{root:je.iconButton},size:"large",onClick:()=>{navigator.clipboard.writeText(t).then((()=>this.onCopy("secretCopied")))}},n.createElement(q.A,{color:"secondary"},"file_copy"))))}})),!c&&n.createElement(K.A,{variant:"standard"},n.createElement(v.A,{id:"consumer-secret-helper-text"},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.secret.of.application",defaultMessage:"Consumer Secret of the application"})))))}));const{selectedApp:t}=this.props;let a;t&&(a=t.appId||t.value),this.applicationPromise=I.A.get(a),this.state={showCS:!1,open:!1,showToken:!1,showCurl:!1,showSecretGen:!1,accessTokenRequest:{timeout:3600,scopesSelected:[],keyType:""},subscriptionScopes:[],isUpdating:!1,isOrgWideAppUpdateEnabled:!1}}componentDidMount(){this.getGeneratedKeys(),this.isOrgWideAppUpdateEnabled()}componentDidUpdate(e){const{isKeyJWT:t}=this.props;t&&!e.isKeyJWT&&this.setState({isKeyJWT:!0})}componentDidUpdate(e){const{isKeyJWT:t}=this.props;t&&!e.isKeyJWT&&this.setState({isKeyJWT:!0})}render(){const{notFound:e,showToken:t,showCurl:a,showSecretGen:r,tokenCopied:s,open:i,token:l,tokenScopes:d,tokenValidityTime:y,accessTokenRequest:g,subscriptionScopes:h,isKeyJWT:A,tokenResponse:T,secretGenResponse:C,isUpdating:S,isOrgWideAppUpdateEnabled:v}=this.state,{intl:K,keyType:w,fullScreen:x,keys:P,selectedApp:{tokenType:O},selectedGrantTypes:I,isUserOwner:R,summary:$,selectedTab:N,hashEnabled:D,keyManagerConfig:_,initialToken:W,initialValidityTime:U,initialScopes:q,mode:V}=this.props;if(e)return n.createElement(G.A,null);if(!P)return n.createElement(u.A,null);const j=P.size>0&&P.get(N)&&P.get(N).keyType===w&&P.get(N),H=j&&j.consumerKey,F=j&&j.consumerSecret,B=j&&j.keyMappingId;let X,Q,Z,ee,te;if(l?(X=l,Q=d,Z=y):P.get(N)&&P.get(N).keyType===w&&P.get(N).token&&(({accessToken:X}=P.get(N).token),Q=P.get(N).token.tokenScopes,Z=P.get(N).token.validityTime,ee=P.get(N).token,ee&&!ee.accessToken&&(ee.accessToken=W,ee.validityTime=U,ee.tokenScopes=q)),te=a?"Get CURL to Generate Access Token":r?"Generate Consumer Secret":"Generate Access Token",!H)return n.createElement(c.A,{variant:"caption",gutterBottom:!0},"PRODUCTION"===w?"Production ":"Sandbox ",n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.key.secret.title",defaultMessage:"Key and Secret is not generated for this application"}));if($)return n.createElement(M.Ay,{container:!0,spacing:3},this.viewKeyAndSecret(H,F,B,N,R,v));const{supportedGrantTypes:ae}=P.get(N);return H&&n.createElement(He,{className:je.inputWrapper},n.createElement(M.Ay,{container:!0,spacing:3},this.viewKeyAndSecret(H,F,B,N,R,v),n.createElement(M.Ay,{item:!0,xs:12},n.createElement(k.A,{fullScreen:x,open:i||A&&ee,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",className:je.dialogWrapper},n.createElement(b.A,{id:"responsive-dialog-title"},te),n.createElement(f.A,null,!a&&!A&&!r&&n.createElement(L.A,null,!t&&n.createElement(Y.A,{updateAccessTokenRequest:this.updateAccessTokenRequest,accessTokenRequest:g,subscriptionScopes:h}),t&&n.createElement(J.A,{token:Ge(Ge({},T),{},{isOauth:!0})})),a&&n.createElement(L.A,null,n.createElement(z,{keys:{consumerKey:H,consumerSecret:F},keyType:w,keyManagerConfig:_})),r&&n.createElement(L.A,null,n.createElement(Ue.A,{secret:Ge({},C)})),A&&ee&&D&&n.createElement(L.A,null,n.createElement(J.A,{token:Ge(Ge({},ee),{},{isOauth:!0}),consumerSecret:F})),A&&ee&&!D&&n.createElement(L.A,null,n.createElement(J.A,{token:Ge(Ge({},ee),{},{isOauth:!0})}))),n.createElement(E.A,null,S&&n.createElement(m.A,{size:24}),!t&&!a&&!A&&!r&&n.createElement(o.A,{onClick:this.generateAccessToken,color:"primary",id:"generate-access-token-generate-btn",disabled:S},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.generate.btn",defaultMessage:"Generate"})),n.createElement(o.A,{onClick:this.handleClose,id:"generate-access-token-close-btn",color:"primary",autoFocus:!0},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"})))),!D&&n.createElement("div",{className:je.tokenSection},_.enableTokenGeneration&&ae&&ae.find((e=>e.includes("client_credentials")))&&("MAPPED"!==V||!0===ge.enableTokenGenForMappedApps)&&n.createElement(o.A,{id:"generate-access-token-oauth2",variant:"outlined",size:"small",color:"grey",className:je.margin,onClick:this.handleClickOpen,disabled:!ae.includes("client_credentials")},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.generate.access.token",defaultMessage:"Generate Access Token"})),n.createElement(o.A,{id:"curl-to-generate-access-token-btn",variant:"outlined",size:"small",color:"grey",className:je.margin,onClick:this.handleClickOpenCurl},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.curl.to.generate",defaultMessage:"CURL to Generate Access Token"}))),ae&&!ae.includes("client_credentials")&&!D&&n.createElement(c.A,{variant:"caption",gutterBottom:!0},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.client.enable.client.credentials",defaultMessage:"Enable Client Credentials grant type to generate test access tokens"})))))}}Fe.contextType=x.Ay,Fe.defaultProps={fullScreen:!1,summary:!1,mode:null},Fe.propTypes={classes:i().shape({}).isRequired,fullScreen:i().bool,isKeyJWT:i().bool.isRequired,isUserOwner:i().bool.isRequired,summary:i().bool,mode:i().string};const Be=(0,d.Ay)((0,_e.y)(Fe)),ze="WaitingForApproval-root",Je=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{[`&.${ze}`]:{padding:t.spacing(3)}}})),Ye=(0,d.Ay)((e=>{const{keyState:t,states:a,intl:r}=e;let s=r.formatMessage({defaultMessage:"A request to register this application has been sent and is pending approval.",id:"Shared.AppsAndKeys.WaitingForApproval.msg.ok"});return t===a.REJECTED&&(s=r.formatMessage({defaultMessage:"This application has been rejected from generating keys",id:"Shared.AppsAndKeys.WaitingForApproval.msg.reject"})),n.createElement(Je,{className:ze},s)}));function Xe(e){const{keys:t,keyStates:a,key:r,selectedApp:s,keyType:i,isKeyJWT:o,isUserOwner:l,selectedTab:d}=e;if(t.size>0&&r&&"APPROVED"===r.keyState&&!r.consumerKey)return n.createElement("div",{className:{background:"#ffffff55",color:theme.palette.getContrastText(theme.palette.background.paper),border:"solid 1px #fff",padding:theme.spacing(2),width:"100%"}},n.createElement(c.A,{variant:"h5",component:"h3"},"Error"),n.createElement(c.A,{variant:"body2"},n.createElement(p.A,{id:"Shared.AppsAndKeys.TokenManagerSummary",defaultMessage:"Error! You have partially-created keys. Use `Clean Up` option."})));if(r&&(r.keyState===a.CREATED||r.keyState===a.REJECTED))return n.createElement("div",{className:{background:"#ffffff55",color:theme.palette.getContrastText(theme.palette.background.paper),border:"solid 1px #fff",padding:theme.spacing(2),width:"100%"}},n.createElement(c.A,{variant:"body2"},n.createElement(Ye,{keyState:r.keyState,states:a})));const u=r?r.supportedGrantTypes:[];return n.createElement(Be,{selectedApp:s,selectedTab:d,keyType:i,keys:t,isKeyJWT:o,selectedGrantTypes:u,isUserOwner:l,summary:!0})}var Qe=a(85877),Ze=a(67034);const et=function(e){const[t,a]=n.useState(!1),{keyMappingId:r,handleClickRemove:s}=e,i=()=>{a(!1)};return n.createElement("div",null,n.createElement(o.A,{id:"remove-generated-keys",variant:"outlined",color:"secondary",startIcon:n.createElement(Ze.default,null),onClick:()=>{a(!0)}},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.remove.keys",defaultMessage:"Remove Keys"})),n.createElement(k.A,{open:t,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.createElement(b.A,{id:"alert-dialog-title"},n.createElement(p.A,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.title",defaultMessage:"Do you really want to remove keys?"})),n.createElement(f.A,null,n.createElement(L.A,{id:"alert-dialog-description"},n.createElement(p.A,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.content",defaultMessage:"This will remove the key entries stored in devportal, gateway as well as in the service provider."}))),n.createElement(E.A,null,n.createElement(o.A,{onClick:i,color:"primary"},n.createElement(p.A,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.Cancel",defaultMessage:"Cancel"})),n.createElement(o.A,{onClick:()=>{s(r)},color:"primary",autoFocus:!0},n.createElement(p.A,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.Delete",defaultMessage:"Delete"})))))},tt=function(e){const[t,a]=n.useState(!1),{keyMappingId:r,handleClickRemove:s}=e,i=()=>{a(!1)};return n.createElement("div",null,n.createElement(o.A,{id:"remove-generated-keys",variant:"outlined",color:"secondary",startIcon:n.createElement(Ze.default,null),onClick:()=>{a(!0)}},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.remove.keys",defaultMessage:"Remove Keys"})),n.createElement(k.A,{open:t,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.createElement(b.A,{id:"alert-dialog-title"},n.createElement(p.A,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.title",defaultMessage:"Do you really want to remove keys?"})),n.createElement(f.A,null,n.createElement(L.A,{id:"alert-dialog-description"},n.createElement(p.A,{id:"Applications.Listing.DeleteConfirmation.clean.keys.dialog.content",defaultMessage:"This will remove only the key entries stored in devportal, gateway and will not remove the service proveder keys."}))),n.createElement(E.A,null,n.createElement(o.A,{onClick:i,color:"primary"},n.createElement(p.A,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.Cancel",defaultMessage:"Cancel"})),n.createElement(o.A,{onClick:()=>{s(r)},color:"primary",autoFocus:!0},n.createElement(p.A,{id:"Applications.Listing.DeleteConfirmation.remove.keys.dialog.Delete",defaultMessage:"Delete"})))))},at=["children","value","index"];function nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(a),!0).forEach((function(t){st(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function st(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},it.apply(null,arguments)}const ot="TokenManager",lt={root:`${ot}-root`,button:`${ot}-button`,cleanUpButton:`${ot}-cleanUpButton`,cleanUpInfoText:`${ot}-cleanUpInfoText`,tokenSection:`${ot}-tokenSection`,margin:`${ot}-margin`,keyConfigWrapper:`${ot}-keyConfigWrapper`,generateWrapper:`${ot}-generateWrapper`,paper:`${ot}-paper`,muiFormGroupRoot:`${ot}-muiFormGroupRoot`,formControl:`${ot}-formControl`,subTitle:`${ot}-subTitle`,tabPanel:`${ot}-tabPanel`,warningIcon:`${ot}-warningIcon`,leftCol:`${ot}-leftCol`},ct=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${lt.root}`]:{padding:t.spacing(3),"& span, & h6, & label, & input":{color:t.palette.getContrastText(t.palette.background.paper)},"& .Mui-disabled span":{color:t.palette.grey[500]},"& input:disabled":{backgroundColor:t.palette.grey[100],color:t.palette.grey[500]},position:"relative"},[`& .${lt.button}`]:{marginLeft:0,"& span":{color:t.palette.getContrastText(t.palette.primary.main)},marginRight:t.spacing(2)},[`& .${lt.cleanUpButton}`]:{marginLeft:15},[`& .${lt.cleanUpInfoText}`]:{padding:"10px 0px 10px 15px"},[`& .${lt.tokenSection}`]:{marginTop:t.spacing(2),marginBottom:t.spacing(2)},[`& .${lt.margin}`]:{marginRight:t.spacing(2)},[`& .${lt.keyConfigWrapper}`]:{flexDirection:"column",marginBottom:0},[`& .${lt.generateWrapper}`]:{padding:"10px 0px",marginLeft:t.spacing(1.25)},[`& .${lt.paper}`]:{background:"none",marginBottom:t.spacing(2),marginTop:t.spacing(2)},[`& .${lt.muiFormGroupRoot}`]:{flexDirection:"row"},[`& .${lt.formControl}`]:{},[`& .${lt.subTitle}`]:{fontWeight:400},[`& .${lt.tabPanel}`]:{paddingLeft:t.spacing(2),"& .MuiBox-root":{padding:0}},[`& .${lt.warningIcon}`]:{color:"#ff9a00",fontSize:20,marginRight:10},[`& .${lt.leftCol}`]:{width:180}}}));function pt(e){const{children:t,value:a,index:r}=e,s=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;a[n]=e[n]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,at);return n.createElement("div",it({role:"tabpanel",hidden:a!==r,id:`nav-tabpanel-${r}`,"aria-labelledby":`nav-tab-${r}`},s),a===r&&n.createElement(l.A,{p:3},t))}pt.propTypes={children:i().node,index:i().any.isRequired,value:i().any.isRequired};class dt extends n.Component{constructor(e){super(e),st(this,"isOrgWideAppUpdateEnabled",(()=>{const e=this.context.settings.orgWideAppUpdateEnabled;this.setState({isOrgWideAppUpdateEnabled:e})})),st(this,"handleClickRemove",(e=>{const{selectedTab:t,keyType:a,intl:n}=this.props;this.application.then((n=>n.removeKeys(a,t,e))).then((e=>{e&&(this.loadApplication(),A.A.info(n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanupall.success",defaultMessage:"Application keys removed successfully"})))})).catch((e=>{throw e}))})),st(this,"handleTabChange",((e,t)=>{const{keys:a,keyManagers:n,keyRequest:r}=this.state,{keyType:s}=this.props,i=n.find((e=>e.name===t)),{availableGrantTypes:o}=i,l=[];if(o.find((e=>"password"===e))&&l.push("password"),o.find((e=>"client_credentials"===e))&&l.push("client_credentials"),a.size>0&&a.get(t)&&a.get(t).keyType===s){const{callbackUrl:e,supportedGrantTypes:n,additionalProperties:s,mode:o}=a.get(t),c=rt(rt({},r),{},{callbackUrl:e,selectedGrantTypes:n||l,additionalProperties:s||this.getDefaultAdditionalProperties(i)});this.setState({keyRequest:c,selectedTab:t,mode:o,importDisabled:"MAPPED"===o||"CREATED"===o})}else this.setState({keyRequest:rt(rt({},r),{},{selectedGrantTypes:l,additionalProperties:this.getDefaultAdditionalProperties(i)}),selectedTab:t,mode:null,importDisabled:!1})})),st(this,"loadApplication",(()=>{const{keyType:e,intl:t}=this.props;if(this.appId){const a=(new D.A).getKeyManagers(),n=this.application.then((t=>t.getKeys(e)));Promise.all([a,n]).then((t=>{const a=[];if(t[0].body.list.map((e=>{e.enabled&&a.push(e)})),0===a.length)return void this.setState({keyManagers:[]});let{selectedTab:n}=this.state;!n&&a.length>0&&(n=a.find((e=>"Resident Key Manager"===e.name))?"Resident Key Manager":a[0].name);const r=a.find((e=>e.name===n)),s=t[1],{keyRequest:i}=this.state;if(s.size>0&&s.get(n)&&s.get(n).keyType===e){const{callbackUrl:e,supportedGrantTypes:t,additionalProperties:o,mode:l}=s.get(n),c=rt(rt({},i),{},{callbackUrl:e||"",selectedGrantTypes:t||[],additionalProperties:o||this.getDefaultAdditionalProperties(r)});this.setState({keys:s,keyRequest:c,keyManagers:a,selectedTab:n,importDisabled:"MAPPED"===l||"CREATED"===l,mode:l})}else{const e=[];r.availableGrantTypes.find((e=>"password"===e))&&e.push("password"),r.availableGrantTypes.find((e=>"client_credentials"===e))&&e.push("client_credentials"),this.setState({keys:s,keyRequest:rt(rt({},i),{},{selectedGrantTypes:e,additionalProperties:this.getDefaultAdditionalProperties(r)}),keyManagers:a,selectedTab:n})}})).catch((e=>{console.error(e),404===e.status?this.setState({notFound:!0}):A.A.error(e.description||t.formatMessage({id:"Shared.AppsAndKeys.TokenManager.get.keys.request.error",defaultMessage:"Error while retrieving the keys"}))}))}})),st(this,"setValidating",(e=>{this.setState({validating:e})})),st(this,"updateHasError",(e=>{this.setState({hasError:e})})),st(this,"toTitleCase",(e=>e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())))),st(this,"handleChange",(e=>{this.setState({tokenType:e.target.defaultValue})})),st(this,"handleClose",(()=>{this.setState({tokenType:"DIRECT"})}));const{selectedApp:t,keyType:a}=this.props;this.state={isLoading:!1,keys:null,isKeyJWT:!1,hasError:!1,initialToken:"",initialValidityTime:0,initialScopes:[],keyRequest:{keyType:a,selectedGrantTypes:null,callbackUrl:"",additionalProperties:{},keyManager:"",validityTime:3600,scopes:["default"]},keyManagers:null,selectedTab:null,providedConsumerKey:"",providedConsumerSecret:"",validating:!1,importDisabled:!1,mode:null,tokenType:"DIRECT",isOrgWideAppUpdateEnabled:!1},this.keyStates={COMPLETED:"COMPLETED",APPROVED:"APPROVED",CREATED:"CREATED",REJECTED:"REJECTED"},t&&(this.appId=t.appId||t.value,this.application=I.A.get(this.appId)),this.updateKeyRequest=this.updateKeyRequest.bind(this),this.generateKeys=this.generateKeys.bind(this),this.updateKeys=this.updateKeys.bind(this),this.cleanUpKeys=this.cleanUpKeys.bind(this),this.handleOnChangeProvidedOAuth=this.handleOnChangeProvidedOAuth.bind(this),this.provideOAuthKeySecret=this.provideOAuthKeySecret.bind(this)}componentDidMount(){this.loadApplication(),this.isOrgWideAppUpdateEnabled()}componentDidUpdate(e){const{keyType:t}=e,{keyType:a}=this.props;t!==a&&this.loadApplication()}getDefaultAdditionalProperties(e){const{availableGrantTypes:t,applicationConfiguration:a}=e,n={};return a.forEach((e=>{n[e.name]=e.default||""})),n}isTokenExchangeEnabled(){const{keyManagers:e}=this.state;let t=!1;return e&&e.length>1&&e.map((e=>{"EXCHANGED"!==e.tokenType&&"BOTH"!==e.tokenType||(t=!0)})),t}updateKeyRequest(e){this.setState({keyRequest:e})}generateKeys(){const{keyRequest:e,keys:t,selectedTab:a}=this.state,{keyType:n,updateSubscriptionData:r,selectedApp:{tokenType:s,hashEnabled:i},intl:o}=this.props;!e.selectedGrantTypes.includes("implicit")&&!e.selectedGrantTypes.includes("authorization_code")||""!==e.callbackUrl?(this.setState({isLoading:!0}),this.application.then((t=>t.generateKeys(n,e.selectedGrantTypes,e.callbackUrl,e.additionalProperties,this.getKeyManagerIdentifier()))).then((e=>{r&&r();const n=new Map([...t]),l="JWT"===s||i;n.set(a,e);const c=e.token?e.token.accessToken:"",p=e.token?e.token.validityTime:0,d=e.token?e.token.tokenScopes:[];this.setState({keys:n,isKeyJWT:l,initialToken:c,initialValidityTime:p,initialScopes:d}),e.keyState===this.keyStates.CREATED||e.keyState===this.keyStates.REJECTED?A.A.info(o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.success.blocked",defaultMessage:"Application keys generate request is currently pending approval by the site administrator."})):(A.A.info(o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.success",defaultMessage:"Application keys generated successfully"})),this.loadApplication())})).catch((e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):500===t&&this.loadApplication(),A.A.error(e.description||`${o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.error",defaultMessage:"Error occurred when generating application keys"})}, ${e.response.body.message}`)})).finally((()=>this.setState({isLoading:!1})))):A.A.error(o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.error.callbackempty",defaultMessage:"Callback URL can not be empty when the Implicit or Application Code grant types selected"}))}updateKeys(){const{keys:e,keyRequest:t,selectedTab:a}=this.state,{keyType:n,intl:r}=this.props,s=e.get(a).keyType===n&&e.get(a);!t.selectedGrantTypes.includes("implicit")&&!t.selectedGrantTypes.includes("authorization_code")||""!==t.callbackUrl?(this.setState({isLoading:!0}),this.application.then((e=>e.updateKeys(s.tokenType,n,t.selectedGrantTypes,t.callbackUrl,s.consumerKey,s.consumerSecret,t.additionalProperties,a,s.keyMappingId))).then((t=>{const n=new Map([...e]);n.set(a,t),this.setState({keys:n}),A.A.info(r.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.update.success",defaultMessage:"Application keys updated successfully"}))})).catch((e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):500===t&&this.loadApplication();const{response:a}=e;a&&a.body&&a.body.message&&a.body.description&&A.A.error(`${a.body.message}: ${a.body.description}`)})).finally((()=>this.setState({isLoading:!1})))):A.A.error(r.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.error.callbackempty",defaultMessage:"Callback URL can not be empty when the Implicit or Application Code grant types selected"}))}cleanUpKeys(e,t){const{keyType:a,intl:n}=this.props;this.application.then((n=>n.cleanUpKeys(a,e,t))).then((()=>{this.loadApplication(),A.A.info(n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanup.success",defaultMessage:"Application keys cleaned successfully"}))})).catch((e=>{const{status:t}=e;404===t&&this.setState({notFound:!0}),A.A.error(e.description||n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanup.error",defaultMessage:"Error occurred while cleaning up application keys"}))}))}handleOnChangeProvidedOAuth(e){this.setState({[e.target.name]:e.target.value})}provideOAuthKeySecret(){const{keyType:e,intl:t}=this.props,{providedConsumerKey:a,providedConsumerSecret:n,selectedTab:r}=this.state;this.application.then((t=>t.provideKeys(e,a,n,r))).then((()=>{this.setState({providedConsumerKey:"",providedConsumerSecret:""}),this.loadApplication(),A.A.info(t.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.provide.success",defaultMessage:"Application keys provided successfully"}))})).catch((e=>{const{status:a,response:n}=e;404===a&&this.setState({notFound:!0}),n?A.A.error(e.response.body.description):A.A.error(e.description||t.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.provide.error",defaultMessage:"Error occurred when providing application keys"}))}))}getKeyManagerDescription(){const{keyManagers:e,selectedTab:t}=this.state,a=e.filter((e=>e.name===t));return a&&1===a.length?a[0].description:""}getKeyManagerIdentifier(){const{keyManagers:e,selectedTab:t}=this.state,a=e.filter((e=>e.name===t));return a&&1===a.length?a[0].id:t}render(){const{selectedApp:e,keyType:t,summary:a,selectedApp:{hashEnabled:r},isKeyManagerAllowed:s}=this.props,{keys:i,keyRequest:d,isLoading:A,isKeyJWT:T,providedConsumerKey:S,providedConsumerSecret:v,selectedTab:K,keyManagers:w,validating:x,hasError:P,initialToken:I,initialValidityTime:D,initialScopes:W,importDisabled:U,mode:q,tokenType:G,isOrgWideAppUpdateEnabled:V}=this.state;if(w&&0===w.length)return n.createElement(ct,null,n.createElement("div",{className:lt.root},n.createElement(l.A,{mb:1},n.createElement(c.A,{variant:"h5",className:lt.keyTitle},this.toTitleCase(t),n.createElement(p.A,{id:"Shared.AppsAndKeyhandleCloses.TokenManager.oauth2.keys.main.title",defaultMessage:" OAuth2 Keys"}))),n.createElement($.A,{type:"info",className:lt.dialogContainer},n.createElement(c.A,{variant:"h5",component:"h3"},n.createElement(p.A,{id:"Shared.AppsAndKeys.TokenManager.no.km",defaultMessage:"No Key Managers"})),n.createElement(c.A,{component:"p"},n.createElement(p.A,{id:"Shared.AppsAndKeys.TokenManager.no.km.content",defaultMessage:"No Key Managers active to generate keys."})))));if(!i||!K||!d.selectedGrantTypes)return n.createElement(ct,null,n.createElement(u.A,null));const j=i.size>0&&i.get(K)&&i.get(K).keyType===t&&i.get(K),H=j&&j.keyMappingId,F=R.A.getUser().name;let B=!1;e.owner&&F.toLowerCase()===e.owner.toLowerCase()&&(B=!0);const z=i.size>0&&i.get(K)&&i.get(K).keyType===t?i.get(K):null;if(a)return i?n.createElement(ct,null,n.createElement(Xe,{keys:i,key:z,keyStates:this.keyStates,selectedApp:e,selectedTab:K,keyType:t,isKeyJWT:T,isUserOwner:B})):n.createElement(ct,null,n.createElement(Qe.A,null));let J,Y=!1;if(i.has("Resident Key Manager")&&i.get("Resident Key Manager").supportedGrantTypes&&i.get("Resident Key Manager").supportedGrantTypes.includes("urn:ietf:params:oauth:grant-type:token-exchange")&&(Y=!0),w.length>0){const e=w.filter((e=>"Resident Key Manager"===e.name));J=e.length>0?e[0].tokenEndpoint:null}return z&&"APPROVED"===z.keyState&&!z.consumerKey?n.createElement(ct,null,n.createElement(c.A,{className:lt.cleanUpInfoText,variant:"subtitle1"},n.createElement(p.A,{id:"Shared.AppsAndKeys.TokenManager.cleanup.text",defaultMessage:"Error! You have partially-created keys. Please click `Clean Up` button and try again."})),n.createElement(o.A,{variant:"contained",color:"primary",className:lt.cleanUpButton,onClick:()=>this.cleanUpKeys(K,i.get(K).keyMappingId)},n.createElement(p.A,{defaultMessage:"Clean up",id:"Shared.AppsAndKeys.TokenManager.cleanup"}))):!z||z.keyState!==this.keyStates.CREATED&&z.keyState!==this.keyStates.REJECTED?n.createElement(ct,null,w&&w.length>1&&n.createElement(y.A,{position:"static",color:"default"},n.createElement(g.A,{value:K,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example"},w.map((e=>n.createElement(h.A,{label:e.displayName||e.name,value:e.name,disabled:!e.enabled||s&&!s(e.name)&&("Resident Key Manager"!==e.name||!this.isTokenExchangeEnabled()&&"Resident Key Manager"===e.name),id:e.name.replace(/\s/g,"")}))))),n.createElement("div",{className:lt.root},n.createElement(l.A,{mb:1},n.createElement(c.A,{variant:"h5",className:lt.keyTitle},this.toTitleCase(t),n.createElement(p.A,{id:"Shared.AppsAndKeys.TokenManager.oauth2.keys.main.title",defaultMessage:" OAuth2 Keys"}))),w&&w.length>0&&w.map((a=>n.createElement("div",null,"DIRECT"===a.tokenType&&n.createElement(pt,{value:K,index:a.name,className:lt.tabPanel},n.createElement(l.A,{display:"flex",flexDirection:"row"},n.createElement(c.A,{className:lt.subTitle,variant:"h6",component:"h6"},n.createElement(p.A,{defaultMessage:"Key and Secret",id:"Shared.AppsAndKeys.TokenManager.key.and.secret"})),a.enableMapOAuthConsumerApps&&n.createElement(l.A,{ml:2},n.createElement(O,{onChange:this.handleOnChangeProvidedOAuth,consumerKey:S,consumerSecret:v,isUserOwner:B,key:z,provideOAuthKeySecret:this.provideOAuthKeySecret,importDisabled:U})),a.enableTokenGeneration&&i.get(K)&&B&&("MAPPED"!==q?n.createElement(l.A,{ml:2},n.createElement(et,{keys:i,selectedTab:K,keyMappingId:H,handleClickRemove:this.handleClickRemove})):n.createElement(l.A,{ml:2},n.createElement(tt,{keys:i,selectedTab:K,keyMappingId:H,handleClickRemove:this.handleClickRemove})))),n.createElement(l.A,{m:2},n.createElement(Be,{initialToken:I,initialValidityTime:D,initialScopes:W,selectedApp:e,selectedTab:K,keyType:t,keys:i,selectedGrantTypes:d.selectedGrantTypes,isUserOwner:B,hashEnabled:a.enableTokenHashing||r,keyManagerConfig:a,mode:q,loadApplication:this.loadApplication})),n.createElement(c.A,{className:lt.subTitle,variant:"h6",component:"h6"},z?n.createElement(p.A,{defaultMessage:"Key Configurations",id:"Shared.AppsAndKeys.TokenManager.update.configuration"}):n.createElement(p.A,{defaultMessage:"Key Configuration",id:"Shared.AppsAndKeys.TokenManager.key.configuration"})),n.createElement(l.A,{m:2},n.createElement(De,{keys:i,key:z,selectedApp:e,selectedTab:K,keyType:t,updateKeyRequest:this.updateKeyRequest,keyRequest:d,isUserOwner:B,isKeysAvailable:!!z,keyManagerConfig:a,validating:x,updateHasError:this.updateHasError,callbackError:P,setValidating:this.setValidating,defaultTokenEndpoint:J,mode:q}),n.createElement("div",{className:lt.generateWrapper},n.createElement(C.M9,{resourcePath:C.Hc.APPLICATION_GENERATE_KEYS,resourceMethod:C.DT.POST},V||B?n.createElement(l.A,{display:"flex"},n.createElement(o.A,{id:"generate-keys",variant:"contained",color:"primary",className:lt.button,onClick:z?this.updateKeys:this.generateKeys,disabled:P||A||!a.enableOAuthAppCreation||q&&"MAPPED"===q||s&&!s(a.name)&&("Resident Key Manager"!==a.name||!this.isTokenExchangeEnabled()&&"Resident Key Manager"===a.name)},z?this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.update",defaultMessage:"Update"}):this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.generate.keys",defaultMessage:"Generate Keys"}),A&&n.createElement(m.A,{size:20})),!a.enableOAuthAppCreation&&n.createElement(l.A,{m:2,display:"flex"},n.createElement(N.A,{className:lt.warningIcon}),n.createElement(c.A,{variant:"body1"},n.createElement(p.A,{defaultMessage:"Oauth app creation disabled for {kmName} key manager",id:"Shared.AppsAndKeys.TokenManager.app.creation.disable.warn",values:{kmName:a.displayName||a.name}})))):n.createElement(n.Fragment,null,n.createElement(o.A,{id:"generate-keys",variant:"contained",color:"primary",className:lt.button,onClick:z?this.updateKeys:this.generateKeys,disabled:!V&&!B||A||!a.enableOAuthAppCreation||s&&!s(a.name)&&("Resident Key Manager"!==a.name||!this.isTokenExchangeEnabled()&&"Resident Key Manager"===a.name)},z?this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.update.keys",defaultMessage:"Update Keys"}):this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.generate.keys",defaultMessage:"Generate Keys"}),A&&n.createElement(m.A,{size:20})),n.createElement(c.A,{variant:"caption"},n.createElement(p.A,{defaultMessage:"Only owner can generate or update keys",id:"Shared.AppsAndKeys.TokenManager.key.and.user.owner"}))))))),"EXCHANGED"===a.tokenType&&n.createElement(pt,{value:K,index:a.name,className:lt.tabPanel},n.createElement(c.A,{className:lt.subTitle,variant:"h6",component:"h6"},n.createElement(p.A,{defaultMessage:"Token Generation",id:"Shared.AppsAndKeys.TokenManager.ExchangeToken.key.configuration"})),n.createElement(l.A,{m:2},n.createElement(le,{keys:i,key:z,selectedApp:e,selectedTab:K,keyType:t,updateKeyRequest:this.updateKeyRequest,keyRequest:d,isUserOwner:B,isKeysAvailable:!!z,keyManagerConfig:a,validating:x,updateHasError:this.updateHasError,callbackError:P,setValidating:this.setValidating,defaultTokenEndpoint:J}))),"BOTH"===a.tokenType&&n.createElement(pt,{value:K,index:a.name,className:lt.tabPanel},n.createElement(l.A,{m:2},n.createElement(l.A,{m:2},n.createElement(l.A,{display:"flex",alignItems:"center"},n.createElement(_.A,{className:lt.table},n.createElement(Q.A,null,n.createElement(Z.A,{component:"th",scope:"row",className:lt.leftCol},n.createElement(p.A,{defaultMessage:"API Invocation Method",id:"Shared.AppsAndKeys.KeyConfiguration.API Invocation.Method.label"})),n.createElement(Z.A,null,n.createElement(ce.A,{style:{flexDirection:"row"},"aria-label":"tokenType",name:"tokenType",value:G,onChange:this.handleChange},n.createElement(pe.A,{value:"DIRECT",control:n.createElement(de.A,null),label:"Direct Token",id:"direct-token"}),n.createElement(pe.A,{value:"EXCHANGED",control:n.createElement(de.A,null),label:"Exchange Token",id:"exchange-token"}))))))),"DIRECT"===G&&n.createElement(n.Fragment,null,n.createElement(l.A,{display:"flex",flexDirection:"row"},n.createElement(c.A,{className:lt.subTitle,variant:"h6",component:"h6"},n.createElement(p.A,{defaultMessage:"Key and Secret",id:"Shared.AppsAndKeys.TokenManager.key.and.secret"})),a.enableMapOAuthConsumerApps&&n.createElement(l.A,{ml:2},n.createElement(O,{onChange:this.handleOnChangeProvidedOAuth,consumerKey:S,consumerSecret:v,isUserOwner:B,key:z,provideOAuthKeySecret:this.provideOAuthKeySecret,importDisabled:U}))),n.createElement(l.A,{m:2},n.createElement(Be,{initialToken:I,initialValidityTime:D,initialScopes:W,selectedApp:e,selectedTab:K,keyType:t,keys:i,selectedGrantTypes:d.selectedGrantTypes,isUserOwner:B,hashEnabled:a.enableTokenHashing||r,keyManagerConfig:a,mode:q,loadApplication:this.loadApplication})),n.createElement(c.A,{className:lt.subTitle,variant:"h6",component:"h6"},z?n.createElement(p.A,{defaultMessage:"Key Configurations",id:"Shared.AppsAndKeys.TokenManager.update.configuration"}):n.createElement(p.A,{defaultMessage:"Key Configuration",id:"Shared.AppsAndKeys.TokenManager.key.configuration"})),n.createElement(l.A,{m:2},n.createElement(De,{keys:i,key:z,selectedApp:e,selectedTab:K,keyType:t,updateKeyRequest:this.updateKeyRequest,keyRequest:d,isUserOwner:B,isKeysAvailable:!!z,keyManagerConfig:a,validating:x,updateHasError:this.updateHasError,callbackError:P,setValidating:this.setValidating,defaultTokenEndpoint:J}),n.createElement("div",{className:lt.generateWrapper},n.createElement(C.M9,{resourcePath:C.Hc.APPLICATION_GENERATE_KEYS,resourceMethod:C.DT.POST},V||B?n.createElement(l.A,{display:"flex"},n.createElement(o.A,{id:"generate-keys",variant:"contained",color:"primary",className:lt.button,onClick:z?this.updateKeys:this.generateKeys},z?"Update":"Generate Keys",A&&n.createElement(m.A,{size:20})),!a.enableOAuthAppCreation&&n.createElement(l.A,{m:2,display:"flex"},n.createElement(N.A,{className:lt.warningIcon}),n.createElement(c.A,{variant:"body1"},n.createElement(p.A,{defaultMessage:"Oauth app creation disabled for {kmName} key manager",id:"Shared.AppsAndKeys.TokenManager.app.creation.disable .warn",values:{kmName:a.displayName||a.name}})))):n.createElement(n.Fragment,null,n.createElement(o.A,{id:"generate-keys",variant:"contained",color:"primary",className:lt.button,onClick:z?this.updateKeys:this.generateKeys},z?"Update keys":"Generate Keys",A&&n.createElement(m.A,{size:20})),n.createElement(c.A,{variant:"caption"},n.createElement(p.A,{defaultMessage:"Only owner can generate or update keys",id:"Shared.AppsAndKeys.TokenManager.key.and.user.owner"}))))))),"EXCHANGED"===G&&Y&&n.createElement(pt,{value:K,index:a.name,className:lt.tabPanel},n.createElement(c.A,{className:lt.subTitle,variant:"h6",component:"h6"},n.createElement(p.A,{defaultMessage:"Token Generation",id:"Shared.AppsAndKeys.TokenManager.ExchangeToken.key.configuration"})),n.createElement(l.A,{m:2},n.createElement(le,{keys:i,key:z,selectedApp:e,selectedTab:K,keyType:t,updateKeyRequest:this.updateKeyRequest,keyRequest:d,isUserOwner:B,isKeysAvailable:!!z,keyManagerConfig:a,validating:x,updateHasError:this.updateHasError,callbackError:P,setValidating:this.setValidating,defaultTokenEndpoint:J}))))))))),"EXCHANGED"===G&&!Y&&n.createElement("div",{className:lt.inputWrapper},n.createElement(M.Ay,{container:!0,spacing:3},n.createElement(M.Ay,{item:!0,xs:12},n.createElement(k.A,{fullScreen:!1,open:!0,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",className:lt.dialogWrapper},n.createElement(b.A,{id:"responsive-dialog-title"},"Resident Key Manager Consumer Key and Secret Not Available "),n.createElement(f.A,null,n.createElement(L.A,null,n.createElement(n.Fragment,null,n.createElement(c.A,null,n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewCurl.error",defaultMessage:"Please generate the Consumer Key and Secret for Residence Key Manager with selecting the urn:ietf:params:oauth:grant-type:token-exchange grant type in order to use the token Exchange Approach. "}))))),n.createElement(E.A,null,n.createElement(o.A,{onClick:this.handleClose,color:"primary",autoFocus:!0,id:"close-btn"},n.createElement(p.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"})))))))):n.createElement(ct,null,n.createElement(Ye,{keyState:z.keyState,states:this.keyStates}))}}st(dt,"contextType",x.Ay),dt.contextType=x.Ay,dt.defaultProps={updateSubscriptionData:()=>{},summary:!1},dt.propTypes={classes:i().instanceOf(Object).isRequired,selectedApp:i().shape({tokenType:i().string.isRequired,appId:i().string,value:i().string,owner:i().string,hashEnabled:i().bool}).isRequired,keyType:i().string.isRequired,updateSubscriptionData:i().func,intl:i().shape({formatMessage:i().func}).isRequired,summary:i().bool};const ut=(0,d.Ay)(dt)},67783:(e,t,a)=>{a.d(t,{DT:()=>l,Hc:()=>o,M9:()=>c});var n=a(96540),r=a(5556),s=a.n(r),i=a(32997);const o={APIS:"/apis",SINGLE_API:"/apis/{apiId}",API_SWAGGER:"/apis/{apiId}/swagger",API_WSDL:"/apis/{apiId}/wsdl",API_GW_CONFIG:"/apis/{apiId}/gateway-config",API_THUMBNAIL:"/apis/{apiId}/thumbnail",API_COPY:"/apis/copy-api",API_LC_HISTORY:"/apis/{apiId}/lifecycle-history",API_CHANGE_LC:"/apis/change-lifecycle",API_LC:"/apis/{apiId}/lifecycle",API_LC_PENDING_TASK:"/apis/{apiId}/lifecycle/lifecycle-pending-task",API_DEF:"/apis/import-definition",API_VALIDATE_DEF:"/apis/validate-definition",API_DOCS:"/apis/{apiId}/documents",API_DOC:"'/apis/{apiId}/documents/{documentId}'",API_DOC_CONTENT:"'/apis/{apiId}/documents/{documentId}/content'",APPLICATIONS:"/applications",SINGLE_APPLICATION:"/applications/{applicationId}",APPLICATION_GENERATE_KEYS:"/applications/{applicationId}/generate-keys",APPLICATION_GENERATE_KEY_TYPE:"/applications/{applicationId}/keys/{keyType}",EXPORT_APIS:"/export/apis",IMPORT_APIS:"/import/apis",SUBSCRIPTION:"/subscriptions",SINGLE_SUBSCRIPTION:"/subscriptions/{subscriptionId}",SUBSCRIPTIONS:"/subscriptions",BLOCK_SUBSCRIPTION:"/subscriptions/block-subscription:",UNBLOCK_SUBSCRIPTION:"/subscriptions/unblock-subscription",POLICIES:"'/policies/{tierLevel}'",POLICY:"'/policies/{tierLevel}/{tierName}'",ENDPOINTS:"/endpoints",ENDPOINT:"/endpoints/{endpointId}",LABLES:"/labels",WORKFLOW:"/workflows/{workflowReferenceId}",SERVICE_DISCOVERY:"/external-resources/services"},l={POST:"post",PUT:"put",GET:"get",DELETE:"delete"};class c extends n.Component{constructor(e){super(e),this.state={}}componentDidMount(){const{resourcePath:e,resourceMethod:t}=this.props,a=i.A.hasScopes(e,t);a&&a.then((e=>{this.setState({haveScope:e})}))}render(){const{children:e}=this.props;return this.state.haveScope&&e||null}}c.propTypes={children:s().node.isRequired,resourcePath:s().string.isRequired,resourceMethod:s().string.isRequired}},75623:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(66509),r=a(21688),s=a(94877);class i extends r.A{constructor(){super(),this.client=(new n.A).getAPIClient(s.A.getEnvironment().label).client}getSubscriptions(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25;return this.client.then((n=>n.apis.Subscriptions.get_subscriptions({apiId:e,applicationId:t,limit:a})))}getSubscription(e){return this.client.then((t=>t.apis.Subscriptions.get_subscriptions__subscriptionId_({subscriptionId:e})))}getMonetizationInvoice(e){return this.client.then((t=>t.apis["API Monetization"].get_subscriptions__subscriptionId__usage({subscriptionId:e})))}deleteSubscription(e){return this.client.then((t=>t.apis.Subscriptions.delete_subscriptions__subscriptionId_({subscriptionId:e})))}updateSubscription(e,t,a,n,r,s){return this.client.then((i=>{let o=null;o={applicationId:e,apiId:t,subscriptionId:a,throttlingPolicy:n,status:r,requestedThrottlingPolicy:s};const l={subscriptionId:a};return i.apis.Subscriptions.put_subscriptions__subscriptionId_(l,{requestBody:o},{"Content-Type":"application/json"})}))}}}}]);
//# sourceMappingURL=6158.75855cf94cb8ce2f1333.bundle.js.map