"use strict";(this.webpackChunk_wso2apim_devportal=this.webpackChunk_wso2apim_devportal||[]).push([[943],{2587:(e,t,i)=>{i.d(t,{A:()=>h});var a=i(96540),n=i(58031),s=i(46831),r=i(22477),l=i(77867),o=i(58763),c=i(84798),p=i(48875),d=i(58065),u=i(5556),m=i.n(u);const g=e=>{const{handleAppDelete:t,isDeleteOpen:i,toggleDeleteConfirmation:u}=e;return a.createElement(n.A,{open:i,transition:p.A,role:"alertdialog"},a.createElement(s.A,null,a.createElement(d.A,{id:"Applications.Listing.DeleteConfirmation.dialog.title",defaultMessage:"Delete Application"})),a.createElement(r.A,null,a.createElement(l.A,null,a.createElement(d.A,{id:"Applications.Listing.DeleteConfirmation.dialog.text.description",defaultMessage:"The application will be removed"}))),a.createElement(o.A,null,a.createElement(c.A,{dense:!0,color:"grey",onClick:u},a.createElement(d.A,{id:"Applications.Listing.DeleteConfirmation.dialog.cancel",defaultMessage:"Cancel"})),a.createElement(c.A,{id:"itest-confirm-application-delete",size:"small",variant:"outlined",color:"primary",onClick:t},a.createElement(d.A,{id:"Applications.Listing.DeleteConfirmation.dialog,delete",defaultMessage:"Delete"}))))};g.propTypes={handleAppDelete:m().func.isRequired,isDeleteOpen:m().bool.isRequired,toggleDeleteConfirmation:m().func.isRequired};const h=g},53570:(e,t,i)=>{i.r(t),i.d(t,{default:()=>mi});var a=i(96540),n=i(69067),s=i(11848),r=i(5556),l=i.n(r),o=i(54625),c=i(56347),p=i(90082),d=i(38197),u=i(33551),m=i(58065),g=i(38798),h=i(51989),b=i(30198),A=i(18679),f=i(8843),y=(i(12058),i(5159)),E=i(11240),S=i(84798),v=i(58031),M=i(58763),C=i(22477),D=i(77867),P=i(46831),T=i(22079),x=i(99020),k=i(37738),I=i(1043),w=i(45359),R=i(1775),L=i(71238),N=i(55902),$=i.n(N);const O={number:$().number().integer(),url:$().string().uri().allow(""),ipAddress:$().string().ip({version:["ipv4","ipv6"],cidr:"optional"})};function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function B(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const U={FormControl:"ApiKey-FormControl"},W=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${U.FormControl}`]:{"margin-bottom":"8px",width:"100%",padding:"0px 10px"}}})),_=e=>{const[t,i]=(0,a.useState)(!0),[n,s]=(0,a.useState)(!1),r=(t,a)=>{const{accessTokenRequest:n,updateAccessTokenRequest:r}=e,l=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?q(Object(i),!0).forEach((function(t){B(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},n),{target:o}=a;switch(t){case"infiniteValidity":i(o.checked),o.checked?l.timeout=-1:l.timeout=null;break;case"timeout":void 0===O.number.validate(o.value).error?(l.timeout=o.value,s(!1)):(l.timeout=null,s(!0))}r(l)},{intl:l,accessTokenRequest:o}=e;return a.createElement(W,null,a.createElement(w.A,{variant:"standard",margin:"normal",className:U.FormControl},a.createElement(R.A,{control:a.createElement(L.A,{checked:t,onChange:e=>r("infiniteValidity",e),value:o.timeout,color:"grey"}),label:l.formatMessage({defaultMessage:"API Key with infinite validity period",id:"Shared.AppsAndKeys.Tokens.apikey.validity.period.label"})}),!t&&a.createElement(I.A,{variant:"standard",required:!0,label:l.formatMessage({defaultMessage:"API Key validity period",id:"Shared.AppsAndKeys.Tokens.apikey"}),InputLabelProps:{shrink:!0},helperText:n?l.formatMessage({defaultMessage:"Please use a valid number for API Key expiry time",id:"Shared.AppsAndKeys.Tokens.apikey.set.validity.error"}):l.formatMessage({defaultMessage:"You can set an expiration period to determine the validity period of the token after generation. Set this as -1 to ensure that the apikey never expires.",id:"Shared.AppsAndKeys.Tokens.apikey.set.validity.help"}),fullWidth:!0,name:"timeout",onChange:e=>r("timeout",e),placeholder:l.formatMessage({defaultMessage:"Enter time in seconds",id:"Shared.AppsAndKeys.Tokens.apikey.enter.time"}),value:o.timeout,autoFocus:!0,className:U.inputText,error:n})))};_.contextTypes={intl:l().shape({}).isRequired};const K=(0,g.Ay)(_);var j=i(19455),F=i(67034),z=i(56655),V=i(87992),H=i(16718),G=i(49799),Y=i(44635),J=i(44448),X=i(82241),Z=i(53215),Q=i(41340);const ee="ApiKeyRestriction",te={FormControl:`${ee}-FormControl`,outterBox:`${ee}-outterBox`,Fab:`${ee}-Fab`},ie=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${te.FormControl}`]:{"margin-bottom":t.spacing(1),width:"100%",padding:t.spacing(0,1)},[`& .${te.outterBox}`]:{margin:t.spacing(1),padding:t.spacing(1),marginLeft:20,borderColor:"#cccccc"},[`& .${te.Fab}`]:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}}})),ae=e=>{const[t,i]=(0,a.useState)(!1),[s,r]=(0,a.useState)(!1),{intl:l,newIP:o,updateNewIp:c,ipList:p,updateIpList:d,restrictSchema:g,updateRestrictSchema:h,newReferer:b,updateNewReferer:A,refererList:f,updateRefererList:y}=e;return a.createElement(ie,null,a.createElement(n.A,{border:1,borderRadius:"5px",className:te.outterBox},a.createElement(u.A,{variant:"body1"},a.createElement(m.A,{defaultMessage:"Key Restrictions",id:"Shared.ApiKeyRestriction.key.restrictions"})),a.createElement(w.A,{variant:"standard",component:"fieldset"},a.createElement(Q.A,{"aria-label":"API Key Restrictions",value:g,row:!0,onChange:e=>{h(e.target.value),d([]),y([]),c(""),A(""),i(!1),r(!1)}},a.createElement(R.A,{value:"none",control:a.createElement(Z.A,{color:"primary",id:"api-key-restriction-none"}),label:l.formatMessage({defaultMessage:"None",id:"Shared.ApiKeyRestriction.key.restrictions.none"}),labelPlacement:"end"}),a.createElement(R.A,{value:"ip",control:a.createElement(Z.A,{color:"primary",id:"api-key-restriction-ip"}),label:l.formatMessage({defaultMessage:"IP Addresses",id:"Shared.ApiKeyRestriction.key.restrictions.ip.addresses"}),labelPlacement:"end"}),a.createElement(R.A,{value:"referer",control:a.createElement(Z.A,{color:"primary",id:"api-key-restriction-referer"}),label:l.formatMessage({defaultMessage:"HTTP Referrers (Web Sites)",id:"Shared.ApiKeyRestriction.key.restrictions.http.referrers"}),labelPlacement:"end"}))),"ip"===g&&a.createElement(n.A,{component:"div",id:"ipPanel"},a.createElement(x.Ay,{container:!0,direction:"row",spacing:0,justifyContent:"left",alignItems:"left"},a.createElement(x.Ay,{item:!0,md:10,xs:10},a.createElement(I.A,{label:l.formatMessage({defaultMessage:"IP Address",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.ip.address.label"}),value:o,onChange:e=>{c(e.target.value.trim()),""===e.target.value.trim()&&i(!1)},className:te.inputText,helperText:t?l.formatMessage({defaultMessage:"Invalid IP Address",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.ip.validity.error"}):"",error:t,size:"small",margin:"dense",variant:"outlined",placeholder:l.formatMessage({defaultMessage:"Enter IP Address",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.enter.ip"}),fullWidth:!0,id:"ip-address-txt"})),a.createElement(x.Ay,{item:!0,md:2,xs:2},a.createElement("span",null,a.createElement(V.A,{className:te.Fab,size:"small",color:"primary","aria-label":"add",onClick:()=>{null!==o&&""!==o&&(O.ipAddress.validate(o).error?i(!0):(i(!1),p.push(o),d(p),c("")))},id:"ip-address-add-btn"},a.createElement(H.A,null))))),a.createElement(x.Ay,{container:!0,direction:"row",spacing:0,justifyContent:"left",alignItems:"left",md:10,xs:10},p.length>0&&a.createElement(G.A,null,p.map(((e,t)=>a.createElement(Y.Ay,null,a.createElement(X.A,{primary:e}),a.createElement(J.A,null,a.createElement(z.A,{title:l.formatMessage({defaultMessage:"Delete task",id:"Shared.ApiKeyRestriction.key.restrictions.delete.task.tooltip"}),placement:"top"},a.createElement(j.A,{edge:"end","aria-label":"delete",onClick:()=>{return t=e,p.splice(p.indexOf(t),1),void d(p);var t},size:"large"},a.createElement(F.default,null)))))))))),"referer"===g&&a.createElement(n.A,{component:"div",id:"refererPanel"},a.createElement(x.Ay,{container:!0,direction:"row",spacing:0,justifyContent:"left",alignItems:"left"},a.createElement(x.Ay,{item:!0,md:10,xs:10},a.createElement(I.A,{label:l.formatMessage({defaultMessage:"Referer",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.referer.label"}),value:b,onChange:e=>{A(e.target.value.trim()),""===e.target.value.trim()&&r(!1)},className:te.inputText,helperText:s?l.formatMessage({defaultMessage:"Invalid Http Referer",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.referer.validity.error"}):"",error:s,size:"small",margin:"dense",variant:"outlined",placeholder:l.formatMessage({defaultMessage:"Enter Http Referer",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.enter.referer"}),fullWidth:!0,id:"referer-txt"})),a.createElement(x.Ay,{item:!0,md:2,xs:2},a.createElement("span",null,a.createElement(V.A,{size:"small",className:te.Fab,color:"primary","aria-label":"add",onClick:()=>{null!==b&&""!==b?(r(!1),f.push(b.trim()),y(f),A("")):r(!0)},id:"referer-add-btn"},a.createElement(H.A,null))))),a.createElement(x.Ay,{container:!0,direction:"row",spacing:0,justifyContent:"left",alignItems:"left",md:10,xs:10},f.length>0&&a.createElement(G.A,null,f.map(((e,t)=>a.createElement(Y.Ay,null,a.createElement(X.A,{primary:e}),a.createElement(J.A,null,a.createElement(z.A,{title:l.formatMessage({defaultMessage:"Delete task",id:"Shared.ApiKeyRestriction.key.restrictions.delete.task.tooltip"}),placement:"top"},a.createElement(j.A,{edge:"end","aria-label":"delete",onClick:()=>{return t=e,f.splice(f.indexOf(t),1),void y(f);var t},size:"large"},a.createElement(F.default,null))))))))))))};ae.contextTypes={intl:l().shape({}).isRequired};const ne=(0,g.Ay)(ae);var se=i(14977),re=i(37636),le=i(73357);function oe(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ce="ApiKeyManager",pe={root:`${ce}-root`,dialog:`${ce}-dialog`,button:`${ce}-button`,tokenSection:`${ce}-tokenSection`,margin:`${ce}-margin`,keyConfigWrapper:`${ce}-keyConfigWrapper`,generateWrapper:`${ce}-generateWrapper`,paper:`${ce}-paper`,dialogTitle:`${ce}-dialogTitle`,dialogContent:`${ce}-dialogContent`,formGroup:`${ce}-formGroup`,gridWrapper:`${ce}-gridWrapper`,keyTitle:`${ce}-keyTitle`,cardBody:`${ce}-cardBody`,generateKey:`${ce}-generateKey`},de=(0,s.Ay)(x.Ay)((e=>{let{theme:t}=e;return{[`& .${pe.root}`]:{padding:t.spacing(3),"& span, & h5, & label, & input":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${pe.dialog}`]:{"& span, & h2, & label":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${pe.button}`]:{"& span":{color:t.palette.getContrastText(t.palette.primary.main)}},[`& .${pe.tokenSection}`]:{marginTop:t.spacing(2),marginBottom:t.spacing(2)},[`& .${pe.margin}`]:{marginRight:t.spacing(2)},[`& .${pe.keyConfigWrapper}`]:{flexDirection:"column",marginBottom:0},[`& .${pe.generateWrapper}`]:{padding:"10px","margin-inline-end":"auto"},[`& .${pe.paper}`]:{display:"flex",marginTop:t.spacing(2),marginBottom:t.spacing(2),marginLeft:t.spacing(10)},[`& .${pe.dialogTitle}`]:{padding:"24px 24px 0px"},[`& .${pe.dialogContent}`]:{padding:"0 24px 0px"},[`& .${pe.formGroup}`]:{padding:"20px"},[`& .${pe.gridWrapper}`]:{"align-self":"center"},[`& .${pe.keyTitle}`]:{textTransform:"capitalize"},[`& .${pe.cardBody}`]:{padding:t.spacing(1),lineHeight:2},[`& .${pe.generateKey}`]:{"& span":{color:t.palette.getContrastText(t.palette.primary.main)}}}}));class ue extends a.Component{constructor(e){super(e),oe(this,"updateIpList",(e=>{this.setState((()=>({ipList:e})))})),oe(this,"updateNewIp",(e=>{this.setState((()=>({newIP:e})))})),oe(this,"updateRefererList",(e=>{this.setState((()=>({refererList:e})))})),oe(this,"updateNewReferer",(e=>{this.setState((()=>({newReferer:e})))})),oe(this,"updateRestrictSchema",(e=>{this.setState((()=>({restrictSchema:e})))})),oe(this,"handleClose",(()=>{this.setState((()=>({open:!1,accessTokenRequest:{timeout:-1}})))})),oe(this,"handleClickOpen",(()=>{this.setState((()=>({open:!0,showToken:!1})))})),oe(this,"updateAccessTokenRequest",(e=>{this.setState((()=>({accessTokenRequest:e})))})),oe(this,"generateKeys",(()=>{const{selectedApp:e,keyType:t}=this.props;this.setState({isGenerating:!0});const i=new h.A,a={permittedIP:this.state.ipList.join(","),permittedReferer:this.state.refererList.join(",")};i.generateApiKey(e.appId,t,this.state.accessTokenRequest.timeout,a).then((e=>{console.log("Non empty response received");const t={accessToken:e.body.apikey,validityTime:e.body.validityTime,isOauth:!1};this.setState((()=>({apikey:t,open:!0,showToken:!0,ipList:[],refererList:[]}))),this.setState({isGenerating:!1})})).catch((e=>{const{status:t}=e;404===t&&this.setState({notFound:!0,ipList:[],refererList:[]}),this.setState({isGenerating:!1})}))})),this.state={apikey:null,open:!1,showToken:!1,accessTokenRequest:{timeout:-1},ipList:[],newIP:null,restrictSchema:"none",refererList:[],newReferer:null,isGenerating:!1}}render(){const{showToken:e,accessTokenRequest:t,open:i,apikey:n,newIP:s,ipList:r,newReferer:l,refererList:o,restrictSchema:c,isGenerating:p}=this.state;return a.createElement(de,{container:!0,direction:"row",spacing:0,justifyContent:"left",alignItems:"left"},a.createElement(x.Ay,{item:!0,md:5,xs:12},a.createElement(ne,{updateNewIp:this.updateNewIp,newIP:s,updateIpList:this.updateIpList,ipList:r,restrictSchema:c,updateRestrictSchema:this.updateRestrictSchema,refererList:o,newReferer:l,updateNewReferer:this.updateNewReferer,updateRefererList:this.updateRefererList}),a.createElement(T.A,{row:!0,className:pe.formGroup},a.createElement(S.A,{variant:"contained",color:"primary",onClick:this.handleClickOpen,className:pe.generateKey,id:"generate-key-btn"},this.props.intl.formatMessage({id:"Shared.AppsAndKeys.ApiKeyManager.generate.key.btn",defaultMessage:"Generate Key"})),a.createElement(u.A,{component:"div",variant:"body2",className:pe.formLabel},a.createElement(m.A,{id:"Shared.AppsAndKeys.ApiKeyManager.generate.key.help",defaultMessage:"Use the Generate Key button to generate a self-contained JWT token."}))),a.createElement(v.A,{open:i,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",className:pe.dialog},a.createElement(P.A,{id:"responsive-dialog-title",className:pe.dialogTitle},this.props.intl.formatMessage({id:"Shared.AppsAndKeys.ApiKeyManager.generate.api.key.btn",defaultMessage:"Generate API Key"})),a.createElement(C.A,{className:pe.dialogContent},a.createElement(D.A,null,!e&&a.createElement(K,{updateAccessTokenRequest:this.updateAccessTokenRequest,accessTokenRequest:t}),e&&a.createElement(k.A,{token:n}))),a.createElement(M.A,null,!e&&a.createElement(S.A,{onClick:this.generateKeys,disabled:!t.timeout||p,color:"primary",variant:"contained",className:pe.button,id:"generate-api-keys-btn"},a.createElement(m.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.generate.btn",defaultMessage:"Generate"}),p&&a.createElement(le.A,{size:24})),a.createElement(S.A,{onClick:this.handleClose,color:"grey",autoFocus:!0,id:"generate-api-keys-close-btn"},a.createElement(m.A,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"}))))),"ip"===c&&a.createElement(x.Ay,{item:!0,md:5,xs:12},a.createElement(se.A,null,a.createElement(re.A,null,a.createElement(u.A,{variant:"h5",component:"h2"},a.createElement(m.A,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.ip.example.heading",defaultMessage:"Examples of IP Addresses allowed"})),a.createElement(u.A,{variant:"body1",component:"p",className:pe.cardBody},a.createElement(m.A,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.ip.example.content",defaultMessage:"Specify one IPv4 or IPv6 or a subnet using CIDR notation{linebreak}Examples: {ip1}, {ip2}, {ip3} or {ip4}",values:{linebreak:a.createElement("br",null),ip1:a.createElement("b",null,"192.168.1.2"),ip2:a.createElement("b",null,"152.12.0.0/13"),ip3:a.createElement("b",null,"2002:eb8::2"),ip4:a.createElement("b",null,"1001:ab8::/44")}}))))),"referer"===c&&a.createElement(x.Ay,{item:!0,md:5,xs:12},a.createElement(se.A,null,a.createElement(re.A,null,a.createElement(u.A,{variant:"h5",component:"h2"},a.createElement(m.A,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.referer.example.heading",defaultMessage:"Examples of URLs allowed to restrict websites"})),a.createElement(u.A,{variant:"body1",component:"p",className:pe.cardBody},a.createElement(m.A,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.ip.example.content.message",defaultMessage:"A specific URL with an exact path: {url1}{linebreak}Any URL in a single subdomain, using a wildcard asterisk (*): {url2}{linebreak}Any subdomain or path URLs in a single domain, using wildcard asterisks (*): {url3}",values:{linebreak:a.createElement("br",null),url1:a.createElement("b",null,"www.example.com/path"),url2:a.createElement("b",null,"sub.example.com/*"),url3:a.createElement("b",null,"*.example.com/*")}}))))))}}ue.propTypes={classes:l().shape({}).isRequired,selectedApp:l().shape({tokenType:l().string.isRequired}).isRequired,keyType:l().string.isRequired,intl:l().shape({formatMessage:l().func}).isRequired};const me=(0,g.Ay)(ue);var ge=i(46942),he=i.n(ge),be=i(34339),Ae=i(92728),fe=i(99508),ye=i(53420),Ee=i(64745),Se=i(85877),ve=i(84712),Me=i(32413),Ce=i(64679),De=i(62861),Pe=i(31076),Te=i(17681),xe=i(98564),ke=i(44675),Ie=i(67783);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},we.apply(null,arguments)}const Re="SubscriptionPolicySelectLegacy",Le={root:`${Re}-root`,buttonGap:`${Re}-buttonGap`,select:`${Re}-select`},Ne=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{[`&.${Le.root}`]:{display:"flex"},[`& .${Le.buttonGap}`]:{background:t.palette.grey[300],marginLeft:20,"& span span":{color:t.palette.getContrastText(t.palette.primary.main)}},[`& .${Le.select}`]:{width:100}}}));class $e extends a.Component{constructor(e){super(e),this.state={selectedPolicy:null}}componentDidMount(){const{policies:e}=this.props;this.setState({selectedPolicy:e[0]})}render(){const{policies:e,apiId:t,handleSubscribe:i,applicationId:n}=this.props,{selectedPolicy:s}=this.state;return e&&a.createElement(Ne,{className:Le.root},a.createElement(xe.A,{id:"policy-select",disableClearable:!0,options:e,value:s,onChange:(e,t)=>{this.setState({selectedPolicy:t})},style:{width:150},renderInput:e=>a.createElement(I.A,we({size:"small",variant:"standard"},e)),renderOption:(e,t)=>a.createElement(Te.A,we({},e,{value:t,key:t,id:"policy-select-"+t}),t)}),a.createElement(Ie.M9,{resourcePath:Ie.Hc.SUBSCRIPTIONS,resourceMethod:Ie.DT.POST},a.createElement(S.A,{variant:"contained",size:"small",color:"grey",className:Le.buttonGap,onClick:()=>{i(n,t,s)},id:"policy-subscribe-btn-"+t},a.createElement(m.A,{defaultMessage:"Subscribe",id:"Apis.Listing.SubscriptionPolicySelect.subscribe"}))))}}$e.propTypes={classes:l().shape({}).isRequired,policies:l().shape({}).isRequired,apiId:l().string.isRequired,handleSubscribe:l().func.isRequired,applicationId:l().string.isRequired};const Oe=function(e){const{key:t,policies:i,apiId:n,handleSubscribe:s,applicationId:r}=e,l=(0,ke.A)();return a.createElement($e,{key:t,policies:i,apiId:n,handleSubscribe:s,applicationId:r,theme:l})};function qe(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Be="APICardView",Ue=`${Be}-root`,We=`${Be}-buttonGap`,_e=(0,s.Ay)("div")((()=>({[`& .${Ue}`]:{display:"flex"},[`& .${We}`]:{marginRight:10}})));class Ke extends a.Component{constructor(e){super(e),qe(this,"getData",(()=>{const{intl:e,entityType:t}=this.props,i="MCP"===t;this.xhrRequest().then((e=>{const{body:t}=e,{list:i,pagination:a}=t,{total:n}=a;this.count=n,this.setState({data:this.updateUnsubscribedAPIsList(i)})})).catch((t=>{const{response:a}=t,{setTenantDomain:n}=this.props;a&&901300===a.body.code?(n("INVALID"),ve.A.error(e.formatMessage({defaultMessage:"Invalid tenant domain",id:"Apis.Listing.ApiTableView.invalid.tenant.domain"}))):ve.A.error(e.formatMessage({defaultMessage:i?"Error While Loading MCP Servers":"Error While Loading APIs",id:i?"Apis.Listing.MCPServerCardView.error.loading":"Apis.Listing.ApiTableView.error.loading"}))})).finally((()=>{this.setState({loading:!1})}))})),qe(this,"changePage",(e=>{const{intl:t,entityType:i}=this.props,a="MCP"===i;this.page=e,this.setState({loading:!0}),this.xhrRequest().then((e=>{const{body:t}=e,{list:i}=t;this.setState({data:this.updateUnsubscribedAPIsList(i)})})).catch((()=>{ve.A.error(t.formatMessage({defaultMessage:a?"Error While Loading MCP Servers":"Error While Loading APIs",id:a?"Apis.Listing.MCPServerCardView.error.loading":"Apis.Listing.ApiTableView.error.loading"}))})).finally((()=>{this.setState({loading:!1})}))})),qe(this,"xhrRequest",(()=>{const{searchText:e,entityType:t}=this.props,{page:i,rowsPerPage:a}=this,n="MCP"===t,s=n?new Ce.A:new h.A;return e&&""!==e?n?s.getAllMCPServers({query:`${e} status:published`,limit:this.rowsPerPage,offset:i*a}):s.getAllAPIs({query:`${e} status:published`,limit:this.rowsPerPage,offset:i*a}):n?s.getAllMCPServers({query:"status:published",limit:this.rowsPerPage,offset:i*a}):s.getAllAPIs({query:"status:published",limit:this.rowsPerPage,offset:i*a})})),this.state={data:null,loading:!0},this.page=0,this.count=100,this.rowsPerPage=10,this.pageType=null}componentDidMount(){this.getData()}componentDidUpdate(e){const{subscriptions:t,searchText:i}=this.props;t.length!==e.subscriptions.length?this.getData():i!==e.searchText&&(this.page=0,this.getData())}getIdsOfSubscribedEntities(){const{subscriptions:e}=this.props;return e.map((e=>e.apiId)).filter(Boolean)}updateUnsubscribedAPIsList(e){const t=this.getIdsOfSubscribedEntities(),i=e.filter((e=>!(1===e.throttlingPolicies.length&&e.throttlingPolicies[0].includes(De.A.DEFAULT_SUBSCRIPTIONLESS_PLAN))));for(let e=0;e<i.length;e++){const a=i[e].throttlingPolicies.filter((e=>!e.includes(De.A.DEFAULT_SUBSCRIPTIONLESS_PLAN)));i[e].throttlingPolicies=a,(t.includes(i[e].id)||i[e].advertiseInfo.advertised||!i[e].isSubscriptionAvailable)&&(i[e].throttlingPolicies=null)}return i}render(){const{apisNotFound:e}=this.props,{loading:t,data:i}=this.state,{page:n,count:s,rowsPerPage:r}=this;if(e)return a.createElement(f.A,null);const{handleSubscribe:l,applicationId:o,intl:c,entityType:p}=this.props,d="MCP"===p,u=[{name:"id",label:c.formatMessage({id:d?"Apis.Listing.MCPServerList.id":"Apis.Listing.APIList.id",defaultMessage:"Id"}),options:{display:"excluded"}},{name:"isSubscriptionAvailable",label:c.formatMessage({id:d?"Apis.Listing.MCPServerList.isSubscriptionAvailable":"Apis.Listing.APIList.isSubscriptionAvailable",defaultMessage:"Is Subscription Available"}),options:{display:"excluded"}},{name:"name",label:c.formatMessage({id:d?"Apis.Listing.MCPServerList.name":"Apis.Listing.APIList.name",defaultMessage:"Name"})},{name:"displayName",label:c.formatMessage({id:d?"Apis.Listing.MCPServerList.display.name":"Apis.Listing.APIList.display.name",defaultMessage:"Display Name"}),options:{customBodyRender:(e,t)=>{var i;const a=null===(i=t.rowData)||void 0===i?void 0:i[2];return e||a}}},{name:"version",label:c.formatMessage({id:d?"Apis.Listing.MCPServerList.version":"Apis.Listing.APIList.version",defaultMessage:"Version"})},{name:"throttlingPolicies",label:c.formatMessage({id:d?"Apis.Listing.MCPServerList.subscription.status":"Apis.Listing.APIList.subscription.status",defaultMessage:"Subscription Status"}),options:{customBodyRender:(e,t)=>{if(t.rowData){const i=t.rowData[0],n=e;return t.rowData[1]?n?a.createElement(Oe,{key:i,policies:n,apiId:i,handleSubscribe:(e,t,i)=>l(e,t,i),applicationId:o}):c.formatMessage({id:d?"Apis.Listing.MCPServerCardView.already.subscribed":"Apis.Listing.APICardView.already.subscribed",defaultMessage:"Subscribed"}):c.formatMessage({id:d?"Apis.Listing.MCPServerCardView.not.allowed":"Apis.Listing.APICardView.not.allowed",defaultMessage:"Not Allowed"})}return a.createElement("span",null)}}}],m={search:!1,title:!1,filter:!1,print:!1,download:!1,viewColumns:!1,customToolbar:!1,responsive:"stacked",serverSide:!0,count:s,page:n,onTableChange:(e,t)=>{"changePage"===e&&this.changePage(t.page)},selectableRows:"none",rowsPerPage:r,onChangeRowsPerPage:e=>{const{page:t,count:i}=this;t*e>i&&(this.page=0),this.rowsPerPage=e,this.getData()},textLabels:{pagination:{rowsPerPage:c.formatMessage({id:d?"Apis.Listing.MCPServerCardView.rows.per.page":"Apis.Listing.APICardView.rows.per.page",defaultMessage:"Rows per page"})}}};return t?a.createElement(A.A,null):i&&0===i.length||!i?a.createElement(Pe.A,{isMCPServersRoute:d}):a.createElement(_e,{id:d?"subscribe-to-mcp-server-table":"subscribe-to-api-table"},a.createElement(Me.Ay,{title:"",data:i,columns:u,options:m}))}}Ke.propTypes={intl:l().shape({formatMessage:l().func}).isRequired,subscriptions:l().arrayOf(l().shape({})),searchText:l().string,handleSubscribe:l().func.isRequired,applicationId:l().string.isRequired,apisNotFound:l().bool,setTenantDomain:l().func,entityType:l().oneOf(["API","MCP"])},Ke.defaultProps={subscriptions:[],searchText:"",apisNotFound:!1,setTenantDomain:()=>{},entityType:"API"};const je=(0,g.Ay)(Ke);var Fe=i(75623),ze=i(84769),Ve=i(61523),He=i(36575),Ge=i(70691),Ye=i(53723),Je=i(23049),Xe=i(61914),Ze=i(48875),Qe=i(27738),et=i(1062),tt=i(9165),it=i(85996),at=i(12055);const nt="Invoice-dialogWrapper",st=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${nt}`]:{"& span,& p , & h5, & label, & td, & li":{color:t.palette.getContrastText(t.palette.background.paper)},"& div, & input, & p.MuiFormHelperText-root":{color:t.palette.getContrastText(t.palette.background.paper)}}}})),rt=["Name","Value"],lt={filterType:"checkbox",sort:!1,search:!1,viewColumns:!1,filter:!1,selectableRowsHeader:!1,selectableRows:"none",pagination:!1,download:!1};function ot(e){const{subscriptionId:t,tiers:i}=e,[n,s]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),p=()=>{l(!1)};return a.createElement(st,null,a.createElement(S.A,{color:"grey",onClick:()=>{s(!0),c(null),(new Fe.A).getMonetizationInvoice(t).then((e=>{if(e&&e.obj){const t=[],{obj:{properties:i}}=e;Object.keys(i).forEach((e=>{const a=[];a.push(e),a.push(i[e]),t.push(a)})),c(t)}})).catch((e=>{console.error(e),l(!0)}))},startIcon:a.createElement(Ae.A,null,"receipt"),disabled:0===i.length},a.createElement(m.A,{id:"Applications.Details.Invoice.view.btn",defaultMessage:"View Invoice"})),o?a.createElement(v.A,{open:n,onClose:()=>{s(!1)},fullWidth:"true",className:nt},o&&a.createElement(Me.Ay,{title:"Upcoming Invoice",data:o,columns:rt,options:lt})):a.createElement(v.A,{open:r,onClose:p,fullWidth:"true",className:nt},a.createElement(P.A,null,a.createElement(m.A,{id:"Applications.Details.Invoice.no.data.available",defaultMessage:"No Data Available"})),a.createElement(C.A,null,a.createElement(D.A,{id:"invoice-dialog-description"},a.createElement(m.A,{id:"Applications.Details.Invoice.pending.invoice.data",defaultMessage:"Pending invoice data not found for this subscription."}))),a.createElement(M.A,null,a.createElement(S.A,{onClick:p,color:"primary"},a.createElement(m.A,{id:"Applications.Details.Invoice.close",defaultMessage:"Close"})))))}ot.defaultProps={tiers:[]},ot.propTypes={subscriptionId:l().string.isRequired,tiers:l().arrayOf(l().string)};const ct=ot;var pt=i(6442),dt=i(71543),ut=i(20889),mt=i(2543),gt=i.n(mt),ht=i(74353),bt=i.n(ht),At=i(6279),ft=i.n(At),yt=i(82299),Et=i(66325);const St="WebHookDetails",vt={buttonIcon:`${St}-buttonIcon`,paper:`${St}-paper`,grid:`${St}-grid`,userNotificationPaper:`${St}-userNotificationPaper`,titleSub:`${St}-titleSub`,root:`${St}-root`,titleWrapper:`${St}-titleWrapper`,listWrapper:`${St}-listWrapper`,subscriptionRow:`${St}-subscriptionRow`,callbackurl:`${St}-callbackurl`,subscriptionTimestamp:`${St}-subscriptionTimestamp`,SubscriptionHeader:`${St}-SubscriptionHeader`},Mt=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${vt.buttonIcon}`]:{marginRight:10},[`& .${vt.paper}`]:{margin:t.spacing(1),padding:t.spacing(1)},[`& .${vt.grid}`]:{marginTop:t.spacing(4),marginBottom:t.spacing(4),paddingRight:t.spacing(2),justifyContent:"center"},[`& .${vt.userNotificationPaper}`]:{padding:t.spacing(2)},[`& .${vt.titleSub}`]:{marginLeft:t.spacing(2),paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},[`&.${vt.root}`]:{padding:t.spacing(3),"& h5":{color:t.palette.getContrastText(t.palette.background.default)}},[`& .${vt.titleWrapper}`]:{display:"flex",alignItems:"center",paddingBottom:t.spacing(2),"& h5":{marginRight:t.spacing(1)}},[`& .${vt.listWrapper}`]:{width:"100%"},[`& .${vt.subscriptionRow}`]:{paddingLeft:"16px"},[`& .${vt.callbackurl}`]:{fontSize:"12px"},[`& .${vt.subscriptionTimestamp}`]:{float:"right"},[`& .${vt.SubscriptionHeader}`]:{paddingBottom:"0px",paddingLeft:"0px",paddingTop:"0px"}}}));function Ct(e){const{apiId:t,applicationId:i}=e,n=(0,pt.A)(),[s,r]=(0,a.useState)("");return(0,a.useEffect)((()=>{(new h.A).getWebhookubScriptions(t,i).then((e=>{const t=gt().groupBy(e.obj.list,"topic");r(t)})).catch((e=>{console.log(e),ve.A.error(n.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.webhook.subscription",defaultMessage:"Error while retrieving webhook subscriptions"}))}))}),[]),a.createElement(Mt,{className:vt.root},a.createElement("div",{className:vt.titleWrapper},a.createElement(u.A,{variant:"h5",className:vt.keyTitle},a.createElement(m.A,{id:"Applications.Details.Subscriptions.api.webhooks",defaultMessage:"Webhooks"}))),a.createElement(G.A,{className:vt.listWrapper},Object.keys(s).length<1&&a.createElement(u.A,{color:"textPrimary",display:"block"},a.createElement(m.A,{id:"Applications.Details.Subscriptions.api.webhooks.subscriptions.unavailable",defaultMessage:"No Webhook subscriptions available at this time."})),Object.keys(s).map(((e,t)=>a.createElement(a.Fragment,null,a.createElement(Y.Ay,{className:vt.SubscriptionHeader},a.createElement(X.A,{primary:e})),s[e].map((e=>a.createElement(x.Ay,{container:!0,direction:"row"},a.createElement(x.Ay,{item:!0,xs:1},(e=>{switch(e.deliveryStatus){case 1:return a.createElement(ut.A,{style:{color:"green",fontSize:"14px",paddingTop:"3px"}});case 2:return a.createElement(yt.A,{style:{color:"red",fontSize:"14px",paddingTop:"3px"}});default:return a.createElement(Et.A,{style:{color:"black",fontSize:"14px",paddingTop:"3px"}})}})(e)),a.createElement(x.Ay,{item:!0,xs:8},a.createElement(u.A,{color:"textPrimary",display:"block",className:vt.callbackurl},e.callBackUrl)),a.createElement(x.Ay,{item:!0,xs:3},e.deliveryTime?a.createElement(u.A,{color:"textSecondary",display:"block",variant:"caption",className:vt.subscriptionTimestamp},e.deliveryTime):a.createElement(u.A,{color:"textSecondary",display:"block",variant:"caption",className:vt.subscriptionTimestamp},a.createElement(m.A,{id:"Applications.Details.Subscriptions.api.webhooks.delivery.time.unavailable",defaultMessage:"Delivery data unavailable"}))),a.createElement(dt.A,{component:"li"})))),t!==Object.keys(s).length-1&&a.createElement(dt.A,{component:"li",sx:{padding:"5px"}}))))))}function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Dt.apply(null,arguments)}bt().extend(ft());const Pt="BLOCKED",Tt="ON_HOLD",xt="REJECTED",kt="TIER_UPDATE_PENDING";class It extends a.Component{constructor(e){super(e),this.state={openMenu:!1,openMenuEdit:!1,isMonetizedAPI:!1,isDynamicUsagePolicy:!1,tiers:[],selectedTier:"",isWebhookAPI:!1,callbackLinkAnchor:null},this.handleRequestClose=this.handleRequestClose.bind(this),this.handleRequestOpen=this.handleRequestOpen.bind(this),this.handleRequestDelete=this.handleRequestDelete.bind(this),this.checkIfDynamicUsagePolicy=this.checkIfDynamicUsagePolicy.bind(this),this.checkIfMonetizedAPI=this.checkIfMonetizedAPI.bind(this),this.populateSubscriptionTiers=this.populateSubscriptionTiers.bind(this),this.handleSubscriptionTierUpdate=this.handleSubscriptionTierUpdate.bind(this),this.handleRequestCloseEditMenu=this.handleRequestCloseEditMenu.bind(this),this.handleRequestOpenEditMenu=this.handleRequestOpenEditMenu.bind(this),this.setSelectedTier=this.setSelectedTier.bind(this),this.checkIfWebhookAPI=this.checkIfWebhookAPI.bind(this),this.handleOpenCallbackURLs=this.handleOpenCallbackURLs.bind(this),this.handleCloseCallbackURLs=this.handleCloseCallbackURLs.bind(this)}componentDidMount(){const{subscription:e}=this.props;this.checkIfWebhookAPI(),this.checkIfMonetizedAPI(e.apiId),this.checkIfDynamicUsagePolicy(e.subscriptionId),this.populateSubscriptionTiers(e.apiId)}setSelectedTier(e){this.setState({selectedTier:e})}handleRequestDelete(e){const{handleSubscriptionDelete:t}=this.props;this.setState({openMenu:!1}),t&&t(e)}handleRequestCloseEditMenu(){this.setState({openMenuEdit:!1})}handleRequestOpenEditMenu(){this.setState({openMenuEdit:!0})}handleRequestOpen(){this.setState({openMenu:!0})}handleRequestClose(){this.setState({openMenu:!1})}handleSubscriptionTierUpdate(e,t,i,a,n){const{handleSubscriptionUpdate:s}=this.props;this.setState({openMenuEdit:!1}),s&&s(e,t,n,a,i)}populateSubscriptionTiers(e){let t;const{subscription:i}=this.props;t="MCP"===i.apiInfo.type?(new Ce.A).getMCPServerById(e):(new h.A).getAPIById(e),t.then((e=>{if(e&&e.data){const t=JSON.parse(e.data).tiers,i=[];for(let e=0;e<t.length;e++){const{tierName:a}=t[e];i.push({value:a,label:a})}this.setState({tiers:i})}}))}checkIfMonetizedAPI(e){let t;const{subscription:i}=this.props;t="MCP"===i.apiInfo.type?(new Ce.A).getMCPServerById(e):(new h.A).getAPIById(e),t.then((e=>{if(e&&e.data){const t=JSON.parse(e.data);this.setState({isMonetizedAPI:t.monetization.enabled})}}))}checkIfDynamicUsagePolicy(e){(new Fe.A).getSubscription(e).then((e=>{if(e&&e.body){const t=JSON.parse(e.data);t.throttlingPolicy&&(new h.A).getTierByName(t.throttlingPolicy,"subscription").then((e=>{const t=JSON.parse(e.data);t.monetizationAttributes.billingType&&"DYNAMICRATE"===t.monetizationAttributes.billingType&&this.setState({isDynamicUsagePolicy:!0})}))}}))}checkIfWebhookAPI(){this.setState({isWebhookAPI:this.props.subscription.apiInfo.type===De.A.API_TYPES.WEBSUB})}handleOpenCallbackURLs(e){this.setState({callbackLinkAnchor:e.currentTarget})}handleCloseCallbackURLs(){this.setState({callbackLinkAnchor:null})}render(){const{subscription:{apiInfo:e,status:t,throttlingPolicy:i,subscriptionId:s,apiId:r,requestedThrottlingPolicy:l}}=this.props,{openMenu:c,isMonetizedAPI:p,isDynamicUsagePolicy:d,openMenuEdit:u,selectedTier:g,tiers:h,isWebhookAPI:b,callbackLinkAnchor:A}=this.state,f=h&&1===h.length&&h[0].value.includes(De.A.DEFAULT_SUBSCRIPTIONLESS_PLAN),y=a.createElement(o.N_,{to:0===h.length?"":(0,et.D)(e.type)+r,style:{cursor:0===h.length?"default":""},external:!0},(e.displayName||e.name)+" - "+e.version+" ",a.createElement(it.Icon,{path:tt.gs2,size:"12px"})),E=Boolean(A),T=E?"simple-popover":void 0,x=a.createElement("a",{"aria-describedby":T,style:{fontSize:"0.6rem",color:"#072938",textDecoration:"underline",paddingLeft:"10px"},onClick:e=>this.handleOpenCallbackURLs(e),onKeyDown:e=>"Enter"===e.key&&this.handleOpenCallbackURLs(e),role:"button",tabIndex:0},"View Callback URLs");return!f&&a.createElement(Je.A,{hover:!0},a.createElement(Ge.A,null,y,b&&a.createElement(a.Fragment,null,x,a.createElement(at.Ay,{id:T,open:E,anchorEl:A,onClose:this.handleCloseCallbackURLs,anchorOrigin:{vertical:"bottom",horizontal:"left"}},a.createElement(Ct,{applicationId:this.props.subscription.applicationId,apiId:this.props.subscription.apiId})))),a.createElement(Ge.A,null,e.lifeCycleStatus),i.includes(De.A.DEFAULT_SUBSCRIPTIONLESS_PLAN)?a.createElement(Ge.A,null,i," ",a.createElement(z.A,{placement:"bottom",interactive:!0,"aria-label":"helper text for default subscription policy",title:a.createElement(a.Fragment,null,a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.policy.default.tooltip",defaultMessage:"This is the default subscription policy used when subscription validation was disabled."})),sx:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:"12px",border:"1px solid #dadde9"}},a.createElement(n.A,{component:"span",sx:{display:"inline-flex",verticalAlign:"middle",fontSize:"16px"}},a.createElement(Qe.A,{sx:{fontSize:"inherit"}})))):a.createElement(Ge.A,null,i),a.createElement(Ge.A,null,t),a.createElement(Ge.A,null,a.createElement(S.A,{id:"edit-api-subscription-"+r,color:"grey",onClick:this.handleRequestOpenEditMenu,startIcon:a.createElement(Ae.A,null,"edit"),disabled:0===h.length||t===Pt||"PROD_ONLY_BLOCKED"===t},a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.edit.text",defaultMessage:"Edit"})),a.createElement(v.A,{open:u,transition:Ze.A},a.createElement(P.A,null,a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.update.subscription",defaultMessage:"Update Subscription"})),a.createElement(C.A,null,a.createElement(D.A,null,a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.update.business.plan",defaultMessage:"Current Business Plan : "}),i,a.createElement("div",null,t===Pt?a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.blocked",defaultMessage:"Subscription is in BLOCKED state. You need to unblock the subscription in order to edit the tier"}):t===Tt?a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.onHold",defaultMessage:"Subscription is currently ON_HOLD state. You need to get approval to the subscription before editing the tier"}):t===xt?a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.rejected",defaultMessage:"Subscription is currently REJECTED state. You need to get approval to the subscription before editing the tier"}):t===kt?a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.tierUpdatePending",defaultMessage:"Subscription is currently TIER_UPDATE_PENDING state. You need to get approval to the existing subscription edit request before editing the tier"}):a.createElement("div",null,a.createElement(xe.A,{id:"application-policy",disableClearable:!0,options:h,getOptionLabel:e=>{var t;return null!==(t=e.label)&&void 0!==t?t:e},getOptionSelected:(e,t)=>e.value===t,value:g,onChange:(e,t)=>this.setSelectedTier(t.value),renderInput:e=>a.createElement(I.A,Dt({id:"outlined-select-currency",name:"throttlingPolicy",required:!0},e,{label:a.createElement(m.A,{defaultMessage:"Business Plan",id:"Applications.Details.SubscriptionTableData.update.business.plan.name"}),helperText:a.createElement(m.A,{defaultMessage:"Assign a new Business plan to the existing subscription",id:"Applications.Details.SubscriptionTableData.update.throttling.policy.helper"}),margin:"normal",variant:"outlined"}))}),t===kt&&a.createElement("div",null,a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.tier.update",defaultMessage:"Pending Tier Update : "}),l))))),a.createElement(M.A,null,a.createElement(S.A,{dense:!0,color:"grey",onClick:this.handleRequestCloseEditMenu},a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.cancel",defaultMessage:"Cancel"})),a.createElement(S.A,{variant:"contained",disabled:t===Pt||t===Tt||t===xt||t===kt,dense:!0,color:"primary",onClick:()=>this.handleSubscriptionTierUpdate(r,s,g,t,i),"data-testid":"subscription-tier-update-button"},a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.update",defaultMessage:"Update"})))),a.createElement(Ie.M9,{resourcePath:Ie.Hc.SINGLE_SUBSCRIPTION,resourceMethod:Ie.DT.DELETE},a.createElement(S.A,{id:"delete-api-subscription-"+r,color:"grey",onClick:this.handleRequestOpen,startIcon:a.createElement(Ae.A,null,"delete"),disabled:0===h.length||"DELETE_PENDING"===t},a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.delete.text",defaultMessage:"Delete"}))),a.createElement(v.A,{open:c,transition:Ze.A},a.createElement(P.A,null,a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.delete.subscription.confirmation.dialog.title",defaultMessage:"Confirm"})),a.createElement(C.A,null,a.createElement(D.A,null,a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.delete.subscription.confirmation",defaultMessage:"Are you sure you want to delete the Subscription?"}))),a.createElement(M.A,null,a.createElement(S.A,{dense:!0,color:"grey",onClick:this.handleRequestClose},a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.cancel",defaultMessage:"Cancel"})),a.createElement(S.A,{id:"delete-api-subscription-confirm-btn",dense:!0,variant:"contained",color:"primary",onClick:()=>this.handleRequestDelete(s)},a.createElement(m.A,{id:"Applications.Details.SubscriptionTableData.delete",defaultMessage:"Delete"})))),p&&a.createElement(ct,{tiers:h,subscriptionId:s,isDynamicUsagePolicy:d})))}}It.propTypes={subscription:l().shape({apiInfo:l().shape({name:l().string.isRequired,displayName:l().string,version:l().string.isRequired,lifeCycleStatus:l().string.isRequired,type:l().string.isRequired}).isRequired,throttlingPolicy:l().string.isRequired,subscriptionId:l().string.isRequired,apiId:l().string.isRequired,applicationId:l().string.isRequired,status:l().string.isRequired,requestedThrottlingPolicy:l().string.isRequired}).isRequired,handleSubscriptionDelete:l().func.isRequired,handleSubscriptionUpdate:l().func.isRequired};const wt=It,Rt=["title","buttonText","subscriptions","subscriptionsNotFound","pseudoSubscriptions","onAddClick","handleSubscriptionDelete","handleSubscriptionUpdate","noSubscriptionsMessage","noSubscriptionsContent","entityNameColumn"],Lt="SubscriptionSection",Nt={root:`${Lt}-root`,firstCell:`${Lt}-firstCell`,cardContent:`${Lt}-cardContent`,titleWrapper:`${Lt}-titleWrapper`,genericMessageWrapper:`${Lt}-genericMessageWrapper`,subsTable:`${Lt}-subsTable`,sectionContainer:`${Lt}-sectionContainer`},$t=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${Nt.sectionContainer}`]:{marginBottom:t.spacing(4),border:`1px solid ${t.palette.divider}`,borderRadius:t.shape.borderRadius,padding:t.spacing(2)},[`& .${Nt.firstCell}`]:{paddingLeft:0},[`& .${Nt.cardContent}`]:{"& table tr td":{paddingLeft:t.spacing(1)},"& table tr:nth-child(even)":{backgroundColor:t.custom.listView.tableBodyEvenBackgrund,"& td, & a":{color:t.palette.getContrastText(t.custom.listView.tableBodyEvenBackgrund)}},"& table tr:nth-child(odd)":{backgroundColor:t.custom.listView.tableBodyOddBackgrund,"& td, & a":{color:t.palette.getContrastText(t.custom.listView.tableBodyOddBackgrund)}},"& table th":{backgroundColor:t.custom.listView.tableHeadBackground,color:t.palette.getContrastText(t.custom.listView.tableHeadBackground),paddingLeft:t.spacing(1)}},[`& .${Nt.titleWrapper}`]:{display:"flex",alignItems:"center",paddingBottom:t.spacing(2),"& h5":{marginRight:t.spacing(1)}},[`& .${Nt.genericMessageWrapper}`]:{margin:t.spacing(2)},[`& .${Nt.subsTable}`]:{"& td":{padding:"4px 8px"},"& th":{padding:"8px"},"& th:nth-of-type(1)":{width:"25%",minWidth:"200px"},"& th:nth-of-type(2)":{width:"20%",minWidth:"150px"},"& th:nth-of-type(3)":{width:"20%",minWidth:"150px"},"& th:nth-of-type(4)":{width:"20%",minWidth:"150px"},"& th:nth-of-type(5)":{width:"15%",minWidth:"120px"},"& td:nth-of-type(1)":{width:"25%",minWidth:"200px"},"& td:nth-of-type(2)":{width:"20%",minWidth:"150px"},"& td:nth-of-type(3)":{width:"20%",minWidth:"150px"},"& td:nth-of-type(4)":{width:"20%",minWidth:"150px"},"& td:nth-of-type(5)":{width:"15%",minWidth:"120px"},tableLayout:"fixed",width:"100%"}}})),Ot=e=>{let{title:t,buttonText:i,subscriptions:s,subscriptionsNotFound:r,pseudoSubscriptions:l,onAddClick:o,handleSubscriptionDelete:c,handleSubscriptionUpdate:p,noSubscriptionsMessage:d,noSubscriptionsContent:g,entityNameColumn:h}=e,b=function(e,t){if(null==e)return{};var i,a,n=function(e,t){if(null==e)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;i[a]=e[a]}return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(e,Rt);return a.createElement($t,b,a.createElement(n.A,{className:Nt.sectionContainer},a.createElement(n.A,{className:Nt.titleWrapper},a.createElement(u.A,{variant:"h5",sx:{textTransform:"capitalize"}},t),a.createElement(S.A,{color:"secondary",size:"small",onClick:o,sx:{ml:"auto",mr:2}},a.createElement(Ae.A,null,"add_circle_outline"),i)),a.createElement(x.Ay,{container:!0,spacing:2},a.createElement(x.Ay,{item:!0,xs:12},s&&0===s.length||l?a.createElement(n.A,{className:Nt.genericMessageWrapper},a.createElement(Xe.A,{type:"info",sx:e=>({width:"100%",padding:e.spacing(2)})},a.createElement(u.A,{variant:"h5",component:"h3"},d),a.createElement(u.A,{component:"p"},g))):a.createElement(n.A,{className:Nt.cardContent},r?a.createElement(f.A,null):a.createElement(Ve.A,{className:Nt.subsTable},a.createElement(Ye.A,null,a.createElement(Je.A,null,a.createElement(Ge.A,{className:Nt.firstCell},h),a.createElement(Ge.A,null,a.createElement(m.A,{id:"Applications.Details.Subscriptions.subscription.state",defaultMessage:"Lifecycle State"})),a.createElement(Ge.A,null,a.createElement(m.A,{id:"Applications.Details.Subscriptions.business.plan",defaultMessage:"Business Plan"})),a.createElement(Ge.A,null,a.createElement(m.A,{id:"Applications.Details.Subscriptions.Status",defaultMessage:"Subscription Status"})),a.createElement(Ge.A,null,a.createElement(m.A,{id:"Applications.Details.Subscriptions.action",defaultMessage:"Action"})))),a.createElement(He.A,null,s&&s.map((e=>a.createElement(wt,{key:e.subscriptionId,subscription:e,handleSubscriptionDelete:c,handleSubscriptionUpdate:p}))))))))))};Ot.propTypes={title:l().node.isRequired,buttonText:l().node.isRequired,subscriptions:l().arrayOf(l().shape({})),subscriptionsNotFound:l().bool,pseudoSubscriptions:l().bool,onAddClick:l().func.isRequired,handleSubscriptionDelete:l().func.isRequired,handleSubscriptionUpdate:l().func.isRequired,noSubscriptionsMessage:l().node.isRequired,noSubscriptionsContent:l().node.isRequired,entityNameColumn:l().node.isRequired},Ot.defaultProps={subscriptions:[],subscriptionsNotFound:!1,pseudoSubscriptions:!1};const qt=Ot;function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Bt.apply(null,arguments)}const Ut="Subscriptions",Wt={searchRoot:`${Ut}-searchRoot`,searchBar:`${Ut}-searchBar`,input:`${Ut}-input`,iconButton:`${Ut}-iconButton`,divider:`${Ut}-divider`,root:`${Ut}-root`,subscribePop:`${Ut}-subscribePop`,firstCell:`${Ut}-firstCell`,cardTitle:`${Ut}-cardTitle`,cardContent:`${Ut}-cardContent`,titleWrapper:`${Ut}-titleWrapper`,dialogHeader:`${Ut}-dialogHeader`,dialogTitle:`${Ut}-dialogTitle`,genericMessageWrapper:`${Ut}-genericMessageWrapper`,searchResults:`${Ut}-searchResults`,clearSearchIcon:`${Ut}-clearSearchIcon`,subsTable:`${Ut}-subsTable`,closeButton:`${Ut}-closeButton`},_t=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${Wt.root}`]:{padding:t.spacing(3),"& h5":{color:t.palette.getContrastText(t.palette.background.default)}},[`& .${Wt.firstCell}`]:{paddingLeft:0},[`& .${Wt.cardContent}`]:{"& table tr td":{paddingLeft:t.spacing(1)},"& table tr:nth-child(even)":{backgroundColor:t.custom.listView.tableBodyEvenBackgrund,"& td, & a":{color:t.palette.getContrastText(t.custom.listView.tableBodyEvenBackgrund)}},"& table tr:nth-child(odd)":{backgroundColor:t.custom.listView.tableBodyOddBackgrund,"& td, & a":{color:t.palette.getContrastText(t.custom.listView.tableBodyOddBackgrund)}},"& table th":{backgroundColor:t.custom.listView.tableHeadBackground,color:t.palette.getContrastText(t.custom.listView.tableHeadBackground),paddingLeft:t.spacing(1)}},[`& .${Wt.titleWrapper}`]:{display:"flex",alignItems:"center",paddingBottom:t.spacing(2),"& h5":{marginRight:t.spacing(1)}},[`& .${Wt.genericMessageWrapper}`]:{margin:t.spacing(2)},[`& .${Wt.subsTable}`]:{"& td":{padding:"4px 8px"},tableLayout:"fixed",width:"100%","& th, & td":{borderRight:`1px solid ${t.palette.divider}`,"&:last-child":{borderRight:"none"}}}}})),Kt=(0,s.Ay)(v.A)((e=>{let{theme:t}=e;return{[`& .${Wt.subscribePop}`]:{"& span, & h5, & label, & input, & td, & li":{color:t.palette.getContrastText(t.palette.background.paper)}},[`& .${Wt.dialogHeader}`]:{display:"flex",justifyContent:"space-between"},[`& .${Wt.dialogTitle}`]:{marginTop:t.spacing(1),padding:t.spacing(2)},[`& .${Wt.searchRoot}`]:{marginLeft:"auto",width:"50%",marginTop:t.spacing(2)},[`& .${Wt.searchBar}`]:{padding:"2px 4px",display:"flex",alignItems:"center",flex:1,marginLeft:t.spacing(2),marginRight:t.spacing(1)},[`& .${Wt.clearSearchIcon}`]:{cursor:"pointer"},[`& .${Wt.input}`]:{marginLeft:t.spacing(1),flex:1},[`& .${Wt.iconButton}`]:{padding:10},[`& .${Wt.searchResults}`]:{height:30,display:"flex",paddingTop:t.spacing(1),paddingRight:0,paddingBottom:0,paddingLeft:t.spacing(3)},[`& .${Wt.closeButton}`]:{height:"100%",marginTop:t.spacing(2),marginRight:t.spacing(1)}}}));class jt extends a.Component{constructor(e){super(e),this.state={subscriptions:null,apiSubscriptions:null,mcpSubscriptions:null,apisNotFound:!1,subscriptionsNotFound:!1,isAuthorize:!0,openDialog:!1,openMcpDialog:!1,searchText:"",pseudoSubscriptions:!1,pseudoMcpSubscriptions:!1},this.checkSubValidationDisabled=this.checkSubValidationDisabled.bind(this),this.handleSubscriptionDelete=this.handleSubscriptionDelete.bind(this),this.handleSubscriptionUpdate=this.handleSubscriptionUpdate.bind(this),this.updateSubscriptions=this.updateSubscriptions.bind(this),this.handleSubscribe=this.handleSubscribe.bind(this),this.handleOpenDialog=this.handleOpenDialog.bind(this),this.handleOpenMcpDialog=this.handleOpenMcpDialog.bind(this),this.handleSearchTextChange=this.handleSearchTextChange.bind(this),this.handleSearchTextTmpChange=this.handleSearchTextTmpChange.bind(this),this.handleClearSearch=this.handleClearSearch.bind(this),this.handleEnterPress=this.handleEnterPress.bind(this),this.searchTextTmp=""}componentDidMount(){const{applicationId:e}=this.props.application;this.updateSubscriptions(e)}handleOpenDialog(){this.setState((e=>({openDialog:!e.openDialog,searchText:""})))}handleOpenMcpDialog(){this.setState((e=>({openMcpDialog:!e.openMcpDialog,searchText:""})))}checkSubValidationDisabled(e){null!==e&&e.length>0&&e.filter((e=>e.apiInfo.throttlingPolicies&&1===e.apiInfo.throttlingPolicies.length&&e.apiInfo.throttlingPolicies[0].includes(De.A.DEFAULT_SUBSCRIPTIONLESS_PLAN))).length===e.length?this.setState({pseudoSubscriptions:!0}):this.setState({pseudoSubscriptions:!1})}checkMcpSubValidationDisabled(e){null!==e&&e.length>0&&e.filter((e=>e.apiInfo.throttlingPolicies&&1===e.apiInfo.throttlingPolicies.length&&e.apiInfo.throttlingPolicies[0].includes(De.A.DEFAULT_SUBSCRIPTIONLESS_PLAN))).length===e.length?this.setState({pseudoMcpSubscriptions:!0}):this.setState({pseudoMcpSubscriptions:!1})}updateSubscriptions(e){const t=new Fe.A,i=b.app.subscriptionLimit||1e3;t.getSubscriptions(null,e,i).then((e=>{const t=e.body.list,i=t.filter((e=>e.apiInfo&&"MCP"!==e.apiInfo.type)),a=t.filter((e=>e.apiInfo&&"MCP"===e.apiInfo.type));this.setState({subscriptions:t,apiSubscriptions:i,mcpSubscriptions:a}),this.checkSubValidationDisabled(i),this.checkMcpSubValidationDisabled(a)})).catch((e=>{const{status:t}=e;404===t?this.setState({subscriptionsNotFound:!0}):401===t&&this.setState({isAuthorize:!1})}))}handleSubscriptionDelete(e){const{intl:t}=this.props;(new Fe.A).deleteSubscription(e).then((i=>{if(200===i.status&&ve.A.info(t.formatMessage({defaultMessage:"Subscription deleted successfully!",id:"Applications.Details.Subscriptions.delete.success"})),201===i.status){console.log(i),ve.A.info(t.formatMessage({defaultMessage:"Subscription Deletion Request Created!",id:"Applications.Details.Subscriptions.request.created"}));const{applicationId:e}=this.props.application;return void this.updateSubscriptions(e)}if(200!==i.status&&201!==i.status)return console.log(i),void ve.A.info(t.formatMessage({defaultMessage:"Something went wrong while deleting the Subscription!",id:"Applications.Details.Subscriptions.something.went.wrong"}));const{subscriptions:a,apiSubscriptions:n,mcpSubscriptions:s}=this.state,r=a.filter((t=>t.subscriptionId!==e)),l=n?n.filter((t=>t.subscriptionId!==e)):[],o=s?s.filter((t=>t.subscriptionId!==e)):[];this.setState({subscriptions:r,apiSubscriptions:l,mcpSubscriptions:o}),this.checkSubValidationDisabled(l),this.checkMcpSubValidationDisabled(o),this.props.getApplication()})).catch((e=>{const{status:i}=e;401===i&&this.setState({isAuthorize:!1}),ve.A.error(t.formatMessage({defaultMessage:"Error occurred when deleting subscription",id:"Applications.Details.Subscriptions.error.while.deleting"}))}))}handleSubscriptionUpdate(e,t,i,a,n){const{intl:s}=this.props,{applicationId:r}=this.props.application;(new Fe.A).updateSubscription(r,e,t,i,a,n).then((e=>{if(200!==e.status&&201!==e.status)return console.log(e),void ve.A.info(s.formatMessage({defaultMessage:"Something went wrong while updating the Subscription!",id:"Applications.Details.Subscriptions.wrong.with.subscription"}));"TIER_UPDATE_PENDING"===e.body.status?ve.A.info(s.formatMessage({defaultMessage:"Your subscription update request has been submitted and is now awaiting approval.",id:"subscription.tierPending"})):ve.A.info(s.formatMessage({defaultMessage:"Business Plan updated successfully!",id:"Applications.Details.Subscriptions.business.plan.updated"})),this.updateSubscriptions(r),this.props.getApplication()})).catch((e=>{const{status:t}=e;401===t&&this.setState({isAuthorize:!1}),ve.A.error(s.formatMessage({defaultMessage:"Error occurred when updating subscription",id:"Applications.Details.Subscriptions.error.when.updating"}))}))}handleSubscribe(e,t,i){const a=new h.A,{intl:n}=this.props;i?a.subscribe(t,e,i).then((t=>{201!==t.status?ve.A.error(n.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.during.subscription.not.201",defaultMessage:"Error occurred during subscription"})):("ON_HOLD"===t.body.status?ve.A.info(n.formatMessage({defaultMessage:"Your subscription request has been submitted and is now awaiting approval.",id:"subscription.pending"})):"TIER_UPDATE_PENDING"===t.body.status?ve.A.info(n.formatMessage({defaultMessage:"Your subscription update request has been submitted and is now awaiting approval.",id:"subscription.tierPending"})):ve.A.info(n.formatMessage({id:"Applications.Details.Subscriptions.subscription.successful",defaultMessage:"Subscription successful"})),this.updateSubscriptions(e),this.props.getApplication())})).catch((e=>{const{status:t}=e;401===t&&this.setState({isAuthorize:!1}),403===t&&e.response.body?ve.A.error(e.response.body.description):ve.A.error(n.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.during.subscription",defaultMessage:"Error occurred during subscription"}))})):ve.A.error(n.formatMessage({id:"Applications.Details.Subscriptions.select.a.subscription.policy",defaultMessage:"Select a subscription policy"}))}handleSearchTextChange(){this.setState({searchText:this.searchTextTmp})}handleSearchTextTmpChange(e){this.searchTextTmp=e.target.value}handleClearSearch(){this.setState({searchText:""}),this.searchInputElem.value=""}handleEnterPress(e){13===e.keyCode&&(e.preventDefault(),this.handleSearchTextChange())}render(){const{isAuthorize:e,openDialog:t,openMcpDialog:i,searchText:s,subscriptions:r,apiSubscriptions:l,mcpSubscriptions:o,apisNotFound:c,subscriptionsNotFound:p,pseudoSubscriptions:d,pseudoMcpSubscriptions:g}=this.state;e||(window.location=b.app.context+"/services/configs");const{application:h,intl:A,apisAccessible:f,mcpServersAccessible:y}=this.props,{applicationId:E}=h;return r?a.createElement(_t,null,a.createElement(n.A,{className:Wt.root},a.createElement(u.A,{variant:"h4",sx:{textTransform:"capitalize",marginBottom:3}},a.createElement(m.A,{id:"Applications.Details.Subscriptions.subscriptions",defaultMessage:"Subscriptions"})),f&&a.createElement(qt,{title:a.createElement(m.A,{id:"Applications.Details.Subscriptions.subscribed.apis",defaultMessage:"Subscribed APIs"}),buttonText:a.createElement(m.A,{id:"Applications.Details.Subscriptions.apis.add.subscription.button",defaultMessage:"Subscribe"}),subscriptions:l,subscriptionsNotFound:p,pseudoSubscriptions:d,onAddClick:this.handleOpenDialog,handleSubscriptionDelete:this.handleSubscriptionDelete,handleSubscriptionUpdate:this.handleSubscriptionUpdate,noSubscriptionsMessage:a.createElement(m.A,{id:"Applications.Details.Subscriptions.no.api.subscriptions",defaultMessage:"No API Subscriptions Available"}),noSubscriptionsContent:a.createElement(m.A,{id:"Applications.Details.Subscriptions.no.api.subscriptions.content",defaultMessage:"No API subscriptions are available for this Application"}),entityNameColumn:a.createElement(m.A,{id:"Applications.Details.Subscriptions.api.name",defaultMessage:"API"}),"data-testid":"api-subscriptions-section"}),y&&a.createElement(qt,{title:a.createElement(m.A,{id:"Applications.Details.Subscriptions.subscribed.mcp.servers",defaultMessage:"Subscribed MCP Servers"}),buttonText:a.createElement(m.A,{id:"Applications.Details.Subscriptions.mcp.servers.add.subscription.button",defaultMessage:"Subscribe"}),subscriptions:o,subscriptionsNotFound:p,pseudoSubscriptions:g,onAddClick:this.handleOpenMcpDialog,handleSubscriptionDelete:this.handleSubscriptionDelete,handleSubscriptionUpdate:this.handleSubscriptionUpdate,noSubscriptionsMessage:a.createElement(m.A,{id:"Applications.Details.Subscriptions.no.mcp.subscriptions",defaultMessage:"No MCP Server Subscriptions Available"}),noSubscriptionsContent:a.createElement(m.A,{id:"Applications.Details.Subscriptions.no.mcp.subscriptions.content",defaultMessage:"No MCP server subscriptions are available for this Application"}),entityNameColumn:a.createElement(m.A,{id:"Applications.Details.Subscriptions.mcp.server.name",defaultMessage:"MCP Server"}),"data-testid":"mcp-subscriptions-section"}),f&&a.createElement(Kt,{onClose:this.handleOpenDialog,"aria-labelledby":"simple-dialog-title",open:t,maxWidth:"false",className:Wt.subscribePop},a.createElement(n.A,{className:Wt.dialogHeader},a.createElement(P.A,{className:Wt.dialogTitle,disableTypography:!0},a.createElement(u.A,{variant:"h6"},a.createElement(m.A,{id:"Applications.Details.Subscriptions.subscription.subscribe.apis",defaultMessage:"Subscribe to API(s)"}))),a.createElement(n.A,{className:Wt.searchRoot},a.createElement(be.A,{component:"form",className:Wt.searchBar},s&&a.createElement(ye.A,{className:Wt.clearSearchIcon,onClick:this.handleClearSearch}),a.createElement(fe.Ay,{className:Wt.input,placeholder:A.formatMessage({defaultMessage:"Search APIs",id:"Applications.Details.Subscriptions.search"}),inputProps:{"aria-label":A.formatMessage({defaultMessage:"Search APIs",id:"Applications.Details.Subscriptions.search"})},inputRef:e=>{this.searchInputElem=e},onChange:this.handleSearchTextTmpChange,onKeyDown:this.handleEnterPress}),a.createElement(j.A,{className:Wt.iconButton,"aria-label":"search",onClick:this.handleSearchTextChange,size:"large"},a.createElement(Ee.default,null))),a.createElement(n.A,{className:Wt.searchResults},s&&""!==s?a.createElement(a.Fragment,null,a.createElement(u.A,{variant:"caption"},a.createElement(m.A,{id:"Applications.Details.Subscriptions.filter.msg",defaultMessage:"Filtered APIs for"}),` ${s}`)):a.createElement(u.A,{variant:"caption"},a.createElement(m.A,{id:"Applications.Details.Subscriptions.filter.msg.all.apis",defaultMessage:"Displaying all APIs"})))),a.createElement(j.A,{"aria-label":"close",className:Wt.closeButton,onClick:this.handleOpenDialog,size:"large"},a.createElement(Ae.A,null,"cancel"))),a.createElement(n.A,{padding:2},a.createElement(je,{apisNotFound:c,subscriptions:l||[],applicationId:E,handleSubscribe:(e,t,i)=>this.handleSubscribe(e,t,i),searchText:s,entityType:"API"}))),y&&a.createElement(Kt,{onClose:this.handleOpenMcpDialog,"aria-labelledby":"mcp-dialog-title",open:i,maxWidth:"false",className:Wt.subscribePop},a.createElement(n.A,{className:Wt.dialogHeader},a.createElement(P.A,{className:Wt.dialogTitle,disableTypography:!0},a.createElement(u.A,{variant:"h6"},a.createElement(m.A,{id:"Applications.Details.Subscriptions.subscription.subscribe.mcp.servers",defaultMessage:"Subscribe to MCP Server(s)"}))),a.createElement(n.A,{className:Wt.searchRoot},a.createElement(be.A,{component:"form",className:Wt.searchBar},s&&a.createElement(ye.A,{className:Wt.clearSearchIcon,onClick:this.handleClearSearch}),a.createElement(fe.Ay,{className:Wt.input,placeholder:A.formatMessage({defaultMessage:"Search MCP Servers",id:"Applications.Details.Subscriptions.search.mcp"}),inputProps:{"aria-label":A.formatMessage({defaultMessage:"Search MCP Servers",id:"Applications.Details.Subscriptions.search.mcp"})},inputRef:e=>{this.searchInputElem=e},onChange:this.handleSearchTextTmpChange,onKeyDown:this.handleEnterPress}),a.createElement(j.A,{className:Wt.iconButton,"aria-label":"search",onClick:this.handleSearchTextChange,size:"large"},a.createElement(Ee.default,null))),a.createElement(n.A,{className:Wt.searchResults},s&&""!==s?a.createElement(a.Fragment,null,a.createElement(u.A,{variant:"caption"},a.createElement(m.A,{id:"Applications.Details.Subscriptions.filter.mcp.msg",defaultMessage:"Filtered MCP Servers for"}),` ${s}`)):a.createElement(u.A,{variant:"caption"},a.createElement(m.A,{id:"Applications.Details.Subscriptions.filter.msg.all.mcp",defaultMessage:"Displaying all MCP Servers"})))),a.createElement(j.A,{"aria-label":"close",className:Wt.closeButton,onClick:this.handleOpenMcpDialog,size:"large"},a.createElement(Ae.A,null,"cancel"))),a.createElement(n.A,{padding:2},a.createElement(je,{apisNotFound:c,subscriptions:o||[],applicationId:E,handleSubscribe:(e,t,i)=>this.handleSubscribe(e,t,i),searchText:s,entityType:"MCP"}))))):a.createElement(Se.A,null)}}jt.propTypes={application:l().shape({applicationId:l().string.isRequired}).isRequired,getApplication:l().func.isRequired,intl:l().shape({formatMessage:l().func.isRequired}).isRequired,apisAccessible:l().bool.isRequired,mcpServersAccessible:l().bool.isRequired};const Ft=e=>{const t=(0,ze.j3)(),i=(0,ze.kJ)();return a.createElement(jt,Bt({},e,{apisAccessible:t,mcpServersAccessible:i}))};Ft.propTypes={application:l().shape({applicationId:l().string.isRequired}).isRequired,getApplication:l().func.isRequired};const zt=(0,g.Ay)(Ft);var Vt=i(60111),Ht=i(46252),Gt=i(32997),Yt=i(68738),Jt=i(2587);function Xt(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Zt extends a.Component{constructor(e){super(e),Xt(this,"isOrgWideAppUpdateEnabled",(()=>{const{settings:{orgWideAppUpdateEnabled:e}}=this.context;this.setState({isOrgWideAppUpdateEnabled:e})})),Xt(this,"toggleDeleteConfirmation",(()=>{this.setState((e=>{let{isDeleteOpen:t}=e;return{isDeleteOpen:!t}}))})),this.state={notFound:!1,showOverview:!0,isDeleteOpen:!1,isOrgWideAppUpdateEnabled:!1},this.toggleOverview=this.toggleOverview.bind(this),this.handleAppDelete=this.handleAppDelete.bind(this),this.handleDeleteConfimation=this.handleDeleteConfimation.bind(this),this.toggleDeleteConfirmation=this.toggleDeleteConfirmation.bind(this),this.APPLICATION_STATES={UPDATE_PENDING:"UPDATE_PENDING"}}componentDidMount(){this.isOrgWideAppUpdateEnabled()}handleAppDelete(){const{applicationId:e,intl:t,application:i}=this.props,a=Ht.A.deleteApp(e);let n=t.formatMessage({defaultMessage:"In Application {name} deleted successfully!",id:"Applications.Details.InfoBar.application.deleted.successfully"},{name:i.name});a.then((e=>{200===e?(ve.A.info(n),this.toggleDeleteConfirmation()):201===e&&(ve.A.info(t.formatMessage({defaultMessage:"Delete request created for application {name}",id:"Applications.Listing.Listing.application.deleting.requested"},{name:i.name})),this.toggleDeleteConfirmation()),this.props.history.push("/applications")})).catch((e=>{console.log(e),n=t.formatMessage({defaultMessage:"Error while deleting application {name}",id:"Applications.Details.InfoBar.application.deleting.error"},{name:i.name}),ve.A.error(n)}))}handleDeleteConfimation(){const{isDeleteOpen:e}=this.state;this.setState({isDeleteOpen:!e})}toggleOverview(e){"boolean"==typeof e?this.setState({showOverview:e}):this.setState((e=>({showOverview:!e.showOverview})))}render(){const{applicationId:e,application:t}=this.props,i=this.props.application.owner,{notFound:s,isDeleteOpen:r,isOrgWideAppUpdateEnabled:l}=this.state;if(s)return a.createElement(f.A,{message:a.createElement(m.A,{id:"Applications.Details.InfoBar.listing.resource.not.found",defaultMessage:"Resource Not Fount"})});if(!t)return a.createElement(A.A,null);const c=Gt.A.getUser().name===i,p=(null==t?void 0:t.status)===this.APPLICATION_STATES.UPDATE_PENDING;return a.createElement(n.A,{sx:{width:"100%"}},a.createElement(n.A,{sx:e=>({height:e.custom.infoBar.height||70,background:e.custom.infoBar.background||"#ffffff",color:e.palette.getContrastText(e.custom.infoBar.background||"#ffffff"),borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center",paddingLeft:e.spacing(2)})},a.createElement(x.Ay,{item:!0,xs:10},a.createElement(n.A,{sx:e=>({marginLeft:e.spacing(1)})},a.createElement(o.N_,{to:"/applications/"+e+"/overview",className:e=>({color:e.palette.getContrastText(e.custom.infoBar.background)})},a.createElement(u.A,{id:"itest-info-bar-application-name",variant:"h4",noWrap:!0},t.name))),a.createElement(n.A,{sx:e=>({marginLeft:e.spacing(1)})},a.createElement(u.A,{variant:"caption",gutterBottom:!0,align:"left",noWrap:!0},t.subscriptionCount," ",a.createElement(m.A,{id:"Applications.Details.InfoBar.subscriptions",defaultMessage:"Subscriptions"})))),(l||c)&&a.createElement(x.Ay,{container:!0,justifyContent:"flex-end"},a.createElement(Vt.A,{height:70}),a.createElement(x.Ay,{item:!0,xs:1,m:3,sx:e=>({display:"inline-grid",cursor:"pointer",justifyContent:"center","& .material-icons, & span":{color:e.palette.getContrastText(e.custom.infoBar.background)}})},a.createElement(o.N_,{to:`/applications/${e}/edit/fromView`,onClick:e=>{p&&e.preventDefault()},sx:e=>({display:"inline-grid",cursor:"pointer","& .material-icons, & span":{color:e.palette.getContrastText(e.custom.infoBar.background)}})},a.createElement(S.A,{id:"edit-application",style:{padding:"4px",display:"flex",flexDirection:"column",opacity:p?.5:1},disabled:p,color:"grey",classes:{label:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},"aria-label":a.createElement(m.A,{id:"Applications.Details.InfoBar.edit",defaultMessage:"Edit"})},a.createElement(Ae.A,null,"edit"),a.createElement(u.A,{variant:"caption",style:{marginTop:"2px"}},a.createElement(m.A,{id:"Applications.Details.InfoBar.edit.text",defaultMessage:"Edit"}))))),a.createElement(Vt.A,{height:70}),a.createElement(x.Ay,{item:!0,xs:1,m:1,sx:e=>({display:"inline-grid",marginRight:"20px",cursor:"pointer","& .material-icons, & span":{color:e.palette.getContrastText(e.custom.infoBar.background)}})},a.createElement(S.A,{id:"delete-application",onClick:this.handleDeleteConfimation,style:{padding:"3px",display:"flex",flexDirection:"column"},disabled:!l&&Gt.A.getUser().name!==i||"DELETE_PENDING"===this.props.application.status,color:"grey",classes:{label:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},"aria-label":a.createElement(m.A,{id:"Applications.Details.InfoBar.delete",defaultMessage:"Delete"})},a.createElement(Ae.A,null,"delete"),a.createElement(u.A,{variant:"caption",style:{marginTop:"2px"}},a.createElement(m.A,{id:"Applications.Details.InfoBar.text",defaultMessage:"Delete"}))),a.createElement(Jt.A,{handleAppDelete:this.handleAppDelete,isDeleteOpen:r,toggleDeleteConfirmation:this.toggleDeleteConfirmation})))))}}Zt.contextType=Yt.Ay,Zt.propTypes={classes:l().shape({}).isRequired,theme:l().shape({}).isRequired,applicationId:l().string.isRequired};const Qt=(0,g.Ay)((0,c.y)(Zt));var ei=i(57555),ti=i(90891);const ii=e=>{const{handleResetThrottlePolicy:t,isResetOpen:i,toggleResetConfirmation:n}=e,[s,r]=(0,a.useState)(""),[l,o]=(0,a.useState)(1),[c,p]=(0,a.useState)(!0),d=(0,pt.A)();return a.createElement(v.A,{open:i,transition:Ze.A,role:"alertdialog"},1===l?a.createElement(a.Fragment,null,a.createElement(P.A,null,a.createElement(m.A,{id:"Applications.Listing.ResetPolicyDialog.dialog.title",defaultMessage:"Reset Application Throttle Policy"}),a.createElement(z.A,{interactive:!0,title:a.createElement(m.A,{id:"Applications.Listing.ResetPolicyDialog.dialog.text.description.tooltip",defaultMessage:"Check the username properly before submitting since User will not be validated. Only a Policy Reset Request will be generated for the specified user"}),placement:"right",style:{marginLeft:"20px",maxWidth:500}},a.createElement(j.A,{style:{marginLeft:"10px"}},a.createElement(ti.A,null)))),a.createElement(C.A,null,a.createElement(D.A,null,a.createElement(m.A,{id:"Applications.Listing.ResetPolicyDialog.dialog.text.description",defaultMessage:"Enter the user of the application"})),a.createElement(I.A,{autoFocus:!0,type:"text",value:s,onChange:e=>{var t;r(e.target.value),(t=e.target.value)&&""!==t.trim()?(p(!0),Promise.resolve(!0)):(p(!1),Promise.reject(new Error(d.formatMessage({id:"Applications.Listing.ResetPolicyDialog.dialog.user.required",defaultMessage:"Application name is required"}))))},id:"application-name",margin:"normal",variant:"outlined",required:!0,fullWidth:!0,label:d.formatMessage({defaultMessage:"User",id:"Applications.Listing.ResetPolicyDialog.dialog.user"}),name:"user",error:!c,inputProps:{maxLength:70,alt:d.formatMessage({defaultMessage:"Required",id:"Applications.Listing.ResetPolicyDialog.dialog.required.alt"})}})),a.createElement(M.A,null,a.createElement(S.A,{onClick:n},a.createElement(m.A,{id:"Applications.Listing.ResetPolicyDialog.dialog.cancel",defaultMessage:"Cancel"})),a.createElement(S.A,{id:"next-button",size:"small",variant:"outlined",color:"primary",onClick:()=>{o(2)},disabled:!s},a.createElement(m.A,{id:"Applications.Listing.ResetPolicyDialog.dialog.next",defaultMessage:"Next"})))):a.createElement(a.Fragment,null,a.createElement(P.A,null,a.createElement(m.A,{id:"Applications.Listing.ResetPolicyDialog.dialog.confirmation.title",defaultMessage:"Confirm Reset"})),a.createElement(C.A,null,a.createElement(D.A,null,a.createElement(m.A,{id:"Applications.Listing.ResetPolicyDialog.dialog.confirmation.text",defaultMessage:"Are you sure you want to reset the throttle policy for user {user}?",values:{user:s}}))),a.createElement(M.A,null,a.createElement(S.A,{onClick:()=>{o(1)}},a.createElement(m.A,{id:"Applications.Listing.ResetPolicyDialog.dialog.back",defaultMessage:"Back"})),a.createElement(S.A,{id:"reset-button",size:"small",variant:"outlined",color:"primary",onClick:()=>{""!==s&&(t(s),n(),r(""),o(1))}},a.createElement(m.A,{id:"Applications.Listing.ResetPolicyDialog.dialog.reset",defaultMessage:"Reset"})))))};ii.propTypes={handleResetThrottlePolicy:l().func.isRequired,isResetOpen:l().bool.isRequired,toggleResetConfirmation:l().func.isRequired};const ai=ii,ni="Overview",si={root:`${ni}-root`,table:`${ni}-table`,leftCol:`${ni}-leftCol`,iconAligner:`${ni}-iconAligner`,iconTextWrapper:`${ni}-iconTextWrapper`,iconEven:`${ni}-iconEven`,iconOdd:`${ni}-iconOdd`,heading:`${ni}-heading`,emptyBox:`${ni}-emptyBox`,summaryRoot:`${ni}-summaryRoot`,actionPanel:`${ni}-actionPanel`,disabledTier:`${ni}-disabledTier`,Paper:`${ni}-Paper`,Paper2:`${ni}-Paper2`,list:`${ni}-list`,urlPaper:`${ni}-urlPaper`,input:`${ni}-input`,avatar:`${ni}-avatar`,iconStyle:`${ni}-iconStyle`,infoButton:`${ni}-infoButton`},ri=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${si.root}`]:{padding:t.spacing(3,2),"& td, & th":{color:t.palette.getContrastText(t.custom.infoBar.background)},background:t.custom.infoBar.background},[`& .${si.table}`]:{minWidth:"100%"},[`& .${si.leftCol}`]:{width:200},[`& .${si.iconAligner}`]:{display:"flex",justifyContent:"flex-start",alignItems:"center"},[`& .${si.iconTextWrapper}`]:{display:"inline-block",paddingLeft:20},[`& .${si.iconEven}`]:{color:t.custom.infoBar.iconOddColor,width:t.spacing(3)},[`& .${si.iconOdd}`]:{color:t.custom.infoBar.iconOddColor,width:t.spacing(3)},[`& .${si.heading}`]:{color:t.palette.getContrastText(t.palette.background.paper),paddingLeft:t.spacing(1)},[`& .${si.emptyBox}`]:{background:"#ffffff55",color:t.palette.getContrastText(t.palette.background.paper),border:"solid 1px #fff",padding:t.spacing(2),width:"100%"},[`& .${si.summaryRoot}`]:{display:"flex",alignItems:"center"},[`& .${si.actionPanel}`]:{justifyContent:"flex-start"},[`& .${si.disabledTier}`]:{color:"#999999",fontWeight:"400"},[`& .${si.Paper}`]:{marginTop:t.spacing(2),padding:t.spacing(2)},[`& .${si.Paper2}`]:{marginTop:t.spacing(2),padding:t.spacing(2),height:"80%"},[`& .${si.list}`]:{width:"100%",maxWidth:800,backgroundColor:t.palette.background.paper,position:"relative",overflow:"auto",maxHeight:175},[`& .${si.urlPaper}`]:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%",border:`solid 1px ${t.palette.grey[300]}`,"& .MuiInputBase-root:before,  .MuiInputBase-root:hover":{borderBottom:"none !important",color:t.palette.primary.main},"& .MuiSelect-select":{color:t.palette.primary.main,paddingLeft:t.spacing()},"& .MuiInputBase-input":{color:t.palette.primary.main},"& .material-icons":{fontSize:16,color:`${t.palette.grey[700]} !important`},borderRadius:10,marginRight:t.spacing()},[`& .${si.input}`]:{marginLeft:t.spacing(1),flex:1},[`& .${si.avatar}`]:{width:30,height:30,background:"transparent",border:`solid 1px ${t.palette.grey[300]}`},[`& .${si.iconStyle}`]:{cursor:"pointer",margin:"-10px 0",padding:"0 0 0 5px","& .material-icons":{fontSize:18,color:"#9c9c9c"}},[`& .${si.infoButton}`]:{marginLeft:t.spacing(1),color:t.palette.grey[600]}}})),li=(0,g.Ay)((function(e){const[t,i]=(0,a.useState)(null),[n,s]=(0,a.useState)(null),[r,l]=(0,a.useState)(!1),{match:{params:{applicationId:o}}}=e,[c,p]=(0,a.useState)(null),[d,g]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null),[E,v]=(0,a.useState)(null),[M,C]=(0,a.useState)(null),[D,P]=(0,a.useState)(!1),T=(0,pt.A)();return(0,a.useEffect)((()=>{const e=new h.A;e.getApplication(o).then((t=>{const a=t.obj;i(a),e.getTierByName(t.obj.throttlingPolicy,"application").then((e=>{s(e.obj.description),a.solaceDeployedEnvironments&&(p(a.solaceDeployedEnvironments[0]),y(a.solaceDeployedEnvironments[0].solaceURLs[0].protocol),v(a.solaceDeployedEnvironments[0].solaceURLs[0].endpointURL),"mqtt"===a.solaceDeployedEnvironments[0].solaceURLs[0].protocol?C(a.solaceDeployedEnvironments[0].SolaceTopicsObject.mqttSyntax):C(a.solaceDeployedEnvironments[0].SolaceTopicsObject.defaultSyntax))})).catch((e=>{g(!0),s("Tier is disabled."),console.log(e)}))})).catch((e=>{const{status:t}=e;l(404===t)}))}),[]),r?a.createElement(f.A,null):t?(c&&(console.log(c),console.log(M)),a.createElement(ri,null,a.createElement("div",{className:si.root},a.createElement(Ve.A,{className:si.table},a.createElement(He.A,null,a.createElement(Je.A,null,a.createElement(Ge.A,{component:"th",scope:"row",className:si.leftCol},a.createElement("div",{className:si.iconAligner},a.createElement(Ae.A,{className:si.iconEven},"description"),a.createElement("span",{className:si.iconTextWrapper},a.createElement(u.A,{variant:"caption",gutterBottom:!0,align:"left"},a.createElement(m.A,{id:"Applications.Details.Overview.description",defaultMessage:"Description"}))))),a.createElement(Ge.A,null,t.description)),a.createElement(Je.A,null,a.createElement(Ge.A,{component:"th",scope:"row",className:si.leftCol},a.createElement("div",{className:si.iconAligner},a.createElement(Ae.A,{className:si.iconOdd},"settings_input_component"),a.createElement("span",{className:si.iconTextWrapper},a.createElement(u.A,{variant:"caption",gutterBottom:!0,align:"left"},a.createElement(m.A,{id:"Applications.Details.InfoBar.business.plan",defaultMessage:"Business Plan"}))))),t&&a.createElement(Ge.A,{className:si.iconAligner},t.throttlingPolicy,n&&n.trim()&&a.createElement("span",{className:d?si.disabledTier:""},"",`(${n.trim()})`),a.createElement(Vt.A,{height:40}),a.createElement(x.Ay,{item:!0,xs:1,m:1},a.createElement(S.A,{id:"reset-application-policy",style:{padding:"1px"},onClick:()=>{P(!0)},color:"grey","aria-label":a.createElement(m.A,{id:"Applications.Details.Overview.application.reset",defaultMessage:"Reset"})},a.createElement(Ae.A,null,"replay"),a.createElement(u.A,{variant:"caption"},a.createElement(m.A,{id:"Applications.Details.Overview.application.reset.text",defaultMessage:"RESET"}))),a.createElement(z.A,{interactive:!0,title:a.createElement(m.A,{id:"Applications.Details.Overview.application.reset.tooltip",defaultMessage:"Reset the Application Throttle Policy for a Specific User"}),placement:"right",classeName:si.infoToolTip},a.createElement(j.A,{className:si.infoButton,"aria-label":"arch"},a.createElement(ti.A,null))),a.createElement(ai,{handleResetThrottlePolicy:e=>{(new h.A).resetApplicationPolicy(e,t.applicationId).then((t=>{200===t.status&&ve.A.success(T.formatMessage({defaultMessage:"Application Policy Reset request for {name} has been triggered successfully",id:"Applications.Details.Overview.reset.successful"},{name:e}))})).catch((t=>{const{response:i}=t;null!=i&&i.body&&(400===t.status?ve.A.error(i.body.description):ve.A.error(T.formatMessage({defaultMessage:"Error while resetting application policy for {name}",id:"Applications.Details.Overview.reset.error"},{name:e})))}))},isResetOpen:D,toggleResetConfirmation:()=>{P(!1)}})))),a.createElement(Je.A,null,a.createElement(Ge.A,{component:"th",scope:"row",className:si.leftCol},a.createElement("div",{className:si.iconAligner},a.createElement(Ae.A,{className:si.iconOdd},"assignment_turned_in"),a.createElement("span",{className:si.iconTextWrapper},a.createElement(u.A,{variant:"caption",gutterBottom:!0,align:"left"},a.createElement(m.A,{id:"Applications.Details.Overview.workflow.status",defaultMessage:"Workflow Status"}))))),a.createElement(Ge.A,null,{CREATED:"Created",APPROVED:"Approved",REJECTED:"Rejected",DELETE_PENDING:"Delete Pending",UPDATE_PENDING:"Update Pending",UPDATE_REJECTED:"Update Rejected"}[t.status]||t.status)),a.createElement(Je.A,null,a.createElement(Ge.A,{component:"th",scope:"row",className:si.leftCol},a.createElement("div",{className:si.iconAligner},a.createElement(Ae.A,{className:si.iconEven},"account_box"),a.createElement("span",{className:si.iconTextWrapper},a.createElement(u.A,{variant:"caption",gutterBottom:!0,align:"left"},a.createElement(m.A,{id:"Applications.Details.Overview.application.owner",defaultMessage:"Application Owner"}))))),a.createElement(Ge.A,null,t.owner)),t.attributes&&Object.keys(t.attributes).map(((e,i)=>{const n=t.attributes[e];return a.createElement(Je.A,{key:e},a.createElement(Ge.A,{component:"th",scope:"row",className:si.leftCol},a.createElement("div",{className:si.iconAligner},a.createElement(Ae.A,{className:he()({[si.iconEven]:i%2!=0},{[si.iconOdd]:i%2==0})},"web_asset"),a.createElement("span",{className:si.iconTextWrapper},a.createElement(u.A,{variant:"caption",gutterBottom:!0,align:"left"},e)))),a.createElement(Ge.A,null,n))})))),!0===t.containsSolaceApis&&c&&M&&a.createElement("div",{className:si.root},a.createElement(u.A,{id:"itest-api-details-bushiness-plans-head",variant:"h5"},a.createElement(m.A,{id:"solace.application.available.topics.heading",defaultMessage:"Available Topics"})),a.createElement(u.A,{variant:"caption",gutterBottom:!0},a.createElement(m.A,{id:"solace.application.available.topics.subheading",defaultMessage:"Topics permitted to access from solace applications"})),a.createElement(be.A,{className:si.Paper},a.createElement(x.Ay,{container:!0,spacing:2},a.createElement(x.Ay,{item:!0,xs:12},a.createElement(x.Ay,{container:!0,spacing:2},a.createElement(x.Ay,{item:!0},a.createElement(I.A,{select:!0,onChange:e=>{p(e.target.value),console.log(e.target.value)},value:c.environmentDisplayName,style:{maxWidth:"100%"},variant:"outlined",label:"Environment Name"},t.solaceDeployedEnvironments.map((e=>a.createElement(Te.A,{key:e,value:e.environmentDisplayName},e.environmentDisplayName))))),a.createElement(x.Ay,{item:!0},a.createElement(I.A,{select:!0,onChange:e=>{let t;y(e.target.value),c.solaceURLs.map((i=>(i.protocol===e.target.value&&(v(i.endpointURL),t=i.protocol),null))),C("mqtt"===t?c.SolaceTopicsObject.mqttSyntax:c.SolaceTopicsObject.defaultSyntax)},value:b,style:{maxWidth:"100%"},variant:"outlined",label:"Protocol"},c.solaceURLs.map((e=>a.createElement(Te.A,{key:e.protocol,value:e.protocol},(0,ei.mf)(e.protocol)))))),a.createElement(x.Ay,{item:!0},a.createElement(I.A,{style:{minWidth:"200%"},label:"Endpoint URL",value:E,variant:"outlined"})))),a.createElement(x.Ay,{item:!0,xs:6},a.createElement(be.A,{className:si.Paper2},a.createElement(u.A,{id:"itest-api-details-bushiness-plans-head",variant:"h6"},a.createElement(m.A,{id:"solace.application.topics.publish",defaultMessage:"Publish Topics"})),a.createElement(G.A,{className:si.list},M.publishTopics.map((e=>a.createElement(Y.Ay,null,a.createElement(u.A,{gutterBottom:!0,align:"left"},e))))))),a.createElement(x.Ay,{item:!0,xs:6},a.createElement(be.A,{className:si.Paper2},a.createElement(u.A,{id:"itest-api-details-bushiness-plans-head",variant:"h6"},a.createElement(m.A,{id:"solace.application.topics.subscribe",defaultMessage:"Subscribe Topics"})),a.createElement(G.A,{className:si.list},M.subscribeTopics.map((e=>a.createElement(Y.Ay,null,a.createElement(u.A,{gutterBottom:!0,align:"left"},e))))))))))))):a.createElement(A.A,null)}));function oi(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ci="index",pi={LeftMenu:`${ci}-LeftMenu`,leftMenuHorizontal:`${ci}-leftMenuHorizontal`,leftMenuVerticalLeft:`${ci}-leftMenuVerticalLeft`,leftMenuVerticalRight:`${ci}-leftMenuVerticalRight`,leftLInkMain:`${ci}-leftLInkMain`,leftLInkMainText:`${ci}-leftLInkMainText`,detailsContent:`${ci}-detailsContent`,content:`${ci}-content`,contentLoader:`${ci}-contentLoader`,contentLoaderRightMenu:`${ci}-contentLoaderRightMenu`,titleWrapper:`${ci}-titleWrapper`,contentWrapper:`${ci}-contentWrapper`,keyTitle:`${ci}-keyTitle`},di=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{width:"100%",[`& .${pi.LeftMenu}`]:{backgroundColor:t.custom.leftMenu.background,backgroundImage:`url(${b.app.context}${t.custom.leftMenu.backgroundImage})`,textAlign:"left",fontFamily:t.typography.fontFamily,position:"absolute",bottom:0,paddingLeft:"horizontal"===t.custom.leftMenu.position?t.spacing(3):0},[`& .${pi.leftMenuHorizontal}`]:{top:t.custom.infoBar.height,width:"100%",overflowX:"auto",height:60,display:"flex",left:0},[`& .${pi.leftMenuVerticalLeft}`]:{width:t.custom.leftMenu.width,top:0,left:0,overflowY:"auto",[t.breakpoints.down("md")]:{width:50}},[`& .${pi.leftMenuVerticalRight}`]:{width:t.custom.leftMenu.width,top:0,right:0,overflowY:"auto",[t.breakpoints.down("md")]:{width:50}},[`& .${pi.leftLInkMain}`]:{borderRight:"solid 1px "+t.custom.leftMenu.background,cursor:"pointer",background:t.custom.leftMenu.rootBackground,color:t.palette.getContrastText(t.custom.leftMenu.rootBackground),textDecoration:"none",alignItems:"center",justifyContent:"center",display:"flex",height:t.custom.infoBar.height},[`& .${pi.leftLInkMainText}`]:{fontSize:18,color:t.palette.grey[500],textDecoration:"none",paddingLeft:t.spacing(2)},[`& .${pi.detailsContent}`]:{display:"flex",flex:1},[`& .${pi.content}`]:{display:"flex",flex:1,flexDirection:"column",marginLeft:"vertical-left"===t.custom.leftMenu.position?t.custom.leftMenu.width-4:0,marginRight:"vertical-right"===t.custom.leftMenu.position?t.custom.leftMenu.width:0,paddingBottom:t.spacing(3),overflowX:"hidden",[t.breakpoints.down("sm")]:{marginLeft:"vertical-left"===t.custom.leftMenu.position?50:0,marginRight:"vertical-right"===t.custom.leftMenu.position?50:0}},[`& .${pi.contentLoader}`]:{paddingTop:t.spacing(3)},[`& .${pi.contentLoaderRightMenu}`]:{paddingRight:t.custom.leftMenu.width},[`& .${pi.titleWrapper}`]:{paddingLeft:25,paddingTop:28,textTransform:"capitalize"},[`& .${pi.contentWrapper}`]:{paddingLeft:25},[`& .${pi.keyTitle}`]:{textTransform:"capitalize"}}}));class ui extends a.Component{constructor(e){super(e),oi(this,"getApplication",(()=>{const e=new h.A,t=this.props.match.params.application_uuid;e.getApplication(t).then((e=>(this.setState({application:e.obj}),Promise.all([e])))).catch((e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})}))})),oi(this,"handleMenuSelect",(e=>{const{history:t,match:i}=this.props;t.push({pathname:"/applications/"+i.params.application_uuid+"/"+e})})),oi(this,"toTitleCase",(e=>e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())))),oi(this,"renderManager",((e,t,i)=>a.createElement(be.A,null,"oauth"===i&&a.createElement(E.A,{keyType:t,selectedApp:{appId:e.applicationId,label:e.name,tokenType:e.tokenType,owner:e.owner,hashEnabled:e.hashEnabled}}),"apikey"===i&&a.createElement("div",{className:pi.root},a.createElement("div",{className:pi.titleWrapper},a.createElement(u.A,{variant:"h5",className:pi.keyTitle},this.toTitleCase(t),a.createElement(m.A,{id:"Applications.Details.api.keys.title",defaultMessage:" API Key"}))),a.createElement("div",{className:pi.contentWrapper},a.createElement(me,{keyType:t,selectedApp:{appId:e.applicationId,label:e.name,tokenType:e.tokenType,owner:e.owner}})))))),this.state={application:null},this.getApplication=this.getApplication.bind(this)}componentDidMount(){this.getApplication()}render(){const{match:e,intl:t}=this.props,{notFound:i,application:s}=this.state,r="/applications/"+e.params.application_uuid,l=r+"/overview";return i?a.createElement(f.A,null):s?a.createElement(di,null,a.createElement("nav",{role:"navigation","aria-label":t.formatMessage({id:"Applications.Details.index.secondary.navigation",defaultMessage:"Secondary Navigation"}),className:he()(pi.LeftMenu,{[pi.leftMenuHorizontal]:!1},{[pi.leftMenuVerticalLeft]:!0},{[pi.leftMenuVerticalRight]:!1},"left-menu")},!1,a.createElement(y.A,{text:a.createElement(m.A,{id:"Applications.Details.menu.overview",defaultMessage:"Overview"}),iconText:"overview",route:"overview",to:r+"/overview",open:!0}),a.createElement(y.A,{text:a.createElement(m.A,{id:"Applications.Details.menu.prod.keys",defaultMessage:"Production Keys"}),iconText:"productionkeys",route:"productionkeys",to:r+"/productionkeys/oauth",open:!0,id:"production-keys"}),a.createElement(y.A,{text:a.createElement(m.A,{id:"Applications.Details.menu.oauth.tokens",defaultMessage:"OAuth2 Tokens"}),route:"productionkeys/oauth",to:r+"/productionkeys/oauth",submenu:!0,Icon:a.createElement(d.A,null),open:!0,id:"production-keys-oauth"}),a.createElement(y.A,{text:a.createElement(m.A,{id:"Applications.Details.menu.api.key",defaultMessage:"API Key"}),route:"productionkeys/apikey",to:r+"/productionkeys/apikey",submenu:!0,Icon:a.createElement(p.A,null),open:!0,id:"production-keys-apikey"}),a.createElement(y.A,{text:a.createElement(m.A,{id:"Applications.Details.menu.sandbox.keys",defaultMessage:"Sandbox Keys"}),iconText:"productionkeys",route:"sandboxkeys",to:r+"/sandboxkeys/oauth",open:!0,id:"sandbox-keys"}),a.createElement(y.A,{text:a.createElement(m.A,{id:"Applications.Details.menu.oauth.tokens",defaultMessage:"OAuth2 Tokens"}),route:"sandboxkeys/oauth",to:r+"/sandboxkeys/oauth",submenu:!0,Icon:a.createElement(d.A,null),open:!0,id:"sandbox-keys-oauth"}),a.createElement(y.A,{text:a.createElement(m.A,{id:"Applications.Details.menu.api.key",defaultMessage:"API Key"}),route:"sandboxkeys/apikey",to:r+"/sandboxkeys/apikey",submenu:!0,Icon:a.createElement(p.A,null),open:!0,id:"sandbox-keys-apikey"}),a.createElement(y.A,{text:a.createElement(m.A,{id:"Applications.Details.menu.subscriptions",defaultMessage:"Subscriptions"}),iconText:"subscriptions",route:"subscriptions",to:r+"/subscriptions",open:!0,id:"left-menu-subscriptions"})),a.createElement(n.A,{className:pi.content},a.createElement(Qt,{application:s,applicationId:e.params.application_uuid,innerRef:e=>{this.infoBar=e}}),a.createElement("div",{className:he()({[pi.contentLoader]:!1},{[pi.contentLoaderRightMenu]:!1})},a.createElement(c.dO,null,a.createElement(c.rd,{exact:!0,from:"/applications/:applicationId",to:l}),a.createElement(c.qh,{path:"/applications/:applicationId/overview",component:li}),a.createElement(c.qh,{path:"/applications/:applicationId/productionkeys/oauth",render:()=>this.renderManager(s,"PRODUCTION","oauth")}),a.createElement(c.qh,{path:"/applications/:applicationId/productionkeys/apikey",render:()=>this.renderManager(s,"PRODUCTION","apikey")}),a.createElement(c.qh,{path:"/applications/:applicationId/sandboxkeys/oauth",render:()=>this.renderManager(s,"SANDBOX","oauth")}),a.createElement(c.qh,{path:"/applications/:applicationId/sandboxkeys/apikey",render:()=>this.renderManager(s,"SANDBOX","apikey")}),a.createElement(c.qh,{path:"/applications/:applicationId/subscriptions",render:()=>a.createElement(zt,{application:s,getApplication:this.getApplication})}),a.createElement(c.qh,{component:f.A}))))):a.createElement(A.A,null)}}ui.propTypes={classes:l().shape({}).isRequired,theme:l().shape({}).isRequired,match:l().shape({params:l().shape({application_uuid:l().string.isRequired}).isRequired}).isRequired,history:l().shape({push:l().func.isRequired}).isRequired,intl:l().shape({formatMessage:l().func}).isRequired};const mi=(0,g.Ay)(ui)},57555:(e,t,i)=>{function a(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function n(e){return e.toUpperCase()}i.d(t,{Zr:()=>a,mf:()=>n})},64679:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(66509),n=i(21688),s=i(94877);class r extends n.A{constructor(){super(),this.client=(new a.A).getAPIClient(s.A.getEnvironment().label).client,this._requestMetaData=n.A._requestMetaData}getAllMCPServers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.client.then((t=>t.apis["MCP Servers"].getAllMCPServers(e,this._requestMetaData())));return t?i.then(t):i}getMCPServerById(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.client.then((t=>t.apis["MCP Servers"].getMCPServer({mcpServerId:e},this._requestMetaData())));return t?i.then(t):i}getAllComments(e,t,i){return this.client.then((a=>a.apis.Comments.getAllCommentsOfMCPServer({mcpServerId:e,limit:t,offset:i},this._requestMetaData())))}addComment(e,t,i){return this.client.then((a=>{const n={mcpServerId:e,replyTo:i};return a.apis.Comments.addCommentToMCPServer(n,{requestBody:t},this._requestMetaData())}))}deleteComment(e,t){return this.client.then((i=>i.apis.Comments.deleteCommentOfMCPServer({mcpServerId:e,commentId:t},this._requestMetaData())))}updateComment(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const n=this.client.then((a=>a.apis.Comments.editCommentOfMCPServer({mcpServerId:e,commentId:t,body:i},this._requestMetaData())));return a?n.then(a):n}getAllCommentReplies(e,t,i,a){return this.client.then((n=>n.apis.Comments.getRepliesOfCommentOfMCPServer({mcpServerId:e,commentId:t,limit:i,offset:a},this._requestMetaData())))}getSubscriptionThrottlingPolicies(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.client.then((t=>t.apis["MCP Servers"].getMCPServerSubscriptionPolicies({mcpServerId:e},this._requestMetaData())));return t?i.then(t):i}getMCPServerThumbnail(e){return this.client.then((t=>t.apis["MCP Servers"].getMCPServerThumbnail({mcpServerId:e},this._requestMetaData())))}getMCPServerRatings(e,t,i){return this.client.then((a=>a.apis.Ratings.getMCPServerRatings({mcpServerId:e,limit:t,offset:i},this._requestMetaData())))}getRatingFromUser(e){return this.client.then((t=>t.apis.Ratings.getMCPServerRatings({mcpServerId:e},this._requestMetaData())))}addRating(e,t){return this.client.then((i=>i.apis.Ratings.addMCPServerRating({mcpServerId:e},{requestBody:t},this._requestMetaData())))}removeRatingOfUser(e){return this.client.then((t=>t.apis.Ratings.deleteMCPServerRating({mcpServerId:e},this._requestMetaData())))}getDocuments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.client.then((t=>t.apis["MCP Server Documents"].getMCPServerDocuments({mcpServerId:e},this._requestMetaData())));return t?i.then(t):i}getDocumentByDocId(e,t){return this.client.then((i=>i.apis["MCP Server Documents"].getMCPServerDocument({mcpServerId:e,documentId:t},this._requestMetaData())))}getFileForDocument(e,t){return this.client.then((i=>i.apis["MCP Server Documents"].getMCPServerDocumentFile({mcpServerId:e,documentId:t},this._requestMetaData())))}getInlineContentOfDocument(e,t){return this.client.then((i=>i.apis["MCP Server Documents"].getMCPServerDocumentContent({mcpServerId:e,documentId:t,Accept:"application/octet-stream"},this._requestMetaData({"Content-Type":"multipart/form-data"}))))}}}}]);
//# sourceMappingURL=ApplicationDetails.92cdb3bd7f8e6fe7acb9.bundle.js.map